{"remainingRequest":"C:\\wamp64\\www\\toolsmctc\\node_modules\\babel-loader\\lib\\index.js!C:\\wamp64\\www\\toolsmctc\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\wamp64\\www\\toolsmctc\\src\\router\\index.js","dependencies":[{"path":"C:\\wamp64\\www\\toolsmctc\\src\\router\\index.js","mtime":1603902303905},{"path":"C:\\wamp64\\www\\toolsmctc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\toolsmctc\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\toolsmctc\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZVJvdXRlciBmcm9tICd2dWUtcm91dGVyJzsgLy9pbXBvcnQgYXV0aGVudGljYXRlIGZyb20gIi4uL2F1dGgvYXV0aGVudGljYXRlIjsKCmltcG9ydCBzdG9yZSBmcm9tICdwbHVnaW4tdnVlanMta2V5Y2xvYWsnOwppbXBvcnQgc2VjdXJpdHkgZnJvbSAncGx1Z2luLXZ1ZWpzLWtleWNsb2FrL3NlY3VyaXR5JzsKVnVlLnVzZShWdWVSb3V0ZXIpOwoKZnVuY3Rpb24gbG9hZChjb21wb25lbnQpIHsKICAvLyAnQCcgaXMgYWxpYXNlZCB0byBzcmMvY29tcG9uZW50cwogIC8vcmV0dXJuICgpID0+IGltcG9ydChgQC8ke2NvbXBvbmVudH0udnVlYCkKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIGltcG9ydCgiIi5jb25jYXQoY29tcG9uZW50KSk7CiAgfTsKfQoKdmFyIHJvdXRlcyA9IFt7CiAgcGF0aDogIi8iLAogIGNvbXBvbmVudDogbG9hZCgnLi4vdmlld3MvYXBwJyksCiAgLy8oKSA9PiBpbXBvcnQoIi4uL3ZpZXdzL2FwcCIpLCAvL3dlYnBhY2tDaHVua05hbWUgYXBwCiAgbWV0YTogewogICAgcmVxdWlyZXNBdXRoOiB0cnVlLAogICAgcm9sZXM6IFsndXNlciddCiAgfSwKICByZWRpcmVjdDogIi9hcHAvYm94L29wZW4iLAogIGNoaWxkcmVuOiBbewogICAgcGF0aDogIi9hcHAvYm94IiwKICAgIGNvbXBvbmVudDogbG9hZCgnLi4vdmlld3MvYXBwL2NhaXNzZXMnKSwKICAgIC8vKCkgPT4gaW1wb3J0KCIuLi92aWV3cy9hcHAvY2Fpc3NlcyIpLAogICAgY2hpbGRyZW46IFt7CiAgICAgIHBhdGg6ICJvcGVuIiwKICAgICAgY29tcG9uZW50OiBsb2FkKCcuLi92aWV3cy9hcHAvY2Fpc3Nlcy9ib3gnKSAvLyAoKSA9PiBpbXBvcnQoIi4uL3ZpZXdzL2FwcC9jYWlzc2VzL2JveCIpCgogICAgfV0KICB9XQp9LCB7CiAgcGF0aDogIi9hdXRoIiwKICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgIHJldHVybiBpbXBvcnQoIi4uL3ZpZXdzL2FwcC9zZXNzaW9ucyIpOwogIH0sCiAgLy9yZWRpcmVjdDogIi9hcHAvc2Vzc2lvbnMvc2lnbkluIiwKICBjaGlsZHJlbjogW3sKICAgIHBhdGg6ICJzaWduSW4iLAogICAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoIi4uL3ZpZXdzL2FwcC9zZXNzaW9ucy9zaWduSW4iKTsKICAgIH0KICB9XQp9XTsKdmFyIHJvdXRlciA9IG5ldyBWdWVSb3V0ZXIoewogIHJvdXRlczogcm91dGVzCn0pOwpyb3V0ZXIuYmVmb3JlRWFjaChmdW5jdGlvbiAodG8sIGZyb20sIG5leHQpIHsKICBpZiAodG8ubWV0YS5yZXF1aXJlc0F1dGgpIHsKICAgIHZhciBhdXRoID0gc3RvcmUuc3RhdGUuc2VjdXJpdHkuYXV0aDsKCiAgICBpZiAoIWF1dGguYXV0aGVudGljYXRlZCkgewogICAgICBzZWN1cml0eS5pbml0KG5leHQsIHRvLm1ldGEucm9sZXMpOwogICAgfSBlbHNlIHsKICAgICAgaWYgKHRvLm1ldGEucm9sZXMpIHsKICAgICAgICBpZiAoc2VjdXJpdHkucm9sZXModG8ubWV0YS5yb2xlc1swXSkpIHsKICAgICAgICAgIG5leHQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbmV4dCh7CiAgICAgICAgICAgIG5hbWU6ICd1bmF1dGhvcml6ZWQnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV4dCgpOwogICAgICB9CiAgICB9CiAgfSBlbHNlIHsKICAgIG5leHQoKTsKICB9Cn0pOwpleHBvcnQgZGVmYXVsdCByb3V0ZXI7"},{"version":3,"sources":["C:/wamp64/www/toolsmctc/src/router/index.js"],"names":["Vue","VueRouter","store","security","use","load","component","routes","path","meta","requiresAuth","roles","redirect","children","router","beforeEach","to","from","next","auth","state","authenticated","init","name"],"mappings":";AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB,C,CACA;;AAEA,OAAOC,KAAP,MAAkB,uBAAlB;AACA,OAAOC,QAAP,MAAqB,gCAArB;AAGAH,GAAG,CAACI,GAAJ,CAAQH,SAAR;;AAEA,SAASI,IAAT,CAAeC,SAAf,EAA0B;AACtB;AACA;AACA,SAAO;AAAA,WAAM,iBAAUA,SAAV,EAAN;AAAA,GAAP;AACH;;AAED,IAAMC,MAAM,GAAG,CACX;AACIC,EAAAA,IAAI,EAAE,GADV;AAEIF,EAAAA,SAAS,EAAED,IAAI,CAAC,cAAD,CAFnB;AAEsC;AAClCI,EAAAA,IAAI,EAAE;AAAEC,IAAAA,YAAY,EAAE,IAAhB;AAAsBC,IAAAA,KAAK,EAAE,CAAC,MAAD;AAA7B,GAHV;AAIIC,EAAAA,QAAQ,EAAE,eAJd;AAKIC,EAAAA,QAAQ,EAAE,CACN;AACIL,IAAAA,IAAI,EAAE,UADV;AAEIF,IAAAA,SAAS,EAAED,IAAI,CAAC,sBAAD,CAFnB;AAE6C;AACzCQ,IAAAA,QAAQ,EAAE,CACN;AACIL,MAAAA,IAAI,EAAE,MADV;AAEIF,MAAAA,SAAS,EAAED,IAAI,CAAC,0BAAD,CAFnB,CAEgD;;AAFhD,KADM;AAHd,GADM;AALd,CADW,EAmBX;AACIG,EAAAA,IAAI,EAAE,OADV;AAEIF,EAAAA,SAAS,EAAE;AAAA,WAAM,OAAO,uBAAP,CAAN;AAAA,GAFf;AAGI;AACAO,EAAAA,QAAQ,EAAE,CACN;AACIL,IAAAA,IAAI,EAAE,QADV;AAEIF,IAAAA,SAAS,EAAE;AAAA,aAAM,OAAO,8BAAP,CAAN;AAAA;AAFf,GADM;AAJd,CAnBW,CAAf;AAiCA,IAAMQ,MAAM,GAAG,IAAIb,SAAJ,CAAc;AAC3BM,EAAAA,MAAM,EAANA;AAD2B,CAAd,CAAf;AAKAO,MAAM,CAACC,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AAElC,MAAIF,EAAE,CAACP,IAAH,CAAQC,YAAZ,EAA0B;AAEtB,QAAMS,IAAI,GAAGjB,KAAK,CAACkB,KAAN,CAAYjB,QAAZ,CAAqBgB,IAAlC;;AACA,QAAI,CAACA,IAAI,CAACE,aAAV,EAAyB;AACrBlB,MAAAA,QAAQ,CAACmB,IAAT,CAAcJ,IAAd,EAAoBF,EAAE,CAACP,IAAH,CAAQE,KAA5B;AACH,KAFD,MAGK;AACD,UAAIK,EAAE,CAACP,IAAH,CAAQE,KAAZ,EAAmB;AACf,YAAIR,QAAQ,CAACQ,KAAT,CAAeK,EAAE,CAACP,IAAH,CAAQE,KAAR,CAAc,CAAd,CAAf,CAAJ,EAAsC;AAClCO,UAAAA,IAAI;AACP,SAFD,MAGK;AACDA,UAAAA,IAAI,CAAC;AAAEK,YAAAA,IAAI,EAAE;AAAR,WAAD,CAAJ;AACH;AACJ,OAPD,MAQK;AACDL,QAAAA,IAAI;AACP;AACJ;AACJ,GAnBD,MAoBK;AACDA,IAAAA,IAAI;AACP;AACJ,CAzBD;AA2BA,eAAeJ,MAAf","sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\n//import authenticate from \"../auth/authenticate\";\n\nimport store from 'plugin-vuejs-keycloak'\nimport security from 'plugin-vuejs-keycloak/security'\n\n\nVue.use(VueRouter)\n\nfunction load (component) {\n    // '@' is aliased to src/components\n    //return () => import(`@/${component}.vue`)\n    return () => import(`${component}`)\n}\n\nconst routes = [\n    {\n        path: \"/\",\n        component: load('../views/app'),  //() => import(\"../views/app\"), //webpackChunkName app\n        meta: { requiresAuth: true, roles: ['user'] },\n        redirect: \"/app/box/open\",\n        children: [\n            {\n                path: \"/app/box\",\n                component: load('../views/app/caisses'), //() => import(\"../views/app/caisses\"),\n                children: [\n                    {\n                        path: \"open\",\n                        component: load('../views/app/caisses/box') // () => import(\"../views/app/caisses/box\")\n                    }]\n            }\n            ]\n\n    },\n    {\n        path: \"/auth\",\n        component: () => import(\"../views/app/sessions\"),\n        //redirect: \"/app/sessions/signIn\",\n        children: [\n            {\n                path: \"signIn\",\n                component: () => import(\"../views/app/sessions/signIn\")\n            },\n\n        ]\n    },\n]\n\nconst router = new VueRouter({\n  routes\n})\n\n\nrouter.beforeEach((to, from, next) => {\n\n    if (to.meta.requiresAuth) {\n        \n        const auth = store.state.security.auth\n        if (!auth.authenticated) {\n            security.init(next, to.meta.roles)\n        }\n        else {\n            if (to.meta.roles) {\n                if (security.roles(to.meta.roles[0])) {\n                    next()\n                }\n                else {\n                    next({ name: 'unauthorized' })\n                }\n            }\n            else {\n                next()\n            }\n        }\n    }\n    else {\n        next()\n    }\n})\n\nexport default router\n"]}]}