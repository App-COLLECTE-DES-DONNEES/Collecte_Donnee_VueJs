{"remainingRequest":"C:\\wamp64\\www\\toolsmctc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\wamp64\\www\\toolsmctc\\src\\components\\webcam.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\wamp64\\www\\toolsmctc\\src\\components\\webcam.vue","mtime":1614085630461},{"path":"C:\\wamp64\\www\\toolsmctc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\toolsmctc\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\toolsmctc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\toolsmctc\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJWdWVXZWJDYW0iLAogICAgcHJvcHM6IHsKICAgICAgICB3aWR0aDogewogICAgICAgICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLAogICAgICAgICAgICBkZWZhdWx0OiAiMTAwJSIKICAgICAgICB9LAogICAgICAgIGhlaWdodDogewogICAgICAgICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLAogICAgICAgICAgICBkZWZhdWx0OiA1MDAKICAgICAgICB9LAogICAgICAgIGF1dG9wbGF5OiB7CiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgICAgICAgIGRlZmF1bHQ6IHRydWUKICAgICAgICB9LAogICAgICAgIHNjcmVlbnNob3RGb3JtYXQ6IHsKICAgICAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgICAgICBkZWZhdWx0OiAiaW1hZ2UvanBlZyIKICAgICAgICB9LAogICAgICAgIHNlbGVjdEZpcnN0RGV2aWNlOiB7CiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgICAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICAgICAgfSwKICAgICAgICBkZXZpY2VJZDogewogICAgICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwKICAgICAgICB9LAogICAgICAgIHBsYXlzaW5saW5lOiB7CiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgICAgICAgIGRlZmF1bHQ6IHRydWUKICAgICAgICB9LAogICAgICAgIHJlc29sdXRpb246IHsKICAgICAgICAgICAgdHlwZTogT2JqZWN0LAogICAgICAgICAgICBkZWZhdWx0OiBudWxsLAogICAgICAgICAgICB2YWxpZGF0b3I6IHZhbHVlID0+IHsKICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5oZWlnaHQgJiYgdmFsdWUud2lkdGg7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzb3VyY2U6IG51bGwsCiAgICAgICAgICAgIGNhbnZhczogbnVsbCwKICAgICAgICAgICAgY2FtZXJhc0xpc3RFbWl0dGVkOiBmYWxzZSwKICAgICAgICAgICAgY2FtZXJhczogW10KICAgICAgICB9OwogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgICAgZGV2aWNlSWQ6IGZ1bmN0aW9uKGlkKSB7CiAgICAgICAgICAgIHRoaXMuY2hhbmdlQ2FtZXJhKGlkKTsKICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICB0aGlzLnNldHVwTWVkaWEoKTsKICAgIH0sCiAgICBiZWZvcmVEZXN0cm95KCkgewogICAgICAgIHRoaXMuc3RvcCgpOwogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICAvKioKICAgICAgICAgKiBnZXQgdXNlciBtZWRpYQogICAgICAgICAqLwogICAgICAgIGxlZ2FjeUdldFVzZXJNZWRpYVN1cHBvcnQoKSB7CiAgICAgICAgICAgIHJldHVybiBjb25zdHJhaW50cyA9PiB7CiAgICAgICAgICAgICAgICAvLyBGaXJzdCBnZXQgYWhvbGQgb2YgdGhlIGxlZ2FjeSBnZXRVc2VyTWVkaWEsIGlmIHByZXNlbnQKICAgICAgICAgICAgICAgIGxldCBnZXRVc2VyTWVkaWEgPQogICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgfHwKICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhIHx8CiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSB8fAogICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5tc0dldFVzZXJNZWRpYSB8fAogICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5vR2V0VXNlck1lZGlhOwogICAgICAgICAgICAgICAgLy8gU29tZSBicm93c2VycyBqdXN0IGRvbid0IGltcGxlbWVudCBpdCAtIHJldHVybiBhIHJlamVjdGVkIHByb21pc2Ugd2l0aCBhbiBlcnJvcgogICAgICAgICAgICAgICAgLy8gdG8ga2VlcCBhIGNvbnNpc3RlbnQgaW50ZXJmYWNlCiAgICAgICAgICAgICAgICBpZiAoIWdldFVzZXJNZWRpYSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgKICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEVycm9yKCJnZXRVc2VyTWVkaWEgaXMgbm90IGltcGxlbWVudGVkIGluIHRoaXMgYnJvd3NlciIpCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgd3JhcCB0aGUgY2FsbCB0byB0aGUgb2xkIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgd2l0aCBhIFByb21pc2UKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgICAgICAgICBnZXRVc2VyTWVkaWEuY2FsbChuYXZpZ2F0b3IsIGNvbnN0cmFpbnRzLCByZXNvbHZlLCByZWplY3QpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH07CiAgICAgICAgfSwKICAgICAgICAvKioKICAgICAgICAgKiBzZXR1cCBtZWRpYQogICAgICAgICAqLwogICAgICAgIHNldHVwTWVkaWEoKSB7CiAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMgPSB7fTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPSB0aGlzLmxlZ2FjeUdldFVzZXJNZWRpYVN1cHBvcnQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnRlc3RNZWRpYUFjY2VzcygpOwogICAgICAgIH0sCiAgICAgICAgLyoqCiAgICAgICAgICogbG9hZCBhdmFpbGFibGUgY2FtZXJhcwogICAgICAgICAqLwogICAgICAgIGxvYWRDYW1lcmFzKCkgewogICAgICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzCiAgICAgICAgICAgICAgICAuZW51bWVyYXRlRGV2aWNlcygpCiAgICAgICAgICAgICAgICAudGhlbihkZXZpY2VJbmZvcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGRldmljZUluZm9zLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkZXZpY2VJbmZvID0gZGV2aWNlSW5mb3NbaV07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXZpY2VJbmZvLmtpbmQgPT09ICJ2aWRlb2lucHV0IikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW1lcmFzLnB1c2goZGV2aWNlSW5mbyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jYW1lcmFzTGlzdEVtaXR0ZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0Rmlyc3REZXZpY2UgJiYgdGhpcy5jYW1lcmFzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGV2aWNlSWQgPSB0aGlzLmNhbWVyYXNbMF0uZGV2aWNlSWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgiY2FtZXJhcyIsIHRoaXMuY2FtZXJhcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhc0xpc3RFbWl0dGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHRoaXMuJGVtaXQoIm5vdHN1cHBvcnRlZCIsIGVycm9yKSk7CiAgICAgICAgfSwKICAgICAgICAvKioKICAgICAgICAgKiBjaGFuZ2UgdG8gYSBkaWZmZXJlbnQgY2FtZXJhIHN0cmVhbSwgbGlrZSBmcm9udCBhbmQgYmFjayBjYW1lcmEgb24gcGhvbmVzCiAgICAgICAgICovCiAgICAgICAgY2hhbmdlQ2FtZXJhKGRldmljZUlkKSB7CiAgICAgICAgICAgIHRoaXMuc3RvcCgpOwogICAgICAgICAgICB0aGlzLiRlbWl0KCJjYW1lcmEtY2hhbmdlIiwgZGV2aWNlSWQpOwogICAgICAgICAgICB0aGlzLmxvYWRDYW1lcmEoZGV2aWNlSWQpOwogICAgICAgIH0sCiAgICAgICAgLyoqCiAgICAgICAgICogbG9hZCB0aGUgc3RyZWFtIHRvIHRoZQogICAgICAgICAqLwogICAgICAgIGxvYWRTcmNTdHJlYW0oc3RyZWFtKSB7CiAgICAgICAgICAgIGlmICgic3JjT2JqZWN0IiBpbiB0aGlzLiRyZWZzLnZpZGVvKSB7CiAgICAgICAgICAgICAgICAvLyBuZXcgYnJvd3NlcnMgYXBpCiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLnZpZGVvLnNyY09iamVjdCA9IHN0cmVhbTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIG9sZCBicm9zd2VycwogICAgICAgICAgICAgICAgdGhpcy5zb3VyY2UgPSB3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5zcmNPYmplY3Qoc3RyZWFtKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBFbWl0IHZpZGVvIHN0YXJ0L2xpdmUgZXZlbnQKICAgICAgICAgICAgdGhpcy4kcmVmcy52aWRlby5vbmxvYWRlZG1ldGFkYXRhID0gKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgidmlkZW8tbGl2ZSIsIHN0cmVhbSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuJGVtaXQoInN0YXJ0ZWQiLCBzdHJlYW0pOwogICAgICAgIH0sCiAgICAgICAgLyoqCiAgICAgICAgICogc3RvcCB0aGUgc2VsZWN0ZWQgc3RyZWFtZWQgdmlkZW8gdG8gY2hhbmdlIGNhbWVyYQogICAgICAgICAqLwogICAgICAgIHN0b3BTdHJlYW1lZFZpZGVvKHZpZGVvRWxlbSkgewogICAgICAgICAgICBsZXQgc3RyZWFtID0gdmlkZW9FbGVtLnNyY09iamVjdDsKICAgICAgICAgICAgbGV0IHRyYWNrcyA9IHN0cmVhbS5nZXRUcmFja3MoKTsKICAgICAgICAgICAgdHJhY2tzLmZvckVhY2godHJhY2sgPT4gewogICAgICAgICAgICAgICAgLy8gc3RvcHMgdGhlIHZpZGVvIHRyYWNrCiAgICAgICAgICAgICAgICB0cmFjay5zdG9wKCk7CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCJzdG9wcGVkIiwgc3RyZWFtKTsKICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMudmlkZW8uc3JjT2JqZWN0ID0gbnVsbDsKICAgICAgICAgICAgICAgIHRoaXMuc291cmNlID0gbnVsbDsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICAvLyBzdG9wIHRoZSB2aWRlbwogICAgICAgIHN0b3AoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLiRyZWZzLnZpZGVvICE9PSBudWxsICYmIHRoaXMuJHJlZnMudmlkZW8uc3JjT2JqZWN0KSB7CiAgICAgICAgICAgICAgICB0aGlzLnN0b3BTdHJlYW1lZFZpZGVvKHRoaXMuJHJlZnMudmlkZW8pOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAvLyBzdGFydCB0aGUgdmlkZW8KICAgICAgICBzdGFydCgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuZGV2aWNlSWQpIHsKICAgICAgICAgICAgICAgIHRoaXMubG9hZENhbWVyYSh0aGlzLmRldmljZUlkKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgLy8gcGF1c2UgdGhlIHZpZGVvCiAgICAgICAgcGF1c2UoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLiRyZWZzLnZpZGVvICE9PSBudWxsICYmIHRoaXMuJHJlZnMudmlkZW8uc3JjT2JqZWN0KSB7CiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLnZpZGVvLnBhdXNlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIC8vIHJlc3VtZSB0aGUgdmlkZW8KICAgICAgICByZXN1bWUoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLiRyZWZzLnZpZGVvICE9PSBudWxsICYmIHRoaXMuJHJlZnMudmlkZW8uc3JjT2JqZWN0KSB7CiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLnZpZGVvLnBsYXkoKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgLyoqCiAgICAgICAgICogdGVzdCBhY2Nlc3MKICAgICAgICAgKi8KICAgICAgICB0ZXN0TWVkaWFBY2Nlc3MoKSB7CiAgICAgICAgICAgIGxldCBjb25zdHJhaW50cyA9IHsgdmlkZW86IHRydWUgfTsKICAgICAgICAgICAgaWYgKHRoaXMucmVzb2x1dGlvbikgewogICAgICAgICAgICAgICAgY29uc3RyYWludHMudmlkZW8gPSB7fTsKICAgICAgICAgICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvLmhlaWdodCA9IHRoaXMucmVzb2x1dGlvbi5oZWlnaHQ7CiAgICAgICAgICAgICAgICBjb25zdHJhaW50cy52aWRlby53aWR0aCA9IHRoaXMucmVzb2x1dGlvbi53aWR0aDsKICAgICAgICAgICAgfQogICAgICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzCiAgICAgICAgICAgICAgICAuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKQogICAgICAgICAgICAgICAgLnRoZW4oc3RyZWFtID0+IHsKICAgICAgICAgICAgICAgICAgICAvL01ha2Ugc3VyZSB0byBzdG9wIHRoaXMgTWVkaWFTdHJlYW0KICAgICAgICAgICAgICAgICAgICBsZXQgdHJhY2tzID0gc3RyZWFtLmdldFRyYWNrcygpOwogICAgICAgICAgICAgICAgICAgIHRyYWNrcy5mb3JFYWNoKHRyYWNrID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2suc3RvcCgpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZENhbWVyYXMoKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gdGhpcy4kZW1pdCgiZXJyb3IiLCBlcnJvcikpOwogICAgICAgIH0sCiAgICAgICAgLyoqCiAgICAgICAgICogbG9hZCB0aGUgY2FtZXJhIHBhc3NlZCBhcyBpbmRleCEKICAgICAgICAgKi8KICAgICAgICBsb2FkQ2FtZXJhKGRldmljZSkgewogICAgICAgICAgICBsZXQgY29uc3RyYWludHMgPSB7IHZpZGVvOiB7IGRldmljZUlkOiB7IGV4YWN0OiBkZXZpY2UgfSB9IH07CiAgICAgICAgICAgIGlmICh0aGlzLnJlc29sdXRpb24pIHsKICAgICAgICAgICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvLmhlaWdodCA9IHRoaXMucmVzb2x1dGlvbi5oZWlnaHQ7CiAgICAgICAgICAgICAgICBjb25zdHJhaW50cy52aWRlby53aWR0aCA9IHRoaXMucmVzb2x1dGlvbi53aWR0aDsKICAgICAgICAgICAgfQogICAgICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzCiAgICAgICAgICAgICAgICAuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKQogICAgICAgICAgICAgICAgLnRoZW4oc3RyZWFtID0+IHRoaXMubG9hZFNyY1N0cmVhbShzdHJlYW0pKQogICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHRoaXMuJGVtaXQoImVycm9yIiwgZXJyb3IpKTsKICAgICAgICB9LAogICAgICAgIC8qKgogICAgICAgICAqIGNhcHR1cmUgc2NyZWVuc2hvdAogICAgICAgICAqLwogICAgICAgIGNhcHR1cmUoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENhbnZhcygpLnRvRGF0YVVSTCh0aGlzLnNjcmVlbnNob3RGb3JtYXQpOwogICAgICAgIH0sCiAgICAgICAgLyoqCiAgICAgICAgICogZ2V0IGNhbnZhcwogICAgICAgICAqLwogICAgICAgIGdldENhbnZhcygpIHsKICAgICAgICAgICAgbGV0IHZpZGVvID0gdGhpcy4kcmVmcy52aWRlbzsKICAgICAgICAgICAgaWYgKCF0aGlzLmN0eCkgewogICAgICAgICAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOwogICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IHZpZGVvLnZpZGVvSGVpZ2h0OwogICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gdmlkZW8udmlkZW9XaWR0aDsKICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzID0gY2FudmFzOwogICAgICAgICAgICAgICAgdGhpcy5jdHggPSBjYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCB7IGN0eCwgY2FudmFzIH0gPSB0aGlzOwogICAgICAgICAgICBjdHguZHJhd0ltYWdlKHZpZGVvLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgICAgICByZXR1cm4gY2FudmFzOwogICAgICAgIH0KICAgIH0KfTsK"},{"version":3,"sources":["webcam.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"webcam.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <video\r\n            ref=\"video\"\r\n            :width=\"width\"\r\n            :height=\"height\"\r\n            :src=\"source\"\r\n            :autoplay=\"autoplay\"\r\n            :playsinline=\"playsinline\"></video>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"VueWebCam\",\r\n        props: {\r\n            width: {\r\n                type: [Number, String],\r\n                default: \"100%\"\r\n            },\r\n            height: {\r\n                type: [Number, String],\r\n                default: 500\r\n            },\r\n            autoplay: {\r\n                type: Boolean,\r\n                default: true\r\n            },\r\n            screenshotFormat: {\r\n                type: String,\r\n                default: \"image/jpeg\"\r\n            },\r\n            selectFirstDevice: {\r\n                type: Boolean,\r\n                default: false\r\n            },\r\n            deviceId: {\r\n                type: String,\r\n                default: null\r\n            },\r\n            playsinline: {\r\n                type: Boolean,\r\n                default: true\r\n            },\r\n            resolution: {\r\n                type: Object,\r\n                default: null,\r\n                validator: value => {\r\n                    return value.height && value.width;\r\n                }\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                source: null,\r\n                canvas: null,\r\n                camerasListEmitted: false,\r\n                cameras: []\r\n            };\r\n        },\r\n        watch: {\r\n            deviceId: function(id) {\r\n                this.changeCamera(id);\r\n            }\r\n        },\r\n        mounted() {\r\n            this.setupMedia();\r\n        },\r\n        beforeDestroy() {\r\n            this.stop();\r\n        },\r\n        methods: {\r\n            /**\r\n             * get user media\r\n             */\r\n            legacyGetUserMediaSupport() {\r\n                return constraints => {\r\n                    // First get ahold of the legacy getUserMedia, if present\r\n                    let getUserMedia =\r\n                        navigator.getUserMedia ||\r\n                        navigator.webkitGetUserMedia ||\r\n                        navigator.mozGetUserMedia ||\r\n                        navigator.msGetUserMedia ||\r\n                        navigator.oGetUserMedia;\r\n                    // Some browsers just don't implement it - return a rejected promise with an error\r\n                    // to keep a consistent interface\r\n                    if (!getUserMedia) {\r\n                        return Promise.reject(\r\n                            new Error(\"getUserMedia is not implemented in this browser\")\r\n                        );\r\n                    }\r\n                    // Otherwise, wrap the call to the old navigator.getUserMedia with a Promise\r\n                    return new Promise(function(resolve, reject) {\r\n                        getUserMedia.call(navigator, constraints, resolve, reject);\r\n                    });\r\n                };\r\n            },\r\n            /**\r\n             * setup media\r\n             */\r\n            setupMedia() {\r\n                if (navigator.mediaDevices === undefined) {\r\n                    navigator.mediaDevices = {};\r\n                }\r\n                if (navigator.mediaDevices.getUserMedia === undefined) {\r\n                    navigator.mediaDevices.getUserMedia = this.legacyGetUserMediaSupport();\r\n                }\r\n                this.testMediaAccess();\r\n            },\r\n            /**\r\n             * load available cameras\r\n             */\r\n            loadCameras() {\r\n                navigator.mediaDevices\r\n                    .enumerateDevices()\r\n                    .then(deviceInfos => {\r\n                        for (let i = 0; i !== deviceInfos.length; ++i) {\r\n                            let deviceInfo = deviceInfos[i];\r\n                            if (deviceInfo.kind === \"videoinput\") {\r\n                                this.cameras.push(deviceInfo);\r\n                            }\r\n                        }\r\n                    })\r\n                    .then(() => {\r\n                        if (!this.camerasListEmitted) {\r\n                            if (this.selectFirstDevice && this.cameras.length > 0) {\r\n                                this.deviceId = this.cameras[0].deviceId;\r\n                            }\r\n                            this.$emit(\"cameras\", this.cameras);\r\n                            this.camerasListEmitted = true;\r\n                        }\r\n                    })\r\n                    .catch(error => this.$emit(\"notsupported\", error));\r\n            },\r\n            /**\r\n             * change to a different camera stream, like front and back camera on phones\r\n             */\r\n            changeCamera(deviceId) {\r\n                this.stop();\r\n                this.$emit(\"camera-change\", deviceId);\r\n                this.loadCamera(deviceId);\r\n            },\r\n            /**\r\n             * load the stream to the\r\n             */\r\n            loadSrcStream(stream) {\r\n                if (\"srcObject\" in this.$refs.video) {\r\n                    // new browsers api\r\n                    this.$refs.video.srcObject = stream;\r\n                } else {\r\n                    // old broswers\r\n                    this.source = window.HTMLMediaElement.srcObject(stream);\r\n                }\r\n                // Emit video start/live event\r\n                this.$refs.video.onloadedmetadata = () => {\r\n                    this.$emit(\"video-live\", stream);\r\n                };\r\n                this.$emit(\"started\", stream);\r\n            },\r\n            /**\r\n             * stop the selected streamed video to change camera\r\n             */\r\n            stopStreamedVideo(videoElem) {\r\n                let stream = videoElem.srcObject;\r\n                let tracks = stream.getTracks();\r\n                tracks.forEach(track => {\r\n                    // stops the video track\r\n                    track.stop();\r\n                    this.$emit(\"stopped\", stream);\r\n                    this.$refs.video.srcObject = null;\r\n                    this.source = null;\r\n                });\r\n            },\r\n            // stop the video\r\n            stop() {\r\n                if (this.$refs.video !== null && this.$refs.video.srcObject) {\r\n                    this.stopStreamedVideo(this.$refs.video);\r\n                }\r\n            },\r\n            // start the video\r\n            start() {\r\n                if (this.deviceId) {\r\n                    this.loadCamera(this.deviceId);\r\n                }\r\n            },\r\n            // pause the video\r\n            pause() {\r\n                if (this.$refs.video !== null && this.$refs.video.srcObject) {\r\n                    this.$refs.video.pause();\r\n                }\r\n            },\r\n            // resume the video\r\n            resume() {\r\n                if (this.$refs.video !== null && this.$refs.video.srcObject) {\r\n                    this.$refs.video.play();\r\n                }\r\n            },\r\n            /**\r\n             * test access\r\n             */\r\n            testMediaAccess() {\r\n                let constraints = { video: true };\r\n                if (this.resolution) {\r\n                    constraints.video = {};\r\n                    constraints.video.height = this.resolution.height;\r\n                    constraints.video.width = this.resolution.width;\r\n                }\r\n                navigator.mediaDevices\r\n                    .getUserMedia(constraints)\r\n                    .then(stream => {\r\n                        //Make sure to stop this MediaStream\r\n                        let tracks = stream.getTracks();\r\n                        tracks.forEach(track => {\r\n                            track.stop();\r\n                        });\r\n                        this.loadCameras();\r\n                    })\r\n                    .catch(error => this.$emit(\"error\", error));\r\n            },\r\n            /**\r\n             * load the camera passed as index!\r\n             */\r\n            loadCamera(device) {\r\n                let constraints = { video: { deviceId: { exact: device } } };\r\n                if (this.resolution) {\r\n                    constraints.video.height = this.resolution.height;\r\n                    constraints.video.width = this.resolution.width;\r\n                }\r\n                navigator.mediaDevices\r\n                    .getUserMedia(constraints)\r\n                    .then(stream => this.loadSrcStream(stream))\r\n                    .catch(error => this.$emit(\"error\", error));\r\n            },\r\n            /**\r\n             * capture screenshot\r\n             */\r\n            capture() {\r\n                return this.getCanvas().toDataURL(this.screenshotFormat);\r\n            },\r\n            /**\r\n             * get canvas\r\n             */\r\n            getCanvas() {\r\n                let video = this.$refs.video;\r\n                if (!this.ctx) {\r\n                    let canvas = document.createElement(\"canvas\");\r\n                    canvas.height = video.videoHeight;\r\n                    canvas.width = video.videoWidth;\r\n                    this.canvas = canvas;\r\n                    this.ctx = canvas.getContext(\"2d\");\r\n                }\r\n                const { ctx, canvas } = this;\r\n                ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n                return canvas;\r\n            }\r\n        }\r\n    };\r\n</script>"]}]}