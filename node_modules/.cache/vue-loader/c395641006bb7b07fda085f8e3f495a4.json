{"remainingRequest":"C:\\wamp64\\www\\toolsmctc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\wamp64\\www\\toolsmctc\\src\\views\\app\\caisses\\box.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\wamp64\\www\\toolsmctc\\src\\views\\app\\caisses\\box.vue","mtime":1606324237312},{"path":"C:\\wamp64\\www\\toolsmctc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\toolsmctc\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\toolsmctc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\toolsmctc\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgogICAgaW1wb3J0IEF1dG9Db21wbGV0ZSBmcm9tICIuL0F1dG9jb21wbGV0ZSIKICAgIGltcG9ydCBDYXRwcm9kdWN0ZXMgZnJvbSAiLi9jYXRwcm9kdWN0ZXMiCiAgICBpbXBvcnQgc2FsZXNyZWNlaXB0IGZyb20gIi4vc2FsZXNyZWNlaXB0IgogICAgaW1wb3J0IGJpbGFuIGZyb20gIi4uL2NvbXBvbmVudHMvYmlsYW4iCiAgICBpbXBvcnQgcmVnaXN0ZXJQYXJ0bmVycyBmcm9tICIuLi9jb21wb25lbnRzL3JlZ2lzdGVycGFydG5lcnMiCgogICAgaW1wb3J0IGNvbnN0YW50cyBmcm9tICcuLi8uLi8uLi9wbHVnaW5zL2NvbnN0YW50cycKICAgIGltcG9ydCB7IG1hcEdldHRlcnMsbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiOwogICAgZXhwb3J0IGRlZmF1bHQgewoKICAgICAgICBtZXRhSW5mbzogewogICAgICAgICAgICB0aXRsZTogIkNhaXNzZSIKICAgICAgICB9LAoKICAgICAgICBkYXRhKCkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgY2hhc3NpOiJjaGFzc2lzIiwKICAgICAgICAgICAgICAgIHNlbGVjdGhvbGR2YXI6ZmFsc2UsCiAgICAgICAgICAgICAgICByZXNvdXJjZXNfdXJsczpjb25zdGFudHMucmVzb3VyY2VfdXJscywKICAgICAgICAgICAgICAgIGRhdGU6IG5ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKSwKCiAgICAgICAgICAgICAgICBjYXQ6W10sCiAgICAgICAgICAgICAgICBib3hvcGVuOmZhbHNlLAogICAgICAgICAgICAgICAgY29udGFjdHNJZDo1LAogICAgICAgICAgICAgICAgYm94OmZhbHNlLAogICAgICAgICAgICAgICAgbW9kYWx0YXg6ZmFsc2UsCiAgICAgICAgICAgICAgICBlbmNhaXNzZW1lbnRzOnt9LAogICAgICAgICAgICAgICAgZm9ybTogewogICAgICAgICAgICAgICAgICAgIG51bV90aWNrZXQ6JzEyMycsCiAgICAgICAgICAgICAgICAgICAgbW9udGFudF9lbmNhaXNzZTowLAogICAgICAgICAgICAgICAgICAgIFJlZmVyZW5jZToiIiwKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiIiwKICAgICAgICAgICAgICAgICAgICBlbWFpbDogIiIsCiAgICAgICAgICAgICAgICAgICAgZW1haWxzOiAiIiwKICAgICAgICAgICAgICAgICAgICBmTmFtZTogIiIsCiAgICAgICAgICAgICAgICAgICAgbE5hbWU6ICIiLAogICAgICAgICAgICAgICAgICAgIHBob25lOiAiIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG91dmVydHVyZUFtb3VudDowLAogICAgICAgICAgICAgICAgcmVzdWx0c2VhcmNoOltdLAogICAgICAgICAgICAgICAgc2VsZWN0aW9uOltdLAogICAgICAgICAgICAgICAgTW9udGFudF90b3RhbDowLAogICAgICAgICAgICAgICAgaW52b2ljZV90YXg6IDAsCiAgICAgICAgICAgICAgICBpbnZvaWNlX3RvdGFsOiAwLAogICAgICAgICAgICAgICAgc2hvd01vZGFsOnRydWUsCiAgICAgICAgICAgICAgICBjbGllbnRzOltdLAogICAgICAgICAgICAgICAgcHJvZHVjdHM6W10sCiAgICAgICAgICAgICAgICBzaG93OmZhbHNlLAogICAgICAgICAgICAgICAgY3VzdG9tZXJGb3JtOgogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgY25pOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgbm9tOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgcHJlbm9tOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICBiaXJ0aGRheToiIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3BvcnQ6IiIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pX2RlX2NvbmR1aXJlOiIiLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgc2VhcmNoOmZhbHNlLAogICAgICAgICAgICAgICAgY29udGFjdDp7CiAgICAgICAgICAgICAgICAgICAgTmFtZToiIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHZlbmRldXI6ewogICAgICAgICAgICAgICAgICAgIE5hbWU6IiIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBsaXN0cHJvZHVjdHM6WwogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIGxpc3R0YXg6WwogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIHRheDpbXSwKICAgICAgICAgICAgICAgIHN0YXR1dGU6dHJ1ZSwKICAgICAgICAgICAgICAgIHNob3dfcmVmZXI6ZmFsc2UsCiAgICAgICAgICAgICAgICBzZWxlY3Rob2xkOnt9LAogICAgICAgICAgICAgICAgdGF4ZXM6W10sCiAgICAgICAgICAgICAgICBzZWxlY3RlZDpbXSwKICAgICAgICAgICAgICAgIG9wdGlvbnNLZXk6Im5vbSIsCiAgICAgICAgICAgICAgICBvcHRpb25zS2V5MToidGVsZXBob25lIiwKICAgICAgICAgICAgICAgIGZpZWxkczogWyJEw6lzaWduYXRpb24iLCAiUmVmZXJlbmNlIiwgIlByaXgiLCJUYXhlcyIsIkFjdGlvbnMiXSwKICAgICAgICAgICAgICAgIGZpZWxkOiBbIkTDqXNpZ25hdGlvbiIsICJQcml4IiwiUHJpeCJdLAogICAgICAgICAgICAgICAgc3RhdHVzcmVxdWV0ZTpmYWxzZSwKICAgICAgICAgICAgICAgIGhvbGRsaXN0OltdLAogICAgICAgICAgICAgICAgZW5jb21wdGU6ZmFsc2UKCiAgICAgICAgICAgIH07CiAgICAgICAgfSwKCiAgICAgICAgY29tcG9uZW50czp7c2FsZXNyZWNlaXB0LCBBdXRvQ29tcGxldGUsQ2F0cHJvZHVjdGVzLHJlZ2lzdGVyUGFydG5lcnMsYmlsYW59LAogICAgICAgIGNvbXB1dGVkOiB7CgogICAgICAgICAgICAuLi5tYXBHZXR0ZXJzKFsiZ2V0U3RhdHVzSG9sZCIsImdldFByb2R1Y3RzIiwiZ2V0Q3VzdG9tZXJzIiwiZ2V0Q3VzdG9tZXIiLCJnZXRTdGF0dXMiLCJnZXRDYXRQcm9kdWN0cyIsIkdldEJveCIsIkdldEVuY2Fpc3NlbWVudHMiLCJnZXRPYmpldEhvbGQiLAogICAgICAgICAgICAgICAgImdldEhvbGRMaXN0IiwiZ2V0U2VsZWN0SG9sZCIsIkdldFByb2R1Y3RzSG9sZCIsIk1vdmVQcm9kdWN0c0hvbGQiLCJHZXRCb3hPcGVuIiwiR2V0Q2Fpc3NlT3BlbiIsIkdldFJlbW92ZUFsbFByb2R1Y3RzIl0pLAoKICAgICAgICB9LAoKICAgICAgICBtZXRob2RzOiB7CiAgICAgICAgICAgIC4uLm1hcEFjdGlvbnMoWyJGZXRjaENhdFByb2R1Y3RzIiwiRmV0Y2hTYWxlc1Byb2R1Y3RzIiwicmVnaXN0ZXJDdXN0b20iLCJGZXRjaFByb2R1Y3RzIiwKICAgICAgICAgICAgICAgICJGZXRjaFNlbGxlcnMiLCJGZXRjaENvbnRhY3RzIiwiRmV0Y2hDdXN0b21lcnMiLCJpbkFjY291bnRzIgogICAgICAgICAgICAgICAgLCJpbkJveHMiLCJhZGRob2xkIiwiY2xvc2Vib3giLCJvcGVuYm94cyIsInJlbW92ZWhvbGQiLCJyZW1vdmVob2xkIiwiY2hlY2tzZXNzaW9uIiwiaG9sZGxpc3RlIiwiU2VsZWN0SG9sZHMiLCJnZXRQcm9kdWN0c0hvbGQiLCJhZGRQcm9kdWN0c0hvbGQiLCJyZW1vdmVQcm9kdWN0c0hvbGQiLCJzZWFyY2hSZWZlcmVuY2UiLCJyZW1vdmVBbGxQcm9kdWN0c0hvbGQiXSksCgogICAgICAgICAgICBjbG9zZWNhaXNzZSgpewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Nsb3NlJykKICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlaG9sZCh7bnVtYmVyOnRoaXMuc2VsZWN0aG9sZC5udW1iZXIsY2xvc2U6dHJ1ZX0pCiAgICAgICAgICAgICAgICAvL3RoaXMucmVtb3ZlQWxsUHJvZHVjdHNIb2xkKHtudW1iZXI6dGhpcy5zZWxlY3Rob2xkLm51bWJlcixzZXNzaW9uQ2Fpc3NlSWQ6bG9jYWxTdG9yYWdlLmdldEl0ZW0oInNlc3Npb25jYWlzc2UiKX0pCgogICAgICAgICAgICB9LAogICAgICAgICAgICByZWdpc3RlckN1c3RvbWVyKHZhcmlhbnQgPSBudWxsKSB7CgogICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlckN1c3RvbSh2YXJpYW50KQoKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLypwcmludEZhY3R1cmUoKSB7CiAgICAgICAgICAgICAgICB2YXIgcGRmID0gbmV3IGpzUERGKCk7CiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmYWN0dXJlJyk7CiAgICAgICAgICAgICAgICB2YXIgd2lkdGg9IGVsZW1lbnQuc3R5bGUud2lkdGg7CiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gZWxlbWVudC5zdHlsZS5oZWlnaHQ7CiAgICAgICAgICAgICAgICBodG1sMmNhbnZhcyhlbGVtZW50KS50aGVuKGNhbnZhcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGltYWdlID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7CiAgICAgICAgICAgICAgICAgICAgcGRmLmFkZEltYWdlKGltYWdlLCAnSlBFRycsIDE1LCA0MCwgd2lkdGgsIGhlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgcGRmLnNhdmUoJ2ZhY3R1cmUnICsgbW9tZW50KHRoaXMuZmFjdHVyZS5kYXRlX2RlYnV0KS5mb3JtYXQoJ0xMJykgKyAnXycgKyBtb21lbnQodGhpcy5mYWN0dXJlLmRhdGVfZmluKS5mb3JtYXQoJ0xMJykgKyAnLnBkZic7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwqLwogICAgICAgICAgICAvL0F1Y3VuIFByb2R1aXQgU2VsZWN0aW9ubmUKICAgICAgICAgICAgaW5BY2NvdW50KCkgewoKCiAgICAgICAgICAgICAgICB0aGlzLiRidk1vZGFsLmhpZGUoJ2NvbmZpcm1pbkFjY291bnQnKQogICAgICAgICAgICAgICAgdGhpcy5zaG93PSF0aGlzLnNob3cKICAgICAgICAgICAgICAgIGlmKHRoaXMuJHN0b3JlLnN0YXRlLmNhdGVnb3JpZXByb2R1Y3RzLmNvbnRhY3RzSWQ9PT0wKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1ha2VUb2FzdCh0aGlzLiR0KCdzZWxlY3RfY29udGFjdCcpLCdlcnJvcicpCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYnZNb2RhbC5oaWRlKCdjb25maXJtaW5BY2NvdW50JykKICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3c9IXRoaXMuc2hvdwogICAgICAgICAgICAgICAgICAgIHJldHVybiA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZih0aGlzLmxpc3Rwcm9kdWN0cy5sZW5ndGg9PT0wKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1ha2VUb2FzdCh0aGlzLiR0KCdub19wcm9kdWN0JyksJ2Vycm9yJykKICAgICAgICAgICAgICAgICAgICB0aGlzLiRidk1vZGFsLmhpZGUoJ2NvbmZpcm1pbkFjY291bnQnKQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvdz0hdGhpcy5zaG93CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKHRoaXMuZm9ybS5tb250YW50X2VuY2Fpc3NlPjApewogICAgICAgICAgICAgICAgICAgIHRoaXMubWFrZVRvYXN0KHRoaXMuJHQoJ21vbnRhbnRfZW5jYWlzc2VfbnVsbCcpLCdlcnJvcicpCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYnZNb2RhbC5oaWRlKCdjb25maXJtaW5BY2NvdW50JykKICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3c9IXRoaXMuc2hvdwogICAgICAgICAgICAgICAgICAgIHJldHVybiA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmVuY29tcHRlID0gdHJ1ZQoKICAgICAgICAgICAgICAgIHRoaXMuaW5BY2NvdW50cygKCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWl0VnVlOnRoaXMubGlzdHByb2R1Y3RzLAogICAgICAgICAgICAgICAgICAgICAgICBtb250YW50VG90YWw6dGhpcy5pbnZvaWNlX3RvdGFsLAogICAgICAgICAgICAgICAgICAgICAgICBtb250YW50SFQ6dGhpcy5Nb250YW50X3RvdGFsLAogICAgICAgICAgICAgICAgICAgICAgICBtb250YW50RW5jYWlzc2U6dGhpcy5mb3JtLm1vbnRhbnRfZW5jYWlzc2UsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25DYWlzc2VJZDpsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic2Vzc2lvbmNhaXNzZSIpLAogICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRJZDp0aGlzLiRzdG9yZS5zdGF0ZS5jbGllbnRzSWQsCiAgICAgICAgICAgICAgICAgICAgICAgIHZlbmRldXJJZDp0aGlzLiRzdG9yZS5zdGF0ZS52ZW5kZXVyc0lkLAogICAgICAgICAgICAgICAgICAgICAgICBjb250YWN0SWQ6dGhpcy4kc3RvcmUuc3RhdGUuY29udGFjdHNJZCwKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTowLAogICAgICAgICAgICAgICAgICAgICAgICBsYW5nOiB0aGlzLiRpMThuLmxvY2FsZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICAgICAvL3RoaXMuaW5BY2NvdW50cygpCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBpbkJveCgpIHsKCiAgICAgICAgICAgICAgICB0aGlzLnNob3c9IXRoaXMuc2hvdwogICAgICAgICAgICAgICAgdGhpcy4kYnZNb2RhbC5oaWRlKCdjb25maXJtaW5Cb3gnKQoKICAgICAgICAgICAgICAgIGlmKHRoaXMuJHN0b3JlLnN0YXRlLmNhdGVnb3JpZXByb2R1Y3RzLmNvbnRhY3RzSWQ9PT0wKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1ha2VUb2FzdCh0aGlzLiR0KCdzZWxlY3RfY29udGFjdCcpLCdlcnJvcicpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93PSF0aGlzLnNob3cKICAgICAgICAgICAgICAgICAgICByZXR1cm4gOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmKHRoaXMubGlzdHByb2R1Y3RzLmxlbmd0aD09PTApewogICAgICAgICAgICAgICAgICAgIHRoaXMubWFrZVRvYXN0KHRoaXMuJHQoJ25vX3Byb2R1Y3QnKSwnZXJyb3InKQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvdz0hdGhpcy5zaG93CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZih0aGlzLmZvcm0ubW9udGFudF9lbmNhaXNzZT09PTApewogICAgICAgICAgICAgICAgICAgIHRoaXMubWFrZVRvYXN0KHRoaXMuJHQoJ3doaWNoX2Ftb3VudCcpLCdlcnJvcicpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93PSF0aGlzLnNob3cKICAgICAgICAgICAgICAgICAgICByZXR1cm4gOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5lbmNvbXB0ZSA9IGZhbHNlCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaW5ib3gnLHRoaXMuJGkxOG4ubG9jYWxlKQoKCiAgICAgICAgICAgICAgICB0aGlzLmluQm94cygKCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICBwcm9kdWl0VnVlOnRoaXMubGlzdHByb2R1Y3RzLAogICAgICAgICAgICAgICAgICAgICBtb250YW50VG90YWw6dGhpcy5pbnZvaWNlX3RvdGFsLAogICAgICAgICAgICAgICAgICAgICBtb250YW50SFQ6dGhpcy5Nb250YW50X3RvdGFsLAogICAgICAgICAgICAgICAgICAgICBtb250YW50RW5jYWlzc2U6dGhpcy5mb3JtLm1vbnRhbnRfZW5jYWlzc2UsCiAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25DYWlzc2VJZDpsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic2Vzc2lvbmNhaXNzZSIpLAogICAgICAgICAgICAgICAgICAgICB0eXBlOjEsCiAgICAgICAgICAgICAgICAgICAgIGNsaWVudElkOnRoaXMuJHN0b3JlLnN0YXRlLmNhdGVnb3JpZXByb2R1Y3RzLmNsaWVudHNJZCwKICAgICAgICAgICAgICAgICAgICAgdmVuZGV1cklkOnRoaXMuJHN0b3JlLnN0YXRlLmNhdGVnb3JpZXByb2R1Y3RzLnZlbmRldXJzSWQsCiAgICAgICAgICAgICAgICAgICAgIGNvbnRhY3RJZDp0aGlzLiRzdG9yZS5zdGF0ZS5jYXRlZ29yaWVwcm9kdWN0cy5jb250YWN0c0lkLAogICAgICAgICAgICAgICAgICAgICBsYW5nOiB0aGlzLiRpMThuLmxvY2FsZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICApCgogICAgICAgICAgICB9LAoKICAgICAgICAgICAgY2xvc2VCb3goKXsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2xvc2Vib3gnKQogICAgICAgICAgICAgICAgdGhpcy4kYnZNb2RhbC5zaG93KCdiaWxhbicpCiAgICAgICAgICAgICAgICAvL3RoaXMuY2xvc2Vib3goeyJvdXZlcnR1cmVBbW91bnQiOnRoaXMub3V2ZXJ0dXJlQW1vdW50fSkKCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBvcGVuQm94KCl7CgogICAgICAgICAgICAgICAgdGhpcy4kYnZNb2RhbC5oaWRlKCdjb25maXJtb3BlbkFjY291bnQnKQogICAgICAgICAgICAgICAgLy8gaWYodGhpcy5ib3hvcGVuPT09ImZhbHNlIil7CiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5tYWtlVG9hc3QoIkNhaXNzZSBPdXZlcnRlIHZldWlsbGV6IGxhIGZlcm1lciIsImVycm9yIikKICAgICAgICAgICAgICAgIC8vICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAvLyB9CiAgICAgICAgICAgICAgICB0aGlzLm9wZW5ib3hzKHsib3V2ZXJ0dXJlQW1vdW50Ijp0aGlzLm91dmVydHVyZUFtb3VudH0pCiAgICAgICAgICAgICAgICB0aGlzLnNob3cgPSBmYWxzZQogICAgICAgICAgICAgICAgdGhpcy5ib3hvcGVuID0gZmFsc2UKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJib3hvcGVuIixmYWxzZSkKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJib3hzaG93IixmYWxzZSkKCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBBZGRjYXQocHJvZHVjdCkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Byb2R1Y3QnLHByb2R1Y3QpCgogICAgICAgICAgICAgICAgaWYoKHRoaXMuZm9ybS5SZWZlcmVuY2UpPT0nJyl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFrZVRvYXN0KHRoaXMuJHQoJ3JlZl9lbnRlcicpLCdlcnJvcicpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYocHJvZHVjdC5wcm9kdWl0LmxpYmVsbGU9PSdkZWMnICYmIHRoaXMubGlzdHByb2R1Y3RzLmxlbmd0aCE9MCl7CgogICAgICAgICAgICAgICAgICAgIHRoaXMubWFrZVRvYXN0KHRoaXMuJHQoJ3Byb2R1Y3Rfd2FpdGluZycpLCdlcnJvcicpCiAgICAgICAgICAgICAgICAgICAgLyppZih0aGlzLmxpc3Rwcm9kdWN0cy5sZW5ndGghPTApewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3Rwcm9kdWN0cyA9IFtdCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQWxsUHJvZHVjdHNIb2xkKHByb2R1Y3QpCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd2YWxjYXRwcm9kdWN0Jyxwcm9kdWN0LnNlbGVjdGhvbGQpCgogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndmFsY2F0cHJvZHVjdCcsJ3ZpZGUnKQogICAgICAgICAgICAgICAgICAgIH0qLwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcHJvZHVjdC5zZWxlY3Rob2xkPXRoaXMuc2VsZWN0aG9sZAogICAgICAgICAgICAgICAgcHJvZHVjdC5yZWZlcmVuY2UgPSB0aGlzLmZvcm0uUmVmZXJlbmNlCgogICAgICAgICAgICAgICAgdGhpcy5hZGRQcm9kdWN0c0hvbGQocHJvZHVjdCkKCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlYXJjaHJlZmVyZW5jZSgpewoKICAgICAgICAgICAgICAgIHRoaXMuc2hvd19yZWZlcj0hdGhpcy5zaG93X3JlZmVyCiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaCA9IHRydWU7CiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFJlZmVyZW5jZSh0aGlzLmZvcm0uUmVmZXJlbmNlKQogICAgICAgICAgICB9LAogICAgICAgICAgICBhcHBseVRheChwcml4LHRheGVzKXsKCiAgICAgICAgICAgICAgICB0YXhlcy5mb3JFYWNoKCh2YWx1ZSkgPT4gewoKICAgICAgICAgICAgICAgICAgICBpZighdmFsdWUuaW5jbHVzZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHByaXggPSBwcml4ICsgKHByaXgqdmFsdWUudmFsZXVyKS8xMDAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBwcml4CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIFNlbGVjdEhvbGQoaXRlbSl7CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2hvbGQnLGl0ZW0ubnVtYmVyKQoKICAgICAgICAgICAgICAgIHRoaXMuU2VsZWN0SG9sZHMoaXRlbSkKICAgICAgICAgICAgICAgIC8vcmVxdWV0ZSBwb3VyIHJlY3VwZXJlciBsYSBsaXN0ZSBkZXMgcHJvZHVpdHMKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2hlY2tJZEhvbGQob2JqLCBpZCkgewoKICAgICAgICAgICAgICAgIHJldHVybiBvYmoubWFwKGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIGl0ZW0uaG9sZElkOyB9KS5pbmRleE9mKGlkKTsKCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGludm9pY2VUb3RhbCgpIHsKCiAgICAgICAgICAgICAgICB2YXIgc3VidG90YWwsdG90YWw7CiAgICAgICAgICAgICAgICBzdWJ0b3RhbCA9IHRoaXMubGlzdHByb2R1Y3RzLnJlZHVjZShmdW5jdGlvbihzdW0sIGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgY29zdCA9IHBhcnNlRmxvYXQoaXRlbS5wcml4KTsKICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKGNvc3QpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdW0gKyBjb3N0OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIDApOwoKICAgICAgICAgICAgICAgIHRoaXMuTW9udGFudF90b3RhbCA9IHN1YnRvdGFsLnRvRml4ZWQoMik7CiAgICAgICAgICAgICAgICAvLyB0YXgKICAgICAgICAgICAgICAgIC8vdG90YWwgPSBzdWJ0b3RhbCAqICh0aGlzLmludm9pY2VfdGF4IC8gMTAwKSArIHN1YnRvdGFsOwogICAgICAgICAgICAgICAgdG90YWwgPSB0aGlzLmludm9pY2VfdGF4ICsgc3VidG90YWw7CgogICAgICAgICAgICAgICAgLypzd2l0Y2ggKG9wZXJhbmRlKSB7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgIisiOgogICAgICAgICAgICAgICAgICAgICAgICB0b3RhbCA9IHRoaXMuaW52b2ljZV90YXggKyBzdWJ0b3RhbDsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgIi0iOgogICAgICAgICAgICAgICAgICAgICAgICB0b3RhbCA9IE1hdGguYWJzKHN1YnRvdGFsIC0gdGhpcy5pbnZvaWNlX3RheCkgOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0qLwoKICAgICAgICAgICAgICAgIHRvdGFsID0gcGFyc2VGbG9hdCh0b3RhbCk7CiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHRvdGFsKSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW52b2ljZV90b3RhbCA9IHRvdGFsLnRvRml4ZWQoMik7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtLm1vbnRhbnRfZW5jYWlzc2UgPSB0aGlzLmludm9pY2VfdG90YWwKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZvaWNlX3RvdGFsID0gIjAuMDAiOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdGF4VG90YWwocHJpeCxvcGVyYW5kZSl7CgogICAgICAgICAgICAgICAgdmFyIHN1YnRvdGFsdGF4ICxhZ2VUb3RhbDsKCiAgICAgICAgICAgICAgICAvL2xpc3Qgb2YgdGF4ZXMgb2YgdGhpc3Byb2R1Y3QKICAgICAgICAgICAgICAgIHN1YnRvdGFsdGF4ID0gIHRoaXMubGlzdHRheC5yZWR1Y2UoKGRhdGEsIHVzZXIpID0+IHsKICAgICAgICAgICAgICAgICAgICBhZ2VUb3RhbCA9IChhZ2VUb3RhbCB8fCAwKSArIHVzZXIudmFsZXVyCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFnZVRvdGFsOwogICAgICAgICAgICAgICAgfSwge30pOwoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkZXZvcHMnLHN1YnRvdGFsdGF4KQoKCiAgICAgICAgICAgICAgICAvL2NhbGN1bGF0ZSBhbW91bnQgYW5kIGFkZCBpdCBpbiB0b3RhbCBhbW91dCB0YXgKICAgICAgICAgICAgICAgIGlmICghaXNOYU4oc3VidG90YWx0YXgpKSB7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChvcGVyYW5kZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICIrIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzdWJ0b3RhbCcsc3VidG90YWx0YXgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludm9pY2VfdGF4ID0gdGhpcy5pbnZvaWNlX3RheCArICgoc3VidG90YWx0YXggKiBwcml4KS8xMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiLSI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc21vaW5zYWwnLHRoaXMuaW52b2ljZV90YXggLSAoKHN1YnRvdGFsdGF4ICogcHJpeCkvMTAwKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW52b2ljZV90YXggPSBNYXRoLmFicyh0aGlzLmludm9pY2VfdGF4IC0gKChzdWJ0b3RhbHRheCAqIHByaXgpLzEwMCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAvKiAgc3VidG90YWwgPSB0aGlzLmxpc3R0YXgucmVkdWNlKGZ1bmN0aW9uKHN1bSwgaXRlbSkgewogICAgICAgICAgICAgICAgICAgIHZhciBjb3N0ID0gcGFyc2VGbG9hdChpdGVtLnZhbGV1cik7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihjb3N0KSkgewoKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3N1YnRvdGFsJyxjb3N0KQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3VtICsgY29zdDsKCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgMCk7Ki8KCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBjaGVja0lkKG9iaiwgaWQpIHsKCiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLm1hcChmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtLnJlZmVyZW5jZTsgfSkuaW5kZXhPZihpZCk7CgogICAgICAgICAgICB9LAogICAgICAgICAgICByZW1vdmVDYXRQcm9kdWN0cyhwcm9kdWN0KSB7CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2luZGV4Jyx0aGlzLmxpc3Rwcm9kdWN0cykKICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUHJvZHVjdHNIb2xkKHByb2R1Y3QpCgogICAgICAgICAgICB9LAogICAgICAgICAgICBTZWVUYXhQcm9kdWN0KHByb2R1Y3QpIHsKCiAgICAgICAgICAgICAgICB0aGlzLnRheGVzID0gcHJvZHVjdC50YXhlcwogICAgICAgICAgICAgICAgdGhpcy4kYnZNb2RhbC5zaG93KCd0ZXN0JykKCgogICAgICAgICAgICB9LAogICAgICAgICAgICBGZXRjaFByb2R1Y3QoY2F0cHJvZHVjdCl7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnb3Byb2R1Y3QnKQogICAgICAgICAgICAgICAgdGhpcy5GZXRjaFByb2R1Y3RzKGNhdHByb2R1Y3QpCiAgICAgICAgICAgIH0sCgogICAgICAgICAgIC8qIG1ha2VUb2FzdCh2YXJpYW50ID0gbnVsbCwgbXNnKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRidlRvYXN0LnRvYXN0KG1zZywgewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBgICR7dmFyaWFudCB8fCAiZGVmYXVsdCJ9YCwKICAgICAgICAgICAgICAgICAgICB2YXJpYW50OiB2YXJpYW50LAogICAgICAgICAgICAgICAgICAgIHNvbGlkOiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwqLwoKICAgICAgICAgICAgbWFrZVRvYXN0KHZhcmlhbnQgPSBudWxsLHR5cGU9ImluZm8iKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUGxlYXNlIGZpbGwgdGhlIGZvcm0gY29ycmVjdGx5Jyx2YXJpYW50KQogICAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5zaG93KHZhcmlhbnQse3R5cGU6dHlwZX0pCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBBZGRIb2xkKCl7CgogICAgICAgICAgICAgICAgdGhpcy5hZGRob2xkKCkKCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBSZW1vdmVIb2xkKCl7CiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdoZWxsbycsdGhpcy5zZWxlY3Rob2xkKQogICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnaGVsbG8nLHRoaXMuc2VsZWN0aG9sZC5udW1iZXIpCiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZWhvbGQoe251bWJlcjp0aGlzLnNlbGVjdGhvbGQubnVtYmVyLGNsb3NlOmZhbHNlfSkKICAgICAgICAgICAgfSwKCiAgICAgICAgfSwKICAgICAgICBiZWZvcmVNb3VudCgpewogICAgICAgICAgICB0aGlzLmJveG9wZW4gPSAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2JveG9wZW4nKSkKICAgICAgICAgICAgdGhpcy5jaGVja3Nlc3Npb24oKQogICAgICAgICAgICAgY29uc29sZS5sb2coJ2JveHhvcGVuJyx0aGlzLmJveG9wZW4pCiAgICAgICAgfSwKICAgICAgICBtb3VudGVkKCkgewogICAgICAgICAgICB0aGlzLkZldGNoQ2F0UHJvZHVjdHMoKQogICAgICAgICAgICB0aGlzLkZldGNoU2FsZXNQcm9kdWN0cyh7bnVtYmVyOnRoaXMuc2VsZWN0aG9sZH0pCgogICAgICAgICAgICB0aGlzLnNob3cgPSAobG9jYWxTdG9yYWdlLmdldEl0ZW0oImJveHNob3ciKSk9PSd0cnVlJwoKICAgICAgICAgICAgY29uc29sZS5sb2coJ3Nob3cnLHRoaXMuc2hvdykKICAgICAgICAgICAgLy90aGlzLmNsb3NlQm94KCkKICAgICAgICAgICAgLy90aGlzLnNlYXJjaFBhcnRuZXJzKHt2YWw6J3QnLHR5cGU6J2NsaWVudHMnfSkKICAgICAgICAgICAgLy90aGlzLkZldGNoQ29udGFjdHMoKQogICAgICAgICAgICAvL3RoaXMuRmV0Y2hTZWxsZXJzKCkKICAgICAgICAgICAgLy90aGlzLkZldGNoQ3VzdG9tZXJzKCkKCiAgICAgICAgfSwKCiAgICAgICAgd2F0Y2g6IHsKCiAgICAgICAgICAgIEdldFJlbW92ZUFsbFByb2R1Y3RzOmZ1bmN0aW9uKHZhbHVlKXsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3RkYXR1cnMnLHZhbHVlKQoKICAgICAgICAgICAgIGlmKHZhbHVlKXsKICAgICAgICAgICAgICAgICB0aGlzLmxpc3Rwcm9kdWN0cz1bXQogICAgICAgICAgICAgICAgIHRoaXMubGlzdHRheD1bXQogICAgICAgICAgICAgICAgIHRoaXMuaW52b2ljZV90YXggPSAwCiAgICAgICAgICAgICAgICAgdGhpcy5pbnZvaWNlVG90YWwoKQoKICAgICAgICAgICAgICAgICAvKnRoaXMuJHN0b3JlLnN0YXRlLmNhdGVnb3JpZXByb2R1Y3RzLmNvbnRhY3RzSWQ9MAogICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmNhdGVnb3JpZXByb2R1Y3RzLnZlbmRldXJzSWQ9MAogICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmNhdGVnb3JpZXByb2R1Y3RzLmNsaWVudHNJZD0wKi8KICAgICAgICAgICAgICAgICB0aGlzLmZvcm0ucmVmZXJlbmNlPSIiCgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5jYWlzc2VzLnJlbW92ZWFsbHByb2R1Y3RzPWZhbHNlOwoKICAgICAgICAgICAgfSwKICAgICAgICAgICAgR2V0Qm94T3BlbjpmdW5jdGlvbih2YWx1ZSl7CgogICAgICAgICAgICAgICAgaWYoIXZhbHVlKSB7CgogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzdGRhdGVzJyx2YWx1ZSkKICAgICAgICAgICAgICAgICAgICB0aGlzLiRidk1vZGFsLmhpZGUoJ2NvbmZpcm1vcGVuQWNjb3VudCcpCgogICAgICAgICAgICAgICAgfWVsc2V7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuJGJ2TW9kYWwuaGlkZSgnY29uZmlybWNsb3NlQWNjb3VudCcpCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3N0ZGF0dXMnLHZhbHVlKQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aG9sZD17fQogICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdHByb2R1Y3RzPVtdCiAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0dGF4PVtdCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZvaWNlVG90YWwoKQogICAgICAgICAgICAgICAgICAgIHRoaXMuaW52b2ljZV90YXggPSAwCiAgICAgICAgICAgICAgICAgICAgdGhpcy5ob2xkbGlzdD1bXQoKICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3c9dHJ1ZQogICAgICAgICAgICAgICAgICAgIHRoaXMuYm94b3Blbj0gJ3RydWUnCiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImJveG9wZW4iLHRydWUpCiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImJveHNob3ciLHRydWUpCgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfSwKICAgICAgICAgICAgR2V0Q2Fpc3NlT3BlbjpmdW5jdGlvbih2YWx1ZSl7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3RkYXR1cnMnLHZhbHVlKQogICAgICAgICAgICAgICAgLyppZighdmFsdWUpIHsKCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3N0ZGF0dXMnLHZhbHVlKQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGJ2TW9kYWwuaGlkZSgnY29uZmlybW9wZW5BY2NvdW50JykKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzdGRhdHVzJyx2YWx1ZSkKCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYnZNb2RhbC5oaWRlKCdjb25maXJtY2xvc2VBY2NvdW50JykKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3RkYXR1cycsdmFsdWUpCiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImJveG9wZW4iLHZhbHVlKQoKICAgICAgICAgICAgICAgIH0KKi8KCgogICAgICAgICAgICB9LAogICAgICAgICAgICBnZXRDYXRQcm9kdWN0czogZnVuY3Rpb24odmFsdWUpewoKICAgICAgICAgICAgICAgIHRoaXMuY2F0ID0gdmFsdWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0UHJvZHVjdHModmFsKXsKICAgICAgICAgICAgICAgIGlmKHRoaXMuc2VhcmNoKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93X3JlZmVyID0gIXRoaXMuc2hvd19yZWZlcgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy90aGlzLm1ha2VUb2FzdCgnc3VjZXNzJywnc3VjY2VzcycpCiAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3RzPXZhbDsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0U3RhdHVzKCl7CgogICAgICAgICAgICAgICAgdGhpcy5zdGF0dXRlPWZhbHNlCgoKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0YigpewogICAgICAgICAgICAgIHJldHVybiB0aGlzLmJveG9wZW4KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0Q3VzdG9tZXIodmFsKXsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2xpZW50Jyx2YWwpCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2xpZW50Jyx2YWwuY2xpZW50SWQpCgogICAgICAgICAgICAgICAgaWYodmFsLmNsaWVudElkIT0wKSB7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuJGJ2TW9kYWwuaGlkZSgncmVnaXN0ZXJjdXN0b21lcicpCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYnZNb2RhbC5oaWRlKCdyZWdpc3RlcnNlbGxlcicpCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYnZNb2RhbC5oaWRlKCdyZWdpc3RlcmNvbnRhY3QnKQogICAgICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50cy5wdXNoKHZhbCkKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWtlVG9hc3QodGhpcy4kdCgnY3VzdG9tZXJfYWRkJyksJ3N1Y2Nlc3MnKQogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93PWZhbHNlCiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWtlVG9hc3QodGhpcy4kdCgnY3VzdG9tZXJfZGVuaWVkJyksICJlcnJvciIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIEdldEJveCh2YWwpewoKICAgICAgICAgICAgICAgIHRoaXMuYm94PXZhbDsKICAgICAgICAgICAgICAgIHRoaXMuc2hvdz1mYWxzZQogICAgICAgICAgICAgICAgdGhpcy4kYnZNb2RhbC5zaG93KCd0ZXN0cycpCiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlY2Fpc3NlKCkKCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIEdldEVuY2Fpc3NlbWVudHModmFsKXsKCiAgICAgICAgICAgICAgICB0aGlzLmVuY2Fpc3NlbWVudHM9dmFsCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZW5jYWlzc2VtZW50cycsdmFsKQoKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0T2JqZXRIb2xkKHZhbCl7CiAgICAgICAgICAgICAgICB0aGlzLmhvbGRsaXN0LnB1c2godmFsKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0U3RhdHVzSG9sZCh2YWwpewoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvYmpldGhvbGQnLHZhbCkKCiAgICAgICAgICAgICAgICBsZXQgaW5kZXhJZHMgPSB0aGlzLmNoZWNrSWRIb2xkKHRoaXMuaG9sZGxpc3QsdGhpcy5zZWxlY3Rob2xkLmhvbGRJZCkKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvYmpldGhvbGQnLGluZGV4SWRzKQogICAgICAgICAgICAgICAgdGhpcy5ob2xkbGlzdC5zcGxpY2UoaW5kZXhJZHMsIDEpOwogICAgICAgICAgICAgICAgdGhpcy5ob2xkbGlzdC5zb3J0KCk7CiAgICAgICAgICAgICAgICAvL3RoaXMuJHN0b3JlLnN0YXRlLmNhaXNzZXMuc3RhdHVzcmVxdWV0ZT1mYWxzZTsKCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBnZXRIb2xkTGlzdCh2YWwpewoKICAgICAgICAgICAgICAgIHRoaXMuaG9sZGxpc3Q9dmFsOwogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rob2xkID0gdGhpcy5ob2xkbGlzdFswXQoKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0U2VsZWN0SG9sZCh2YWwpewoKICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aG9sZCA9IHZhbAogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2FvYmpldGhvbGQnLHZhbCkKCiAgICAgICAgICAgICAgICB0aGlzLmdldFByb2R1Y3RzSG9sZCh0aGlzLnNlbGVjdGhvbGQpCgogICAgICAgICAgICB9LAogICAgICAgICAgICBHZXRQcm9kdWN0c0hvbGQodmFsKXsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0cCcsdmFsKQoKICAgICAgICAgICAgICAgIC8vdGhpcy5saXN0cHJvZHVjdHMgPSB2YWwKICAgICAgICAgICAgICAgIHRoaXMubGlzdHByb2R1Y3RzPVtdCiAgICAgICAgICAgICAgICB0aGlzLmxpc3R0YXg9W10KCiAgICAgICAgICAgICAgICBpZih2YWwubGVuZ3RoIT0wKSB7CiAgICAgICAgICAgICAgICAgICAgdmFsLmZvckVhY2goKHZhbHVlKSA9PiB7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3Rwcm9kdWN0cy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1aXRJZDogdmFsdWUucHJvZHVpdC5wcm9kdWl0SWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWJlbGxlOiB2YWx1ZS5wcm9kdWl0LmxpYmVsbGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2U6IHZhbHVlLnJlZmVyZW5jZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvbGRJZDogdGhpcy5zZWxlY3Rob2xkLmhvbGRJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaXg6IHZhbHVlLnByb2R1aXQucHJpeCwvL3RoaXMuYXBwbHlUYXgodmFsdWUucHJvZHVpdC5wcml4LHZhbHVlLnRheGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllOiB2YWx1ZS5wcm9kdWl0LmNhdGVnb3JpZVByb2R1aXQubGliZWxsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uQ2F0OiB2YWx1ZS5wcm9kdWl0LmNhdGVnb3JpZVByb2R1aXQuZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXhlczogdmFsdWUudGF4ZXMKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3R0YXggID0gdmFsdWUudGF4ZXMKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXhUb3RhbCh2YWx1ZS5wcm9kdWl0LnByaXgsIisiKQoKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmludm9pY2VUb3RhbCgpCgogICAgICAgICAgICB9LAoKICAgICAgICAgICAgTW92ZVByb2R1Y3RzSG9sZCh2YWx1ZSl7CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ21vdmVmJyx2YWx1ZSkKICAgICAgICAgICAgICAgIHZhciBvcGVyYW5kZSA9IiIKICAgICAgICAgICAgICAgIGlmKHZhbHVlLnN0YXR1dD09PTApIHsKCiAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUuc3VjY2Vzcyl7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3Rwcm9kdWN0cy5yZWZlcmVuY2UgPSB0aGlzLmZvcm0uUmVmZXJlbmNlCiAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhbmRlID0gIisiCiAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3Rwcm9kdWN0cy5wdXNoKHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWl0SWQ6IHZhbHVlLnByb2R1aXQucHJvZHVpdElkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGliZWxsZTogdmFsdWUucHJvZHVpdC5saWJlbGxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlOiB0aGlzLmxpc3Rwcm9kdWN0cy5yZWZlcmVuY2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob2xkSWQ6IHRoaXMuc2VsZWN0aG9sZC5ob2xkSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcml4OiB2YWx1ZS5wcm9kdWl0LnByaXgsLy90aGlzLmFwcGx5VGF4KHZhbHVlLnByb2R1aXQucHJpeCx2YWx1ZS50YXhlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZTogdmFsdWUucHJvZHVpdC5jYXRlZ29yaWVQcm9kdWl0LmxpYmVsbGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbkNhdDogdmFsdWUucHJvZHVpdC5jYXRlZ29yaWVQcm9kdWl0LmRlc2NyaXB0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGF4ZXM6IHZhbHVlLnRheGUKCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXZhbHVlLnRheGUuaW5jbHVzZSl7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0dGF4ID0gdmFsdWUudGF4ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ21vdmVlJywgdGhpcy5saXN0dGF4KQoKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBvcGVyYW5kZT0iKyI7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGF4VG90YWwodmFsdWUucHJvZHVpdC5wcml4LG9wZXJhbmRlKQoKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWtlVG9hc3QodGhpcy4kdCh2YWx1ZS5tZXNzYWdlKSwnZXJyb3InKQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncHJ4eHhvZHVjdHMnLGZhbHNlKQoKICAgICAgICAgICAgICAgICAgICAgICAgLy9vYnRlbmlyIG9iamVjdCBwYXIgc29uIGlkCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH1lbHNlewoKICAgICAgICAgICAgICAgICAgICBvcGVyYW5kZT0iLSI7CgogICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NoZWNraWQnLHRoaXMuY2hlY2tJZCh0aGlzLmxpc3Rwcm9kdWN0cyx2YWx1ZS5yZWZlcmVuY2UpKQogICAgICAgICAgICAgICAgICAgIGxldCBpbmRleElkID0gdGhpcy5jaGVja0lkKHRoaXMubGlzdHByb2R1Y3RzLHZhbHVlLnJlZmVyZW5jZSkKICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3R0YXggPSAodGhpcy5saXN0cHJvZHVjdHNbaW5kZXhJZF0pLnRheGVzCgoKICAgICAgICAgICAgICAgICAgICB0aGlzLnRheFRvdGFsKHRoaXMubGlzdHByb2R1Y3RzW2luZGV4SWRdLnByaXgsb3BlcmFuZGUpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0cHJvZHVjdHMuc3BsaWNlKGluZGV4SWQsIDEpOwoKCgogICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgICAgICB0aGlzLmludm9pY2VUb3RhbCgpCgogICAgICAgICAgICB9CgogICAgICAgIH0KICAgIH07Cg=="},{"version":3,"sources":["box.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkbA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;;;;AAIA;;;AAGA;;AAEA;;AAEA;AACA","file":"box.vue","sourceRoot":"src/views/app/caisses","sourcesContent":["<template xmlns:v-slot=\"http://www.w3.org/1999/XSL/Transform\">\r\n    <div class=\"main-content\">\r\n        <salesreceipt :encaissements=\"encaissements\"\r\n                      :encompte=\"encompte\"\r\n                      :box=\"box\"\r\n                      :field=\"field\"\r\n                      :listproducts=\"listproducts\" ></salesreceipt>\r\n\r\n        <bilan ></bilan>\r\n\r\n        <b-button  style=\"right: 0;position: absolute\" v-if=\"boxopen=='true'\" pill variant=\"success m-1\"  v-b-modal.confirmopenAccount ><i class=\"i-Folder-Open\"></i>\r\n        </b-button>\r\n\r\n        <b-button  style=\"right: 0;position: absolute\" v-else pill variant=\"danger m-1\" v-b-modal.confirmcloseAccount ><i class=\"i-Close\"></i></b-button>\r\n        <b-col md=\"12\" style=\"position:relative;text-align: right\" >\r\n            <!--{{$t('close_box')}}-->\r\n\r\n            <b-modal id=\"confirmopenAccount\" :title=\"$t('open_box')\" hide-footer>\r\n\r\n                <template #modal-header=\"{  }\">\r\n                    <!-- Emulate built in modal header close button action -->\r\n                    <h5>{{$t('open_box')}}</h5>\r\n                </template>\r\n\r\n                <template #default=\"{  }\">\r\n                    <b-form-input\r\n\r\n                            v-model=\"ouvertureAmount\"\r\n                            type=\"number\"\r\n                            :placeholder=\"$t('Montant_Encaisse')\"\r\n                    ></b-form-input>\r\n                    <p></p>\r\n                    <div style=\"text-align: right\">\r\n                        <b-button  @click=\"openBox()\" variant=\"outline-success\" style=\"margin-right: 15px\">{{$t('open')}}</b-button>\r\n                    </div>\r\n\r\n                </template>\r\n\r\n            </b-modal>\r\n\r\n            <b-modal id=\"confirmcloseAccount\"  title=\"Confirmer la fermeture de la Caisse\" hide-footer>\r\n                <p></p>\r\n\r\n                <template #default=\"{  }\">\r\n                    <b-form-input\r\n\r\n                            v-model=\"ouvertureAmount\"\r\n                            type=\"number\"\r\n                            :placeholder=\"$t('Montant_Close')\"\r\n                    ></b-form-input>\r\n                    <p></p>\r\n                    <div style=\"text-align: right\">\r\n                        <b-button type=\"submit\" variant=\"outline-success rights\" @click=\"closeBox()\" >{{$t('close')}}</b-button>\r\n                    </div>\r\n\r\n                </template>\r\n\r\n            </b-modal>\r\n\r\n        </b-col>\r\n        <breadcumb :page=\"$t('caisse')\" :folder=\"date\"   /> <!--:montant=\"\"-->\r\n\r\n        <b-overlay :show=\"show\" rounded=\"sm\" >\r\n\r\n            <b-card  :aria-hidden=\"show ? 'true' : null\"  class=\"overlay-box\">\r\n             <!--title=\"Form Inputs\"-->\r\n            <b-row>\r\n                <b-col md=\"6\">\r\n\r\n                    <b-row>\r\n                        <Catproductes :cats=\"cat\"  @FetcProduct=\"FetchProduct\"></Catproductes>\r\n                    </b-row>\r\n                    <p></p>\r\n                    <b-row>\r\n                        <b-form-group\r\n                                class=\"col-md-10 mb-30\"\r\n                                :label=\"$t('Reference')\"\r\n                                label-for=\"input-1\"\r\n\r\n                        >\r\n                            <b-form-input\r\n                                    v-uppercase\r\n                                    v-model=\"form.Reference\"\r\n                                    type=\"text\"\r\n                                    required\r\n                                    placeholder=\"LT00215212\"\r\n                            ></b-form-input>\r\n\r\n                        </b-form-group>\r\n                        <div class=\"spinner spinner-info\" v-if=\"show_refer\"\r\n                             style=\"position:absolute;margin-top:29px!important;\r\n                             margin-left:33px!important;\r\n                             width:15px;height:15px;\"></div>\r\n                        <div class=\"col-md-1\" >\r\n\r\n                            <button class=\"btn btn-outline-success  btn-icon m-1\" @click=\"searchreference()\"\r\n                                    style=\"margin-top:25px!important;padding:4px!important;\" type=\"button\">\r\n                                <span class=\"ul-btn__icon\"><i class=\"i-Search-People\"></i></span></button>\r\n\r\n                        </div>\r\n\r\n                    </b-row>\r\n\r\n                    <b-row class=\"scroll-card\">\r\n                        <b-card no-body v-for=\"item in products\" :key=\"item.produit.produitId\"  @click=\"Addcat(item)\"\r\n                                class=\"bg-dark text-white o-hidden mb-30 taille \">\r\n\r\n                            <img v-if=\"item.produit.img==null\" src=\"../../../assets/images/photo-long-1.jpg\" alt />\r\n                            <img v-else :src=\"resources_urls + item.produit.img\" alt />\r\n\r\n                            <div class=\"card-img-overlay\">\r\n                                <div class=\"text-center pt-4\">\r\n                                    <h5 class=\"card-title mb-2 text-white \" style=\"font-size: 13px\">{{$t(item.produit.libelle )}}</h5>\r\n                                    <div class=\"separator border-top mb-2\"></div>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </b-card>\r\n\r\n                    </b-row>\r\n\r\n\r\n                </b-col>\r\n                <b-col md=\"6\">\r\n                    <b-row>\r\n                        <b-form-group\r\n                                class=\"col-md-10 mb-30\"\r\n                                :label=\"$t('Client')\"\r\n                                label-for=\"input-1\"\r\n                        >\r\n                            <AutoComplete  msg='clients' :optionsKey=\"optionsKey\" :optionsKey1=\"optionsKey1\"></AutoComplete><!---->\r\n\r\n                        </b-form-group>\r\n\r\n\r\n                        <div class=\"bv-no-focus-ring\" style=\"margin-top: 17px\">\r\n                            <b-button class=\"btn btn-outline-success  btn-icon m-1\" style=\"margin-top:5px!important;padding:4px!important;\"\r\n                                      @click=\"showModal = true\" variant=\"primary\" v-b-modal.registercustomer\r\n                            ><span class=\"ul-btn__icon\"><i class=\"i-Add\"></i></span>\r\n                            </b-button>\r\n\r\n                            <registerPartners\r\n                                    id=\"registercustomer\"\r\n                                    :title=\"$t('register_customer')\"\r\n                                    type=\"clients\"\r\n                                    :statut=\"statute\"\r\n                                   @registerpartners=\"registerCustomer\"></registerPartners\r\n                                    >\r\n\r\n                            <b-modal id=\"test\" title=\"Liste des Taxes\" hide-footer>\r\n\r\n                                <template #modal-header=\"{  }\">\r\n                                    <!-- Emulate built in modal header close button action -->\r\n                                    <h5>{{$t('tax_list')}}</h5>\r\n                                </template>\r\n\r\n                                <template #default=\"{ hide }\">\r\n                                    <table class=\"table table-bordered\">\r\n                                        <thead>\r\n                                        <tr>\r\n                                            <th scope=\"col\" >\r\n                                                {{$t('nom_label')}}\r\n                                            </th>\r\n                                            <th scope=\"col\" >\r\n                                                {{$t('description')}}\r\n                                            </th>\r\n                                            <th scope=\"col\" >\r\n                                                {{$t('value')}}\r\n                                            </th>\r\n                                            <th scope=\"col\" >\r\n                                                {{$t('type')}}\r\n                                            </th>\r\n\r\n                                        </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                        <tr v-if=\"taxes.length === 0\">\r\n                                            <td md=\"12\"></td>\r\n                                        </tr>\r\n                                        <tr v-else v-for=\"item in taxes\"  :key=\"item.taxeId\">\r\n\r\n                                            <td>{{item.nom}}</td>\r\n                                            <td>{{item.description}}</td>\r\n                                            <td>{{item.valeur}}</td>\r\n\r\n                                            <td v-if=\"item.incluse == true\">{{$t('incluse')}}</td>\r\n                                            <td v-else>{{$t('excluse')}}</td>\r\n                                        </tr>\r\n                                        </tbody>\r\n                                    </table>\r\n                                    <p></p>\r\n                                    <div style=\"text-align: right\">\r\n                                        <b-button  @click=\"hide()\" variant=\"outline-danger\" style=\"margin-right: 15px\">{{$t('close')}}</b-button>\r\n                                    </div>\r\n\r\n                                </template>\r\n\r\n                            </b-modal>\r\n\r\n                        </div>\r\n                    </b-row>\r\n\r\n\r\n\r\n                    <b-row>\r\n                        <b-form-group\r\n                                class=\"col-md-10 mb-30\"\r\n                                :label=\"$t('Vendeur')\"\r\n                                label-for=\"input-1\"\r\n                        >\r\n\r\n                            <AutoComplete msg='vendeurs' :optionsKey=\"optionsKey\" :optionsKey1=\"optionsKey1\" ></AutoComplete>\r\n\r\n                        </b-form-group>\r\n\r\n\r\n                        <div class=\"bv-no-focus-ring\" style=\"margin-top: 17px\">\r\n                            <b-button class=\"btn btn-outline-success  btn-icon m-1\"\r\n                                      style=\"margin-top:5px!important;padding:4px!important;\"  variant=\"primary\" v-b-modal.registerseller\r\n                            ><span class=\"ul-btn__icon\"><i class=\"i-Add\"></i></span>\r\n                            </b-button>\r\n\r\n                            <!--<button class=\"btn btn-info btn-icon m-1\" style=\"margin-top:5px!important;padding:4px!important;\" type=\"button\">\r\n                                <span class=\"ul-btn__icon\"><i class=\"i-Search-People\"></i></span></button>-->\r\n\r\n\r\n                            <registerPartners\r\n                                    id=\"registerseller\"\r\n                                    :title=\"$t('register_sellers')\"\r\n                                    type=\"vendeurs\"\r\n                                    @registerpartners=\"registerCustomer\"></registerPartners\r\n                            >\r\n\r\n                        </div>\r\n                    </b-row>\r\n                    <b-row>\r\n                        <b-col >\r\n                            <table class=\"table table-bordered\">\r\n                                <thead>\r\n                                <tr>\r\n                                    <th scope=\"col\" v-for=\"header in fields\" :key=\"header\">\r\n                                        {{$t(header)}}\r\n                                    </th>\r\n                                </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                <tr v-if=\"listproducts.length === 0\">\r\n                                    <td colspan=\"5\" md=\"12\">{{$t('no_product')}}</td>\r\n                                </tr>\r\n                                <tr v-else v-for=\"item in listproducts\"  :key=\"item.produit_id\">\r\n\r\n                                    <td colspan=\"2\">{{item.libelle}}</td>\r\n                                    <td>\r\n\r\n                                            <input\r\n                                            class=\"form-control\"\r\n                                            type=\"text\"\r\n                                            v-model=\"item.reference\"\r\n                                            placeholder=\"Reference\"\r\n                                    />\r\n                                        </td>\r\n\r\n                                    <td>{{item.prix}}</td>\r\n                                    <td><a\r\n                                            @click=\"SeeTaxProduct(item)\"\r\n                                            class=\"o-hidden d-inline-block\"\r\n                                            title=\"See Tax\"\r\n                                    >\r\n                                        <i class=\"i-Eye-Visible text-25 text-success\"></i>\r\n                                    </a></td>\r\n                                    <td><a\r\n                                            @click=\"removeCatProducts(item)\"\r\n                                            class=\"o-hidden d-inline-block\"\r\n                                            title=\"Delete\"\r\n                                    >\r\n                                        <i class=\"i-Close-Window text-25 text-danger\"></i>\r\n                                    </a></td>\r\n                                </tr>\r\n                                </tbody>\r\n                            </table>\r\n\r\n                        </b-col>\r\n\r\n                        <b-col md=\"12\">\r\n                            <div class=\"invoice-summary float-right\">\r\n                                <p>\r\n                                    {{$t('Montant_total')}}:\r\n                                    <span>{{Montant_total}}</span>\r\n                                </p>\r\n\r\n                                <p>\r\n                                    {{$t('Taxes')}}:\r\n                                    <span> {{invoice_tax}} </span>\r\n                                </p>\r\n\r\n                                <h5 class=\"font-weight-bold\">\r\n                                    {{$t('Net_a_Payer')}}:\r\n                                    <span> {{invoice_total}} </span>\r\n\r\n                                </h5>\r\n\r\n                            </div>\r\n                        </b-col>\r\n                    </b-row>\r\n\r\n                    <p></p>\r\n                    <b-row>\r\n\r\n                        <b-col md=\"3\"></b-col>\r\n                        <b-col md=\"5\"><h5><b>{{$t('Montant_Encaisse')}}:</b></h5></b-col>\r\n                        <b-col md=\"4\" >\r\n                            <b-form-input\r\n\r\n                                    v-model=\"form.montant_encaisse\"\r\n                                    type=\"number\"\r\n                                    required\r\n                                    placeholder=\"0\"\r\n                            ></b-form-input></b-col>\r\n\r\n                    </b-row>\r\n\r\n\r\n\r\n                </b-col>\r\n            </b-row>\r\n\r\n            <p></p>\r\n            <p></p>\r\n            <p></p>\r\n            <p></p>\r\n\r\n\r\n\r\n\r\n            <b-row >\r\n                <b-col md=\"6\">\r\n                    <b-row>\r\n                    <b-form-group\r\n                            class=\"col-md-10 mb-30\"\r\n                            :label=\"$t('Contact')\"\r\n                            label-for=\"input-1\"\r\n                    >\r\n                        <AutoComplete msg='contacts' :optionsKey=\"optionsKey\" :optionsKey1=\"optionsKey1\" ></AutoComplete>\r\n\r\n                    </b-form-group>\r\n\r\n\r\n                    <div class=\"bv-no-focus-ring \" style=\"margin-top: 17px;\">\r\n\r\n                        <button class=\"btn btn-outline-success  btn-icon m-1\" v-b-modal.registercontact\r\n                                style=\"margin-top:5px!important;padding:4px!important;\" type=\"button\">\r\n                            <span class=\"ul-btn__icon\"><i class=\"i-Add\"></i></span></button>\r\n\r\n\r\n                        <registerPartners\r\n                                id=\"registercontact\"\r\n                                :title=\"$t('register_contacts')\"\r\n                                type=\"contacts\"\r\n                                @registerpartners=\"registerCustomer\"></registerPartners\r\n                        >\r\n\r\n                    </div>\r\n\r\n                </b-row>\r\n                </b-col>\r\n\r\n                <b-col md=\"6\" style=\"position:relative;text-align: right;margin-top: 19px\" >\r\n\r\n                    <b-button pill variant=\"danger m-1 \" @click=\"closecaisse()\" >{{$t('Annuler')}}</b-button>\r\n\r\n                    <b-button pill variant=\"grey m-1\" style=\"border:1px solid grey ;border-radius: 3px\"\r\n                              v-b-modal.confirminAccount>{{$t('Mis_en_Compte')}}</b-button>\r\n\r\n                    <b-modal id=\"confirminAccount\" title=\"Confirmer la mise en Compte\" hide-footer>\r\n                        <p></p>\r\n                        <div style=\"text-align: right\">\r\n                            <b-button  variant=\"outline-danger\"  style=\"visibility: hidden;margin-right: 10px\">{{$t('Annuler')}}</b-button>\r\n                            <b-button type=\"submit\" variant=\"outline-success rights\" @click=\"inAccount()\" >{{$t('Enregistrer')}}</b-button>\r\n\r\n                        </div>\r\n                    </b-modal>\r\n\r\n                    <b-modal id=\"confirminBox\" title=\"Confirmer l'Encaissement\" hide-footer>\r\n                        <p></p>\r\n                        <div style=\"text-align: right\">\r\n                            <b-button  variant=\"outline-danger\"  style=\"visibility: hidden;margin-right: 10px\">{{$t('Annuler')}}</b-button>\r\n                            <b-button type=\"submit\" variant=\"outline-success rights\" @click=\"inBox()\" >{{$t('Encaisser')}}</b-button>\r\n\r\n                        </div>\r\n                    </b-modal>\r\n\r\n\r\n                    <b-button pill variant=\"success m-1\" v-b-modal.confirminBox >{{$t('Encaisser')}}</b-button>\r\n\r\n                </b-col>\r\n\r\n            </b-row>\r\n\r\n            <b-row>\r\n                <b-col md=\"6\" style=\"position:relative;text-align: left\" >\r\n                    <div class=\"row row-horizon\">\r\n\r\n                           <span class=\"holdList\">\r\n                              <!-- list Holds goes here -->\r\n                               <span class=\"Hold \" :class=\"[item.holdId == selecthold.holdId ? 'selectedHold' : '']\" id=\"item.holdId\" v-for=\"item in holdlist\"\r\n                                     :key=\"item.hold_id\" @click=\"SelectHold(item)\">\r\n\r\n                                   {{item.number}}<!--<span id=\"Time\">{{item.time}}</span>-->\r\n\r\n                               </span>\r\n                           </span>\r\n                        <span class=\"Hold pl\" @click=\"AddHold()\">+</span>\r\n                        <span class=\"Hold pl\" @click=\"RemoveHold()\">-</span>\r\n                        <!--<b-tabs pills justified>\r\n\r\n                            <b-tab :title=\"item.number\" v-for=\"item in holdlist\" :key=\"item.hold_id\" @click=\"SelectHold(item)\" active>\r\n\r\n                            </b-tab>\r\n\r\n                        </b-tabs>-->\r\n                    </div>\r\n                </b-col>\r\n            </b-row>\r\n\r\n\r\n        </b-card>\r\n        </b-overlay>\r\n\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\n\r\n    import AutoComplete from \"./Autocomplete\"\r\n    import Catproductes from \"./catproductes\"\r\n    import salesreceipt from \"./salesreceipt\"\r\n    import bilan from \"../components/bilan\"\r\n    import registerPartners from \"../components/registerpartners\"\r\n\r\n    import constants from '../../../plugins/constants'\r\n    import { mapGetters,mapActions } from \"vuex\";\r\n    export default {\r\n\r\n        metaInfo: {\r\n            title: \"Caisse\"\r\n        },\r\n\r\n        data() {\r\n            return {\r\n                chassi:\"chassis\",\r\n                selectholdvar:false,\r\n                resources_urls:constants.resource_urls,\r\n                date: new Date().toLocaleString(),\r\n\r\n                cat:[],\r\n                boxopen:false,\r\n                contactsId:5,\r\n                box:false,\r\n                modaltax:false,\r\n                encaissements:{},\r\n                form: {\r\n                    num_ticket:'123',\r\n                    montant_encaisse:0,\r\n                    Reference:\"\",\r\n                    name: \"\",\r\n                    email: \"\",\r\n                    emails: \"\",\r\n                    fName: \"\",\r\n                    lName: \"\",\r\n                    phone: \"\"\r\n                },\r\n                ouvertureAmount:0,\r\n                resultsearch:[],\r\n                selection:[],\r\n                Montant_total:0,\r\n                invoice_tax: 0,\r\n                invoice_total: 0,\r\n                showModal:true,\r\n                clients:[],\r\n                products:[],\r\n                show:false,\r\n                customerForm:\r\n                    {\r\n                        cni: \"\",\r\n                        nom: \"\",\r\n                        prenom: \"\",\r\n                        phone: \"\",\r\n                        status: false,\r\n                        birthday:\"\",\r\n                        passport:\"\",\r\n                        permi_de_conduire:\"\",\r\n                        date: new Date().toLocaleString(),\r\n                    }\r\n                ,\r\n                search:false,\r\n                contact:{\r\n                    Name:\"\"\r\n                },\r\n                vendeur:{\r\n                    Name:\"\"\r\n                },\r\n                listproducts:[\r\n                ],\r\n                listtax:[\r\n                ],\r\n                tax:[],\r\n                statute:true,\r\n                show_refer:false,\r\n                selecthold:{},\r\n                taxes:[],\r\n                selected:[],\r\n                optionsKey:\"nom\",\r\n                optionsKey1:\"telephone\",\r\n                fields: [\"Dsignation\", \"Reference\", \"Prix\",\"Taxes\",\"Actions\"],\r\n                field: [\"Dsignation\", \"Prix\",\"Prix\"],\r\n                statusrequete:false,\r\n                holdlist:[],\r\n                encompte:false\r\n\r\n            };\r\n        },\r\n\r\n        components:{salesreceipt, AutoComplete,Catproductes,registerPartners,bilan},\r\n        computed: {\r\n\r\n            ...mapGetters([\"getStatusHold\",\"getProducts\",\"getCustomers\",\"getCustomer\",\"getStatus\",\"getCatProducts\",\"GetBox\",\"GetEncaissements\",\"getObjetHold\",\r\n                \"getHoldList\",\"getSelectHold\",\"GetProductsHold\",\"MoveProductsHold\",\"GetBoxOpen\",\"GetCaisseOpen\",\"GetRemoveAllProducts\"]),\r\n\r\n        },\r\n\r\n        methods: {\r\n            ...mapActions([\"FetchCatProducts\",\"FetchSalesProducts\",\"registerCustom\",\"FetchProducts\",\r\n                \"FetchSellers\",\"FetchContacts\",\"FetchCustomers\",\"inAccounts\"\r\n                ,\"inBoxs\",\"addhold\",\"closebox\",\"openboxs\",\"removehold\",\"removehold\",\"checksession\",\"holdliste\",\"SelectHolds\",\"getProductsHold\",\"addProductsHold\",\"removeProductsHold\",\"searchReference\",\"removeAllProductsHold\"]),\r\n\r\n            closecaisse(){\r\n                console.log('close')\r\n                this.removehold({number:this.selecthold.number,close:true})\r\n                //this.removeAllProductsHold({number:this.selecthold.number,sessionCaisseId:localStorage.getItem(\"sessioncaisse\")})\r\n\r\n            },\r\n            registerCustomer(variant = null) {\r\n\r\n                this.registerCustom(variant)\r\n\r\n            },\r\n            /*printFacture() {\r\n                var pdf = new jsPDF();\r\n                var element = document.getElementById('facture');\r\n                var width= element.style.width;\r\n                var height = element.style.height;\r\n                html2canvas(element).then(canvas => {\r\n                    var image = canvas.toDataURL('image/png');\r\n                    pdf.addImage(image, 'JPEG', 15, 40, width, height);\r\n                    pdf.save('facture' + moment(this.facture.date_debut).format('LL') + '_' + moment(this.facture.date_fin).format('LL') + '.pdf';\r\n                });\r\n            },*/\r\n            //Aucun Produit Selectionne\r\n            inAccount() {\r\n\r\n\r\n                this.$bvModal.hide('confirminAccount')\r\n                this.show=!this.show\r\n                if(this.$store.state.categorieproducts.contactsId===0){\r\n                    this.makeToast(this.$t('select_contact'),'error')\r\n                    this.$bvModal.hide('confirminAccount')\r\n                    this.show=!this.show\r\n                    return ;\r\n                }\r\n                if(this.listproducts.length===0){\r\n                    this.makeToast(this.$t('no_product'),'error')\r\n                    this.$bvModal.hide('confirminAccount')\r\n                    this.show=!this.show\r\n                    return ;\r\n                }\r\n                if(this.form.montant_encaisse>0){\r\n                    this.makeToast(this.$t('montant_encaisse_null'),'error')\r\n                    this.$bvModal.hide('confirminAccount')\r\n                    this.show=!this.show\r\n                    return ;\r\n                }\r\n                this.encompte = true\r\n\r\n                this.inAccounts(\r\n\r\n                    {\r\n                        produitVue:this.listproducts,\r\n                        montantTotal:this.invoice_total,\r\n                        montantHT:this.Montant_total,\r\n                        montantEncaisse:this.form.montant_encaisse,\r\n                        sessionCaisseId:localStorage.getItem(\"sessioncaisse\"),\r\n                        clientId:this.$store.state.clientsId,\r\n                        vendeurId:this.$store.state.vendeursId,\r\n                        contactId:this.$store.state.contactsId,\r\n                        type:0,\r\n                        lang: this.$i18n.locale\r\n                    }\r\n                )\r\n\r\n                //this.inAccounts()\r\n            },\r\n\r\n            inBox() {\r\n\r\n                this.show=!this.show\r\n                this.$bvModal.hide('confirminBox')\r\n\r\n                if(this.$store.state.categorieproducts.contactsId===0){\r\n                    this.makeToast(this.$t('select_contact'),'error')\r\n                    this.show=!this.show\r\n                    return ;\r\n                }\r\n\r\n                if(this.listproducts.length===0){\r\n                    this.makeToast(this.$t('no_product'),'error')\r\n                    this.show=!this.show\r\n                    return ;\r\n                }\r\n\r\n                if(this.form.montant_encaisse===0){\r\n                    this.makeToast(this.$t('which_amount'),'error')\r\n                    this.show=!this.show\r\n                    return ;\r\n                }\r\n                this.encompte = false\r\n                console.log('inbox',this.$i18n.locale)\r\n\r\n\r\n                this.inBoxs(\r\n\r\n                    {\r\n                     produitVue:this.listproducts,\r\n                     montantTotal:this.invoice_total,\r\n                     montantHT:this.Montant_total,\r\n                     montantEncaisse:this.form.montant_encaisse,\r\n                     sessionCaisseId:localStorage.getItem(\"sessioncaisse\"),\r\n                     type:1,\r\n                     clientId:this.$store.state.categorieproducts.clientsId,\r\n                     vendeurId:this.$store.state.categorieproducts.vendeursId,\r\n                     contactId:this.$store.state.categorieproducts.contactsId,\r\n                     lang: this.$i18n.locale\r\n                    }\r\n                    )\r\n\r\n            },\r\n\r\n            closeBox(){\r\n\r\n                console.log('closebox')\r\n                this.$bvModal.show('bilan')\r\n                //this.closebox({\"ouvertureAmount\":this.ouvertureAmount})\r\n\r\n            },\r\n\r\n            openBox(){\r\n\r\n                this.$bvModal.hide('confirmopenAccount')\r\n                // if(this.boxopen===\"false\"){\r\n                //     this.makeToast(\"Caisse Ouverte veuillez la fermer\",\"error\")\r\n                //     return;\r\n                // }\r\n                this.openboxs({\"ouvertureAmount\":this.ouvertureAmount})\r\n                this.show = false\r\n                this.boxopen = false\r\n                localStorage.setItem(\"boxopen\",false)\r\n                localStorage.setItem(\"boxshow\",false)\r\n\r\n            },\r\n\r\n            Addcat(product) {\r\n                console.log('product',product)\r\n\r\n                if((this.form.Reference)==''){\r\n                        this.makeToast(this.$t('ref_enter'),'error')\r\n                        return ;\r\n                }\r\n\r\n                if(product.produit.libelle=='dec' && this.listproducts.length!=0){\r\n\r\n                    this.makeToast(this.$t('product_waiting'),'error')\r\n                    /*if(this.listproducts.length!=0){\r\n                        this.listproducts = []\r\n                        this.removeAllProductsHold(product)\r\n                        console.log('valcatproduct',product.selecthold)\r\n\r\n                    }else{\r\n                        console.log('valcatproduct','vide')\r\n                    }*/\r\n                }\r\n                product.selecthold=this.selecthold\r\n                product.reference = this.form.Reference\r\n\r\n                this.addProductsHold(product)\r\n\r\n            },\r\n            searchreference(){\r\n\r\n                this.show_refer=!this.show_refer\r\n                this.search = true;\r\n                this.searchReference(this.form.Reference)\r\n            },\r\n            applyTax(prix,taxes){\r\n\r\n                taxes.forEach((value) => {\r\n\r\n                    if(!value.incluse){\r\n                        prix = prix + (prix*value.valeur)/100\r\n                    }\r\n                });\r\n                return prix\r\n            },\r\n            SelectHold(item){\r\n\r\n                console.log('hold',item.number)\r\n\r\n                this.SelectHolds(item)\r\n                //requete pour recuperer la liste des produits\r\n            },\r\n            checkIdHold(obj, id) {\r\n\r\n                return obj.map(function(item) { return item.holdId; }).indexOf(id);\r\n\r\n            },\r\n            invoiceTotal() {\r\n\r\n                var subtotal,total;\r\n                subtotal = this.listproducts.reduce(function(sum, item) {\r\n                    var cost = parseFloat(item.prix);\r\n                    if (!isNaN(cost)) {\r\n                        return sum + cost;\r\n                    }\r\n                }, 0);\r\n\r\n                this.Montant_total = subtotal.toFixed(2);\r\n                // tax\r\n                //total = subtotal * (this.invoice_tax / 100) + subtotal;\r\n                total = this.invoice_tax + subtotal;\r\n\r\n                /*switch (operande) {\r\n\r\n                    case \"+\":\r\n                        total = this.invoice_tax + subtotal;\r\n                        break;\r\n\r\n                    case \"-\":\r\n                        total = Math.abs(subtotal - this.invoice_tax) ;\r\n                        break;\r\n                }*/\r\n\r\n                total = parseFloat(total);\r\n                if (!isNaN(total)) {\r\n                    this.invoice_total = total.toFixed(2);\r\n                    this.form.montant_encaisse = this.invoice_total\r\n                } else {\r\n                    this.invoice_total = \"0.00\";\r\n                }\r\n\r\n            },\r\n            taxTotal(prix,operande){\r\n\r\n                var subtotaltax ,ageTotal;\r\n\r\n                //list of taxes of thisproduct\r\n                subtotaltax =  this.listtax.reduce((data, user) => {\r\n                    ageTotal = (ageTotal || 0) + user.valeur\r\n                    return ageTotal;\r\n                }, {});\r\n\r\n                console.log('devops',subtotaltax)\r\n\r\n\r\n                //calculate amount and add it in total amout tax\r\n                if (!isNaN(subtotaltax)) {\r\n                    switch (operande) {\r\n                        case \"+\":\r\n                            console.log('subtotal',subtotaltax)\r\n                            this.invoice_tax = this.invoice_tax + ((subtotaltax * prix)/100)\r\n                            break;\r\n                        case \"-\":\r\n                            console.log('smoinsal',this.invoice_tax - ((subtotaltax * prix)/100))\r\n                            this.invoice_tax = Math.abs(this.invoice_tax - ((subtotaltax * prix)/100))\r\n                            break;\r\n                    }\r\n\r\n                }\r\n\r\n              /*  subtotal = this.listtax.reduce(function(sum, item) {\r\n                    var cost = parseFloat(item.valeur);\r\n                    if (!isNaN(cost)) {\r\n\r\n                        console.log('subtotal',cost)\r\n                        return sum + cost;\r\n\r\n                    }\r\n                }, 0);*/\r\n\r\n            },\r\n\r\n            checkId(obj, id) {\r\n\r\n                return obj.map(function(item) { return item.reference; }).indexOf(id);\r\n\r\n            },\r\n            removeCatProducts(product) {\r\n\r\n                console.log('index',this.listproducts)\r\n                this.removeProductsHold(product)\r\n\r\n            },\r\n            SeeTaxProduct(product) {\r\n\r\n                this.taxes = product.taxes\r\n                this.$bvModal.show('test')\r\n\r\n\r\n            },\r\n            FetchProduct(catproduct){\r\n                console.log('oproduct')\r\n                this.FetchProducts(catproduct)\r\n            },\r\n\r\n           /* makeToast(variant = null, msg) {\r\n                this.$bvToast.toast(msg, {\r\n                    title: ` ${variant || \"default\"}`,\r\n                    variant: variant,\r\n                    solid: true\r\n                });\r\n            },*/\r\n\r\n            makeToast(variant = null,type=\"info\") {\r\n                console.log('Please fill the form correctly',variant)\r\n                this.$toasted.show(variant,{type:type})\r\n            },\r\n\r\n            AddHold(){\r\n\r\n                this.addhold()\r\n\r\n            },\r\n\r\n            RemoveHold(){\r\n                //console.log('hello',this.selecthold)\r\n                //console.log('hello',this.selecthold.number)\r\n                this.removehold({number:this.selecthold.number,close:false})\r\n            },\r\n\r\n        },\r\n        beforeMount(){\r\n            this.boxopen = (localStorage.getItem('boxopen'))\r\n            this.checksession()\r\n             console.log('boxxopen',this.boxopen)\r\n        },\r\n        mounted() {\r\n            this.FetchCatProducts()\r\n            this.FetchSalesProducts({number:this.selecthold})\r\n\r\n            this.show = (localStorage.getItem(\"boxshow\"))=='true'\r\n\r\n            console.log('show',this.show)\r\n            //this.closeBox()\r\n            //this.searchPartners({val:'t',type:'clients'})\r\n            //this.FetchContacts()\r\n            //this.FetchSellers()\r\n            //this.FetchCustomers()\r\n\r\n        },\r\n\r\n        watch: {\r\n\r\n            GetRemoveAllProducts:function(value){\r\n\r\n                console.log('stdaturs',value)\r\n\r\n             if(value){\r\n                 this.listproducts=[]\r\n                 this.listtax=[]\r\n                 this.invoice_tax = 0\r\n                 this.invoiceTotal()\r\n\r\n                 /*this.$store.state.categorieproducts.contactsId=0\r\n                 this.$store.state.categorieproducts.vendeursId=0\r\n                 this.$store.state.categorieproducts.clientsId=0*/\r\n                 this.form.reference=\"\"\r\n\r\n              }\r\n              this.$store.state.caisses.removeallproducts=false;\r\n\r\n            },\r\n            GetBoxOpen:function(value){\r\n\r\n                if(!value) {\r\n\r\n                    console.log('stdates',value)\r\n                    this.$bvModal.hide('confirmopenAccount')\r\n\r\n                }else{\r\n\r\n                    this.$bvModal.hide('confirmcloseAccount')\r\n                    console.log('stdatus',value)\r\n                    this.selecthold={}\r\n                    this.listproducts=[]\r\n                    this.listtax=[]\r\n                    this.invoiceTotal()\r\n                    this.invoice_tax = 0\r\n                    this.holdlist=[]\r\n\r\n                    this.show=true\r\n                    this.boxopen= 'true'\r\n                    localStorage.setItem(\"boxopen\",true)\r\n                    localStorage.setItem(\"boxshow\",true)\r\n\r\n                }\r\n\r\n            },\r\n            GetCaisseOpen:function(value){\r\n                console.log('stdaturs',value)\r\n                /*if(!value) {\r\n\r\n                    console.log('stdatus',value)\r\n                    this.$bvModal.hide('confirmopenAccount')\r\n                }else{\r\n                    console.log('stdatus',value)\r\n\r\n                    this.$bvModal.hide('confirmcloseAccount')\r\n                    console.log('stdatus',value)\r\n                    localStorage.setItem(\"boxopen\",value)\r\n\r\n                }\r\n*/\r\n\r\n\r\n            },\r\n            getCatProducts: function(value){\r\n\r\n                this.cat = value\r\n            },\r\n            getProducts(val){\r\n                if(this.search) {\r\n                    this.show_refer = !this.show_refer\r\n                }\r\n                //this.makeToast('sucess','success')\r\n                this.products=val;\r\n            },\r\n            getStatus(){\r\n\r\n                this.statute=false\r\n\r\n\r\n            },\r\n            getb(){\r\n              return this.boxopen\r\n            },\r\n            getCustomer(val){\r\n\r\n                console.log('client',val)\r\n                console.log('client',val.clientId)\r\n\r\n                if(val.clientId!=0) {\r\n\r\n                    this.$bvModal.hide('registercustomer')\r\n                    this.$bvModal.hide('registerseller')\r\n                    this.$bvModal.hide('registercontact')\r\n                    this.clients.push(val)\r\n\r\n                    this.makeToast(this.$t('customer_add'),'success')\r\n                }else{\r\n                    this.show=false\r\n                    this.makeToast(this.$t('customer_denied'), \"error\")\r\n                }\r\n            },\r\n            GetBox(val){\r\n\r\n                this.box=val;\r\n                this.show=false\r\n                this.$bvModal.show('tests')\r\n                this.closecaisse()\r\n\r\n            },\r\n            GetEncaissements(val){\r\n\r\n                this.encaissements=val\r\n                console.log('encaissements',val)\r\n\r\n            },\r\n            getObjetHold(val){\r\n                this.holdlist.push(val);\r\n            },\r\n            getStatusHold(val){\r\n\r\n                console.log('objethold',val)\r\n\r\n                let indexIds = this.checkIdHold(this.holdlist,this.selecthold.holdId)\r\n                console.log('objethold',indexIds)\r\n                this.holdlist.splice(indexIds, 1);\r\n                this.holdlist.sort();\r\n                //this.$store.state.caisses.statusrequete=false;\r\n\r\n            },\r\n\r\n            getHoldList(val){\r\n\r\n                this.holdlist=val;\r\n                this.selecthold = this.holdlist[0]\r\n\r\n            },\r\n            getSelectHold(val){\r\n\r\n                this.selecthold = val\r\n                console.log('aobjethold',val)\r\n\r\n                this.getProductsHold(this.selecthold)\r\n\r\n            },\r\n            GetProductsHold(val){\r\n\r\n                console.log('getp',val)\r\n\r\n                //this.listproducts = val\r\n                this.listproducts=[]\r\n                this.listtax=[]\r\n\r\n                if(val.length!=0) {\r\n                    val.forEach((value) => {\r\n\r\n                        this.listproducts.push({\r\n                            produitId: value.produit.produitId,\r\n                            libelle: value.produit.libelle,\r\n                            reference: value.reference,\r\n                            holdId: this.selecthold.holdId,\r\n                            prix: value.produit.prix,//this.applyTax(value.produit.prix,value.taxe),\r\n                            categorie: value.produit.categorieProduit.libelle,\r\n                            descriptionCat: value.produit.categorieProduit.description,\r\n                            taxes: value.taxes\r\n                        });\r\n\r\n                        this.listtax  = value.taxes\r\n                        this.taxTotal(value.produit.prix,\"+\")\r\n\r\n                    });\r\n\r\n                }\r\n                this.invoiceTotal()\r\n\r\n            },\r\n\r\n            MoveProductsHold(value){\r\n\r\n                console.log('movef',value)\r\n                var operande =\"\"\r\n                if(value.statut===0) {\r\n\r\n                    if(value.success){\r\n\r\n                        this.listproducts.reference = this.form.Reference\r\n                        operande = \"+\"\r\n                         this.listproducts.push({\r\n\r\n                            produitId: value.produit.produitId,\r\n                            libelle: value.produit.libelle,\r\n                            reference: this.listproducts.reference,\r\n                            holdId: this.selecthold.holdId,\r\n                            prix: value.produit.prix,//this.applyTax(value.produit.prix,value.taxe),\r\n                            categorie: value.produit.categorieProduit.libelle,\r\n                            descriptionCat: value.produit.categorieProduit.description,\r\n                            taxes: value.taxe\r\n\r\n                        });\r\n\r\n                        if(!value.taxe.incluse){\r\n\r\n                            this.listtax = value.taxe\r\n                            console.log('movee', this.listtax)\r\n\r\n                        }\r\n                        operande=\"+\";\r\n                        this.taxTotal(value.produit.prix,operande)\r\n\r\n                    }else{\r\n                        this.makeToast(this.$t(value.message),'error')\r\n                        console.log('prxxxoducts',false)\r\n\r\n                        //obtenir object par son id\r\n                    }\r\n\r\n                }else{\r\n\r\n                    operande=\"-\";\r\n\r\n                    //console.log('checkid',this.checkId(this.listproducts,value.reference))\r\n                    let indexId = this.checkId(this.listproducts,value.reference)\r\n                    this.listtax = (this.listproducts[indexId]).taxes\r\n\r\n\r\n                    this.taxTotal(this.listproducts[indexId].prix,operande)\r\n                    this.listproducts.splice(indexId, 1);\r\n\r\n\r\n\r\n                }\r\n\r\n\r\n                this.invoiceTotal()\r\n\r\n            }\r\n\r\n        }\r\n    };\r\n</script>\r\n\r\n<style scoped>\r\n    .Hold {\r\n        cursor: pointer;\r\n        text-align:center;\r\n        margin:5px 1px;\r\n        padding: 2px 10px;\r\n        background-color:#4C5261;\r\n        border-radius:3px;\r\n        color:#E4E6E7;\r\n        text-transform:uppercase;\r\n        font-size: 20px;\r\n        display:inline-block;\r\n        font-weight:600;\r\n        padding-bottom: 7px;\r\n        border-bottom: 3px solid #212C32;\r\n    }\r\n    .Hold span {\r\n        font-size: 12px;\r\n        color:#b9b2b2;\r\n        margin-left: 8px;\r\n    }\r\n    .selectedHold{\r\n        /*background-color:#35B8E0;*/\r\n        color:#E2E2E2;\r\n        border-bottom: 3px solid #f65e48;\r\n    }\r\n    .pl {\r\n        background-color:#253138;\r\n        color:#fff;\r\n        border-bottom: 3px solid #101417;\r\n    }\r\n    .taille{\r\n        width:120px;\r\n        height: 120px;\r\n        margin:10px;\r\n        background: #ffffff9e;\r\n    }\r\n    .rights{\r\n        position: relative;right: 0;margin-right: 10px;\r\n    }\r\n\r\n    img {\r\n        height:100vh;\r\n    }\r\n    .overlay-box{\r\n        background: #eee;\r\n    }\r\n    .scroll-card{\r\n        height: 250px;\r\n        display: flex !important;\r\n        flex-direction: row;\r\n        flex-grow: 1;\r\n        overflow: auto;\r\n    }\r\n</style>\r\n"]}]}