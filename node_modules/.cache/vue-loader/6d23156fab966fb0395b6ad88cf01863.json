{"remainingRequest":"/Users/macbookpro/IdeaProjects/collectedonnee/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macbookpro/IdeaProjects/collectedonnee/src/views/app/accident/croquis2.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macbookpro/IdeaProjects/collectedonnee/src/views/app/accident/croquis2.vue","mtime":1662382364224},{"path":"/Users/macbookpro/IdeaProjects/collectedonnee/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macbookpro/IdeaProjects/collectedonnee/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/macbookpro/IdeaProjects/collectedonnee/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macbookpro/IdeaProjects/collectedonnee/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnCmltcG9ydCBjb25zdGFudHMgZnJvbSAnLi4vLi4vLi4vcGx1Z2lucy9jb25zdGFudHMnCmltcG9ydCBDYW52YXNEcmF3IGZyb20gJy4vLi4vY29tcG9uZW50cy9DYW52YXNEcmF3LnZ1ZScKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdjcm9xdWlzMicsCiAgY29tcG9uZW50czogewogICAgQ2FudmFzRHJhdwogIH0sCiAgZGF0YSgpIHsKCiAgICByZXR1cm4gewogICAgICBsb2FkYW5vdGhlcnBhZ2U6ZmFsc2UsCiAgICB9CiAgfSwKICBwcm9wczp7CiAgICByb3dlczpPYmplY3QKICB9LAogIG1vdW50ZWQoKXsKICAgIGNvbnNvbGUubG9nKCdyb3dlJyx0aGlzLnJvd2VzKQogICAgY29uc29sZS5sb2coJ3Jvd2UnLHRoaXMucm93ZXMuaWQpCiAgfSwKICBtZXRob2RzOnsKICAgIG1ha2VUb2FzdCh2YXJpYW50ID0gbnVsbCx0eXBlKSB7CgogICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICBjYXNlIDA6IHR5cGU9ImVycm9yIjsgYnJlYWs7CiAgICAgICAgY2FzZSAxOiB0eXBlPSJzdWNjZXNzIiA7IGJyZWFrOwogICAgICAgIGNhc2UgMjogdHlwZT0iaW5mbyI7IGJyZWFrOwogICAgICAgIGNhc2UgMzogdHlwZT0id2FybmluZyI7IGJyZWFrOwoKICAgICAgfQoKICAgICAgdGhpcy4kdG9hc3RlZC5zaG93KCh2YXJpYW50KSx7dHlwZTp0eXBlfSkKCiAgICB9LAogICAgc2VuZChmb3JtZGF0YSl7CgogICAgICB0aGlzLmxvYWRhbm90aGVycGFnZT10cnVlCiAgICAgIGZvcm1kYXRhLmFwcGVuZCgnYWNjaWRlbnRfaWQnLHRoaXMucm93ZXMuaWQpCiAgICAgIGF4aW9zLnBvc3QoY29uc3RhbnRzLnJlc291cmNlX3VybCsnYWNjaWRlbnRzL3NhdmUtZHJhd2luZycsZm9ybWRhdGEsCiAgICAgICAgICB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnCiAgICAgICAgICAgIH19CiAgICAgICkKICAgICAgICAgIC50aGVuKGxpc3QgPT4gewoKICAgICAgICAgICAgY29uc29sZS5sb2coJ2Fqb3V0w6knLGxpc3QuZGF0YSkKICAgICAgICAgICAgY29uc29sZS5sb2coJ2Fqb3V0w6knLGxpc3QuZGF0YS5zdWNjZXNzKQoKICAgICAgICAgICAgaWYobGlzdC5kYXRhLnN1Y2Nlc3MpewogICAgICAgICAgICAgIC8vYnVpbGQgb2JqZWN0IHBhdGgKICAgICAgICAgICAgICB0aGlzLmxvYWRhbm90aGVycGFnZT1mYWxzZQogICAgICAgICAgICAgIHRoaXMubWFrZVRvYXN0KHRoaXMuJHQoJ0Nyb3F1aXMgZGUgbFwnaW1hZ2UgYWpvdXTDqScgKSwxKQogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAnYWNjaWRlbnRzJ30pCiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgIHRoaXMubWFrZVRvYXN0KHRoaXMuJHQoJ2VycmV1ciBsb3JzIGRlIGxcJ2Fqb3V0IGRlIGxcJ2ltYWdlJyksMCkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc29sZS5sb2coJ2NhcmUnLGxpc3QuZGF0YS5kYXRhKQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgICBjb25zb2xlLmxvZygncHJvZHVjdHNfZXJyb3InLGVycm9yKTsKICAgICAgICAgICAgLy8gSGFuZGxlIEVycm9ycyBoZXJlLgogICAgICAgICAgICAvLyB2YXIgZXJyb3JDb2RlID0gZXJyb3IuY29kZTsKCiAgICAgICAgICB9KTsKCiAgICB9CiAgfQp9Cgo="},{"version":3,"sources":["croquis2.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA","file":"croquis2.vue","sourceRoot":"src/views/app/accident","sourcesContent":["<template>\n  <b-overlay :show=\"loadanotherpage\" rounded=\"sm\" >\n  <div >\n    <h1>Croquis de l'accident</h1>\n    <div class=\"show-area\">\n      <CanvasDraw :width=\"1000\" :height=\"480\" :outputName=\"'example'\" @send=\"send\"/>\n    </div>\n  </div>\n  </b-overlay>\n</template>\n\n<script>\n\nimport axios from 'axios'\nimport constants from '../../../plugins/constants'\nimport CanvasDraw from './../components/CanvasDraw.vue'\nexport default {\n  name: 'croquis2',\n  components: {\n    CanvasDraw\n  },\n  data() {\n\n    return {\n      loadanotherpage:false,\n    }\n  },\n  props:{\n    rowes:Object\n  },\n  mounted(){\n    console.log('rowe',this.rowes)\n    console.log('rowe',this.rowes.id)\n  },\n  methods:{\n    makeToast(variant = null,type) {\n\n      switch (type) {\n        case 0: type=\"error\"; break;\n        case 1: type=\"success\" ; break;\n        case 2: type=\"info\"; break;\n        case 3: type=\"warning\"; break;\n\n      }\n\n      this.$toasted.show((variant),{type:type})\n\n    },\n    send(formdata){\n\n      this.loadanotherpage=true\n      formdata.append('accident_id',this.rowes.id)\n      axios.post(constants.resource_url+'accidents/save-drawing',formdata,\n          {\n            headers: {\n              'Content-Type': 'multipart/form-data'\n            }}\n      )\n          .then(list => {\n\n            console.log('ajouté',list.data)\n            console.log('ajouté',list.data.success)\n\n            if(list.data.success){\n              //build object path\n              this.loadanotherpage=false\n              this.makeToast(this.$t('Croquis de l\\'image ajouté' ),1)\n              this.$router.push({name: 'accidents'})\n            }else{\n              this.makeToast(this.$t('erreur lors de l\\'ajout de l\\'image'),0)\n            }\n\n            console.log('care',list.data.data)\n          })\n          .catch(function(error) {\n            console.log('products_error',error);\n            // Handle Errors here.\n            // var errorCode = error.code;\n\n          });\n\n    }\n  }\n}\n\n</script>"]}]}