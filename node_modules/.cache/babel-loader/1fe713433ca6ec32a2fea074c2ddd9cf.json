{"remainingRequest":"C:\\wamp64\\www\\toolsmctc\\node_modules\\babel-loader\\lib\\index.js!C:\\wamp64\\www\\toolsmctc\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\wamp64\\www\\toolsmctc\\src\\router\\index.js","dependencies":[{"path":"C:\\wamp64\\www\\toolsmctc\\src\\router\\index.js","mtime":1603903165789},{"path":"C:\\wamp64\\www\\toolsmctc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\toolsmctc\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\toolsmctc\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZVJvdXRlciBmcm9tICd2dWUtcm91dGVyJzsgLy9pbXBvcnQgYXV0aGVudGljYXRlIGZyb20gIi4uL2F1dGgvYXV0aGVudGljYXRlIjsKCmltcG9ydCBzdG9yZSBmcm9tICdwbHVnaW4tdnVlanMta2V5Y2xvYWsnOwppbXBvcnQgc2VjdXJpdHkgZnJvbSAncGx1Z2luLXZ1ZWpzLWtleWNsb2FrL3NlY3VyaXR5JzsKVnVlLnVzZShWdWVSb3V0ZXIpOwp2YXIgcm91dGVzID0gW3sKICBwYXRoOiAiLyIsCiAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICByZXR1cm4gaW1wb3J0KCIuLi92aWV3cy9hcHAiKTsKICB9LAogIC8vd2VicGFja0NodW5rTmFtZSBhcHAKICBtZXRhOiB7CiAgICByZXF1aXJlc0F1dGg6IHRydWUsCiAgICByb2xlczogWyd1c2VyJ10KICB9LAogIHJlZGlyZWN0OiAiL2FwcC9ib3gvb3BlbiIsCiAgY2hpbGRyZW46IFt7CiAgICBwYXRoOiAiL2FwcC9ib3giLAogICAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoIi4uL3ZpZXdzL2FwcC9jYWlzc2VzIik7CiAgICB9LAogICAgY2hpbGRyZW46IFt7CiAgICAgIHBhdGg6ICJvcGVuIiwKICAgICAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICAgICAgcmV0dXJuIGltcG9ydCgiLi4vdmlld3MvYXBwL2NhaXNzZXMvYm94Iik7CiAgICAgIH0KICAgIH1dCiAgfV0KfSwgewogIHBhdGg6ICIvYXV0aCIsCiAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICByZXR1cm4gaW1wb3J0KCIuLi92aWV3cy9hcHAvc2Vzc2lvbnMiKTsKICB9LAogIC8vcmVkaXJlY3Q6ICIvYXBwL3Nlc3Npb25zL3NpZ25JbiIsCiAgY2hpbGRyZW46IFt7CiAgICBwYXRoOiAic2lnbkluIiwKICAgIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgICByZXR1cm4gaW1wb3J0KCIuLi92aWV3cy9hcHAvc2Vzc2lvbnMvc2lnbkluIik7CiAgICB9CiAgfV0KfV07CnZhciByb3V0ZXIgPSBuZXcgVnVlUm91dGVyKHsKICByb3V0ZXM6IHJvdXRlcwp9KTsKcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgaWYgKHRvLm1ldGEucmVxdWlyZXNBdXRoKSB7CiAgICB2YXIgYXV0aCA9IHN0b3JlLnN0YXRlLnNlY3VyaXR5LmF1dGg7CgogICAgaWYgKCFhdXRoLmF1dGhlbnRpY2F0ZWQpIHsKICAgICAgc2VjdXJpdHkuaW5pdChuZXh0LCB0by5tZXRhLnJvbGVzKTsKICAgIH0gZWxzZSB7CiAgICAgIGlmICh0by5tZXRhLnJvbGVzKSB7CiAgICAgICAgaWYgKHNlY3VyaXR5LnJvbGVzKHRvLm1ldGEucm9sZXNbMF0pKSB7CiAgICAgICAgICBuZXh0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG5leHQoewogICAgICAgICAgICBuYW1lOiAndW5hdXRob3JpemVkJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIG5leHQoKTsKICAgICAgfQogICAgfQogIH0gZWxzZSB7CiAgICBuZXh0KCk7CiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["C:/wamp64/www/toolsmctc/src/router/index.js"],"names":["Vue","VueRouter","store","security","use","routes","path","component","meta","requiresAuth","roles","redirect","children","router","beforeEach","to","from","next","auth","state","authenticated","init","name"],"mappings":";AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB,C,CACA;;AAEA,OAAOC,KAAP,MAAkB,uBAAlB;AACA,OAAOC,QAAP,MAAqB,gCAArB;AAEAH,GAAG,CAACI,GAAJ,CAAQH,SAAR;AAEA,IAAMI,MAAM,GAAG,CACX;AACIC,EAAAA,IAAI,EAAE,GADV;AAEIC,EAAAA,SAAS,EAAE;AAAA,WAAM,OAAO,cAAP,CAAN;AAAA,GAFf;AAE6C;AACzCC,EAAAA,IAAI,EAAE;AAAEC,IAAAA,YAAY,EAAE,IAAhB;AAAsBC,IAAAA,KAAK,EAAE,CAAC,MAAD;AAA7B,GAHV;AAIIC,EAAAA,QAAQ,EAAE,eAJd;AAKIC,EAAAA,QAAQ,EAAE,CACN;AACIN,IAAAA,IAAI,EAAE,UADV;AAEIC,IAAAA,SAAS,EAAE;AAAA,aAAM,OAAO,sBAAP,CAAN;AAAA,KAFf;AAGIK,IAAAA,QAAQ,EAAE,CACN;AACIN,MAAAA,IAAI,EAAE,MADV;AAEIC,MAAAA,SAAS,EAAE;AAAA,eAAM,OAAO,0BAAP,CAAN;AAAA;AAFf,KADM;AAHd,GADM;AALd,CADW,EAmBX;AACID,EAAAA,IAAI,EAAE,OADV;AAEIC,EAAAA,SAAS,EAAE;AAAA,WAAM,OAAO,uBAAP,CAAN;AAAA,GAFf;AAGI;AACAK,EAAAA,QAAQ,EAAE,CACN;AACIN,IAAAA,IAAI,EAAE,QADV;AAEIC,IAAAA,SAAS,EAAE;AAAA,aAAM,OAAO,8BAAP,CAAN;AAAA;AAFf,GADM;AAJd,CAnBW,CAAf;AAiCA,IAAMM,MAAM,GAAG,IAAIZ,SAAJ,CAAc;AAC3BI,EAAAA,MAAM,EAANA;AAD2B,CAAd,CAAf;AAIAQ,MAAM,CAACC,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AAClC,MAAIF,EAAE,CAACP,IAAH,CAAQC,YAAZ,EAA0B;AAEtB,QAAMS,IAAI,GAAGhB,KAAK,CAACiB,KAAN,CAAYhB,QAAZ,CAAqBe,IAAlC;;AACA,QAAI,CAACA,IAAI,CAACE,aAAV,EAAyB;AACrBjB,MAAAA,QAAQ,CAACkB,IAAT,CAAcJ,IAAd,EAAoBF,EAAE,CAACP,IAAH,CAAQE,KAA5B;AACH,KAFD,MAGK;AACD,UAAIK,EAAE,CAACP,IAAH,CAAQE,KAAZ,EAAmB;AACf,YAAIP,QAAQ,CAACO,KAAT,CAAeK,EAAE,CAACP,IAAH,CAAQE,KAAR,CAAc,CAAd,CAAf,CAAJ,EAAsC;AAClCO,UAAAA,IAAI;AACP,SAFD,MAGK;AACDA,UAAAA,IAAI,CAAC;AAAEK,YAAAA,IAAI,EAAE;AAAR,WAAD,CAAJ;AACH;AACJ,OAPD,MAQK;AACDL,QAAAA,IAAI;AACP;AACJ;AACJ,GAnBD,MAoBK;AACDA,IAAAA,IAAI;AACP;AACJ,CAxBD;AA0BA,eAAeJ,MAAf","sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\n//import authenticate from \"../auth/authenticate\";\n\nimport store from 'plugin-vuejs-keycloak'\nimport security from 'plugin-vuejs-keycloak/security'\n\nVue.use(VueRouter)\n\nconst routes = [\n    {\n        path: \"/\",\n        component: () => import(\"../views/app\"), //webpackChunkName app\n        meta: { requiresAuth: true, roles: ['user'] },\n        redirect: \"/app/box/open\",\n        children: [\n            {\n                path: \"/app/box\",\n                component: () => import(\"../views/app/caisses\"),\n                children: [\n                    {\n                        path: \"open\",\n                        component: () => import(\"../views/app/caisses/box\")\n                    }]\n            }\n            ]\n\n    },\n    {\n        path: \"/auth\",\n        component: () => import(\"../views/app/sessions\"),\n        //redirect: \"/app/sessions/signIn\",\n        children: [\n            {\n                path: \"signIn\",\n                component: () => import(\"../views/app/sessions/signIn\")\n            },\n\n        ]\n    },\n]\n\nconst router = new VueRouter({\n  routes\n})\n\nrouter.beforeEach((to, from, next) => {\n    if (to.meta.requiresAuth) {\n\n        const auth = store.state.security.auth\n        if (!auth.authenticated) {\n            security.init(next, to.meta.roles)\n        }\n        else {\n            if (to.meta.roles) {\n                if (security.roles(to.meta.roles[0])) {\n                    next()\n                }\n                else {\n                    next({ name: 'unauthorized' })\n                }\n            }\n            else {\n                next()\n            }\n        }\n    }\n    else {\n        next()\n    }\n})\n\nexport default router\n"]}]}