{"remainingRequest":"C:\\Users\\WORLDNEWS\\Desktop\\CATIS COLLECTE\\collectedonnee\\collectedonnee\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\WORLDNEWS\\Desktop\\CATIS COLLECTE\\collectedonnee\\collectedonnee\\src\\views\\app\\caisses\\box.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\WORLDNEWS\\Desktop\\CATIS COLLECTE\\collectedonnee\\collectedonnee\\src\\views\\app\\caisses\\box.vue","mtime":1660044778000},{"path":"C:\\Users\\WORLDNEWS\\Desktop\\CATIS COLLECTE\\collectedonnee\\collectedonnee\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WORLDNEWS\\Desktop\\CATIS COLLECTE\\collectedonnee\\collectedonnee\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\WORLDNEWS\\Desktop\\CATIS COLLECTE\\collectedonnee\\collectedonnee\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WORLDNEWS\\Desktop\\CATIS COLLECTE\\collectedonnee\\collectedonnee\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgogICAgaW1wb3J0IEF1dG9Db21wbGV0ZSBmcm9tICIuL0F1dG9jb21wbGV0ZSIKICAgIGltcG9ydCB1c2VBdXRvY29tcGxldGUgZnJvbSAnLi4vLi4vLi4vc3RvcmUvbW9kdWxlcy91c2VBdXRvY29tcGxldGUnCiAgICBpbXBvcnQgQ2F0cHJvZHVjdGVzIGZyb20gIi4vY2F0cHJvZHVjdGVzIgogICAgaW1wb3J0IHNhbGVzcmVjZWlwdCBmcm9tICIuL3NhbGVzcmVjZWlwdCIKICAgIGltcG9ydCBiaWxhbiBmcm9tICIuLi9jb21wb25lbnRzL2JpbGFuIgogICAgLy9pbXBvcnQgcmVnaXN0ZXJQYXJ0bmVycyBmcm9tICIuLi9jb21wb25lbnRzL3JlZ2lzdGVycGFydG5lcnMiCiAgICBpbXBvcnQgcmVmZXJlbmNlIGZyb20gIi4uL2NvbXBvbmVudHMvcmVmZXJlbmNlIgogICAgaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnCiAgICBpbXBvcnQgY29uc3RhbnRzIGZyb20gJy4uLy4uLy4uL3BsdWdpbnMvY29uc3RhbnRzJwogICAgaW1wb3J0IHsgbWFwR2V0dGVycyxtYXBBY3Rpb25zIH0gZnJvbSAidnVleCI7CgoKCiAgICAvL2ltcG9ydCBWdWUgZnJvbSAndnVlJwogICAgaW1wb3J0IHsgbWFrZVRvYXN0IH0gZnJvbSAnLi4vLi4vLi4vcGx1Z2lucy9mdW5jdGlvbnMnCgoKICAgIGV4cG9ydCBkZWZhdWx0IHsKCiAgICAgICAgbWV0YUluZm86IHsKICAgICAgICAgICAgdGl0bGU6ICJDYWlzc2UiCiAgICAgICAgfSwKCiAgICAgICAgZGF0YSgpIHsKICAgICAgICAgICAgcmV0dXJuIHsKCiAgICAgICAgICAgICAgICBudW1lcm9jb250YWN0czoiIiwKICAgICAgICAgICAgICAgIGZvcmNhcmQ6ZmFsc2UsCiAgICAgICAgICAgICAgICBvcGVuYjp0cnVlLAogICAgICAgICAgICAgICAgY2xvc2ViOnRydWUsCiAgICAgICAgICAgICAgICBjaGFzc2k6ImNoYXNzaXMiLAogICAgICAgICAgICAgICAgc2VsZWN0aG9sZHZhcjpmYWxzZSwKICAgICAgICAgICAgICAgIHJlc291cmNlc191cmxzOmNvbnN0YW50cy5yZXNvdXJjZV91cmxzLAogICAgICAgICAgICAgICAgZGF0ZTogbmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygpLAogICAgICAgICAgICAgICAgY2F0OltdLAogICAgICAgICAgICAgICAgdXNlcmlucHV0OiIiLAogICAgICAgICAgICAgICAgYm94b3BlbjpmYWxzZSwKICAgICAgICAgICAgICAgIGNvbnRhY3RzSWQ6NSwKICAgICAgICAgICAgICAgIGJveDp0cnVlLAogICAgICAgICAgICAgICAgbW9kYWx0YXg6ZmFsc2UsCiAgICAgICAgICAgICAgICBlbmNhaXNzZW1lbnRzOnt9LAogICAgICAgICAgICAgICAgYmlsYW46e30sCgogICAgICAgICAgICAgICAgZm9ybTogewogICAgICAgICAgICAgICAgICAgIG51bV90aWNrZXQ6JzEyMycsCiAgICAgICAgICAgICAgICAgICAgbW9udGFudF9lbmNhaXNzZTowLAogICAgICAgICAgICAgICAgICAgIFJlZmVyZW5jZToiIiwKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiIiwKICAgICAgICAgICAgICAgICAgICBlbWFpbDogIiIsCiAgICAgICAgICAgICAgICAgICAgZW1haWxzOiAiIiwKICAgICAgICAgICAgICAgICAgICBmTmFtZTogIiIsCiAgICAgICAgICAgICAgICAgICAgbE5hbWU6ICIiLAogICAgICAgICAgICAgICAgICAgIHBob25lOiAiIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG91dmVydHVyZUFtb3VudDowLAogICAgICAgICAgICAgICAgcmVzdWx0c2VhcmNoOltdLAogICAgICAgICAgICAgICAgc2VsZWN0aW9uOltdLAogICAgICAgICAgICAgICAgTW9udGFudF90b3RhbDowLAogICAgICAgICAgICAgICAgaW52b2ljZV90YXg6IDAsCiAgICAgICAgICAgICAgICBpbnZvaWNlX3RheHM6IDAsCiAgICAgICAgICAgICAgICBpbnZvaWNlX3RvdGFsOiAwLAogICAgICAgICAgICAgICAgc2hvd01vZGFsOnRydWUsCiAgICAgICAgICAgICAgICBjbGllbnRzOltdLAogICAgICAgICAgICAgICAgcHJvZHVjdHM6W10sCiAgICAgICAgICAgICAgICBzaG93OmZhbHNlLAogICAgICAgICAgICAgICAgY3VzdG9tZXJGb3JtOgogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgY25pOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgbm9tOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgcHJlbm9tOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICBiaXJ0aGRheToiIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3BvcnQ6IiIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pX2RlX2NvbmR1aXJlOiIiLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgc2VhcmNoOmZhbHNlLAogICAgICAgICAgICAgICAgY29udGFjdDp7CiAgICAgICAgICAgICAgICAgICAgTmFtZToiIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHZlbmRldXI6ewogICAgICAgICAgICAgICAgICAgIE5hbWU6IiIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBkb2N1bWVudDoiY2ciLAogICAgICAgICAgICAgICAgdmFyaWFudDoiIiwKICAgICAgICAgICAgICAgIGNvdW50cnk6dGhpcy4kc3RvcmUuc3RhdGUuYXV0aERhdGEuY291bnRyeSwKICAgICAgICAgICAgICAgIGxpc3Rwcm9kdWN0czpbCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgbGlzdHRheDpbCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgdGF4OltdLAogICAgICAgICAgICAgICAgc3RhdHV0ZTpmYWxzZSwKICAgICAgICAgICAgICAgIHNob3dfcmVmZXI6ZmFsc2UsCiAgICAgICAgICAgICAgICBzZWxlY3Rob2xkOnt9LAogICAgICAgICAgICAgICAgdGF4ZXM6W10sCiAgICAgICAgICAgICAgICBzZWxlY3RlZDpbXSwKICAgICAgICAgICAgICAgIG9wdGlvbnNLZXk6Im5vbSIsCiAgICAgICAgICAgICAgICBvcHRpb25zS2V5MToicHJlbm9tIiwKICAgICAgICAgICAgICAgIGZpZWxkczogWyJEw6lzaWduYXRpb24iLCAiUmVmZXJlbmNlIiwgIkRvY3VtZW50IiwiUHJpeCIsIlRheGVzIiwiQWN0aW9ucyJdLAogICAgICAgICAgICAgICAgLy9maWVsZDogWyJEw6lzaWduYXRpb24iLCAiUHJpeCIsIlByaXgiXSwKICAgICAgICAgICAgICAgIGZpZWxkOiIiLAogICAgICAgICAgICAgICAgaG9sZGxpc3Q6W10sCiAgICAgICAgICAgICAgICBlbmNvbXB0ZTpmYWxzZSwKICAgICAgICAgICAgICAgIGNvZGVwYXlzOicnLAogICAgICAgICAgICAgICAgZGV2aXNlOicnLAogICAgICAgICAgICAgICAgbnVtZXJvY2xpZW50OiIiLAogICAgICAgICAgICAgICAgY2VydGlkb2NzaWQ6MAogICAgICAgICAgICB9OwogICAgICAgIH0sCiAgICAgICAgYmVmb3JlTW91bnQoKXsKCiAgICAgICAgICB0aGlzLmNvZGVwYXlzID0gdGhpcy4kaTE4bi5sb2NhbGUKICAgICAgICAgICAgdGhpcy5kZXZpc2UgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGV2aXNlJykKCiAgICAgICAgICAgIHRoaXMuYm94b3BlbiA9IHRoaXMuc3RyaW5nVG9Cb29sZWFuKChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYm94b3BlbicpKSk7CiAgICAgICAgICAgIHRoaXMuc2hvdyA9IChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYm94c2hvdycpIT1udWxsKT8odGhpcy5zdHJpbmdUb0Jvb2xlYW4oKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdib3hzaG93JykpKSk6IiIgOwoKCiAgICAgICAgICAgIHRoaXMuY2hlY2tzZXNzaW9uZSgpCiAgICAgICAgICAgIC8vdGhpcy5ob2xkbGlzdGUoKQogICAgICAgICAgICBjb25zb2xlLmxvZygnY29kZXBheWVzJyx0aGlzLiRzdG9yZS5zdGF0ZS5hdXRoRGF0YS5yb2xlKQoKICAgICAgICAgICAgaWYodGhpcy4kc3RvcmUuc3RhdGUuYXV0aERhdGEucm9sZS5pbmRleE9mKCdjZycpICE9PSAtMSl7CiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICdhbGx2aXNpdF9saXN0JywgcGFyYW1zOiB7IGlkOiAnMCcgfX0pCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYodGhpcy4kc3RvcmUuc3RhdGUuYXV0aERhdGEucm9sZS5pbmRleE9mKCdjb250cm9sZXVyJykgIT09IC0xKXsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAndmlzaXRfc3RhcnQnfSkKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICB9LAogICAgICAgIGZpbHRlcnM6ewogICAgICAgICAgICBtb21lbnRlczogZnVuY3Rpb24gKGRhdGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBtb21lbnQoZGF0ZSkuZm9ybWF0KCd5eXl5LU1NLWRkIEhIOm1tJyk7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBjdXJyZW5jeXM6ZnVuY3Rpb24gKHZhbHVlLGNvZGVwYXlzLGRldmlzZSkgewoKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSW50bC5OdW1iZXJGb3JtYXQoY29kZXBheXMsIHsgc3R5bGU6ICdjdXJyZW5jeScsIGN1cnJlbmN5OiBkZXZpc2UgfSkuZm9ybWF0KHZhbHVlKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY3VycmVuY3lzb3V0OmZ1bmN0aW9uICh2YWx1ZSxjb2RlcGF5cyxkZXZpc2UpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbnRsJyx2YWx1ZSkKICAgICAgICAgICAgICAgIHZhciBpbnRsID0gIG5ldyBJbnRsLk51bWJlckZvcm1hdChjb2RlcGF5cywgeyBzdHlsZTogJ2N1cnJlbmN5JywgY3VycmVuY3k6IGRldmlzZSB9KS5mb3JtYXQodmFsdWUpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2ludGwnLGludGwpCiAgICAgICAgICAgICAgICByZXR1cm4gaW50bC5yZXBsYWNlKGRldmlzZSwnJykKICAgICAgICAgICAgfQoKICAgICAgICB9LAogICAgICAgIGNvbXBvbmVudHM6e3NhbGVzcmVjZWlwdCwgQXV0b0NvbXBsZXRlLENhdHByb2R1Y3RlcyxiaWxhbixyZWZlcmVuY2V9LAogICAgICAgIGNvbXB1dGVkOiB7CgogICAgICAgICAgICAuLi5tYXBHZXR0ZXJzKFsiZ2V0U3RhdHVzSG9sZCIsImdldFByb2R1Y3RzIiwiZ2V0Q3VzdG9tZXJzIiwiZ2V0Q3VzdG9tZXIiLCJnZXRTdGF0dXMiLCJnZXRDYXRQcm9kdWN0cyIsIkdldEJveCIsIkdFVEJJTEFOIiwiR2V0RW5jYWlzc2VtZW50cyIsImdldE9iamV0SG9sZCIsCiAgICAgICAgICAgICAgICAiZ2V0SG9sZExpc3QiLCJnZXRTZWxlY3RIb2xkIiwiR2V0UHJvZHVjdHNIb2xkIiwiTW92ZVByb2R1Y3RzSG9sZCIsIkdldEJveE9wZW4iLCJHZXRDYWlzc2VPcGVuIiwiR2V0Q0hFQ0tTRVNTSU9OIiwiR2V0UmVtb3ZlQWxsUHJvZHVjdHMiXSksCgogICAgICAgIH0sCgogICAgICAgIG1ldGhvZHM6IHsKICAgICAgICAgICAgLi4ubWFwQWN0aW9ucyhbIkZldGNoQ2F0UHJvZHVjdHMiLCJGZXRjaFNhbGVzUHJvZHVjdHMiLCJyZWdpc3RlckN1c3RvbSIsIkZldGNoUHJvZHVjdHMiLAogICAgICAgICAgICAgICAgIkZldGNoU2VsbGVycyIsIkZldGNoQ29udGFjdHMiLCJGZXRjaEN1c3RvbWVycyIsImluQWNjb3VudHMiCiAgICAgICAgICAgICAgICAsImluQm94cyIsImFkZGhvbGQiLCJjbG9zZWJveCIsIm9wZW5ib3hzIiwicmVtb3ZlaG9sZCIsImNoZWNrc2Vzc2lvbmUiLCJob2xkbGlzdGUiLCJTZWxlY3RIb2xkcyIsImdldFByb2R1Y3RzSG9sZCIsImFkZFByb2R1Y3RzSG9sZCIsInJlbW92ZVByb2R1Y3RzSG9sZCIsInJlbW92ZUFsbFByb2R1Y3RzSG9sZCJdKSwKCiAgICAgICAgICAgIGNvbnRhY3RzdXBkYXRlKCl7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5jYXRlZ29yaWVwcm9kdWN0cy5jb250YWN0c0lkID0gIiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2xpZW50c3VwZGF0ZSgpewogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuY2F0ZTU3Z29yaWVwcm9kdWN0cy5jbGllbnRzSWQgPSAiIgogICAgICAgICAgICB9LAoKICAgICAgICAgICAgcmVzZXRXaW5kb3dzOiBmdW5jdGlvbiAoKXsKCiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmNoaWxkQXV0by5yZXNldFdpbmRvdygpOwogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5jaGlsZEF1dG9zLnJlc2V0V2luZG93KCk7CiAgICAgICAgICAgICAgICB0aGlzLmZvcm0uUmVmZXJlbmNlID0gIiAiCgogICAgICAgICAgICB9LAoKICAgICAgICAgICAgc2F2ZWNoYW5nZShkYXRhKXsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2F2ZWNoYW5nZScsZGF0YSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHN3aXRjaChkYXRhLm1zZyl7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NsaWVudHMnOgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm51bWVyb2NsaWVudCA9IGRhdGEuaXRlbS50ZWxlcGhvbmUKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuY2F0ZWdvcmllcHJvZHVjdHMubm9tY2xpZW50ID0gZGF0YS5pdGVtLm5vbSArICIgIiArZGF0YS5pdGVtLnByZW5vbQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5jYXRlZ29yaWVwcm9kdWN0cy5jbGllbnRzSWQgPSBkYXRhLml0ZW0uY2xpZW50SWQKCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICBjYXNlICdjb250YWN0cyc6CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm51bWVyb2NvbnRhY3RzID0gZGF0YS5pdGVtLnRlbGVwaG9uZQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5jYXRlZ29yaWVwcm9kdWN0cy5ub21jb250YWN0cyA9IGRhdGEuaXRlbS5ub20gKyAiICIgK2RhdGEuaXRlbS5wcmVub20KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuY2F0ZWdvcmllcHJvZHVjdHMuY29udGFjdHNJZCA9IGRhdGEuaXRlbS5jb250YWN0SWQKCQkJCQkJCgkJCQkJCWNvbnNvbGUubG9nKCdzdGF0ZScsdGhpcy4kc3RvcmUuc3RhdGUuY2F0ZWdvcmllcHJvZHVjdHMuY29udGFjdHNJZCkKCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlZmVyZW5jZSc6CgogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2V0cmVmZXJlbmNlKHZhbHVlKXsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmb3JtJywnZm9ybScpCiAgICAgICAgICAgICAgICB0aGlzLmZvcm0uUmVmZXJlbmNlPXZhbHVlCgogICAgICAgICAgICB9LAogICAgICAgICAgICBvcGVubW9kYWxib3goKXsKICAgICAgICAgICAgICAgIHRoaXMuJGJ2TW9kYWwuc2hvdygnY29uZmlybW9wZW5BY2NvdW50JykKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2xvc2Vtb2RhbGJveCgpewogICAgICAgICAgICAgICAgdGhpcy4kYnZNb2RhbC5zaG93KCdjb25maXJtY2xvc2VBY2NvdW50JykKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2V0b3ZlcmxheSh2YWx1ZSl7CiAgICAgICAgICAgICAgICBpZighdGhpcy5mb3JjYXJkKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcmNhcmQgPSB2YWx1ZQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2V0bGlzdHByKHZhbHVlKXsKCiAgICAgICAgICAgICAgICB0aGlzLmZvcmNhcmQgPSBmYWxzZQogICAgICAgICAgICAgICAgaWYodGhpcy5zZWFyY2gpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dfcmVmZXIgPSAhdGhpcy5zaG93X3JlZmVyCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZih2YWx1ZVswXS5wcm9kdWl0IT1udWxsKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3RzPXZhbHVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NldGxpc3RwcicsdmFsdWVbMF0ucHJvZHVpdCkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3RyaW5nVG9Cb29sZWFuOiBmdW5jdGlvbihzdHJpbmcpewoKICAgICAgICAgICAgICAgIGlmKHN0cmluZyE9bnVsbCl7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoKHN0cmluZy50cmltKCkpewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJ0cnVlIjogY2FzZSAieWVzIjogY2FzZSAiMSI6IHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJmYWxzZSI6IGNhc2UgIm5vIjogY2FzZSAiMCI6IGNhc2UgbnVsbDogcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gQm9vbGVhbihzdHJpbmcpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwcmludCAoKXsKICAgICAgICAgICAgICAgIC8vIFBhc3MgdGhlIGVsZW1lbnQgaWQgaGVyZQogICAgICAgICAgICAgICAgdGhpcy4kaHRtbFRvUGFwZXIoJ3ByaW50TWUnKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2FuY2VscyAoKXsKICAgICAgICAgICAgICAgIC8vIFBhc3MgdGhlIGVsZW1lbnQgaWQgaGVyZQogICAgICAgICAgICAgICAgdGhpcy5ib3g9ZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLiRidk1vZGFsLmhpZGUoJ3Rlc3RzJykKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjYW5jZWxzJyx0aGlzLmJveCkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2xvc2VjYWlzc2UoKXsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2xvc2UnKQogICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVob2xkKHtudW1iZXI6dGhpcy5zZWxlY3Rob2xkLm51bWJlcixjbG9zZTp0cnVlfSkKICAgICAgICAgICAgICAgIC8vdGhpcy5yZW1vdmVBbGxQcm9kdWN0c0hvbGQoe251bWJlcjp0aGlzLnNlbGVjdGhvbGQubnVtYmVyLHNlc3Npb25DYWlzc2VJZDpsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic2Vzc2lvbmNhaXNzZSIpfSkKCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlZ2lzdGVyQ3VzdG9tZXIodmFyaWFudCA9IG51bGwpIHsKCiAgICAgICAgICAgICAgICAvKiBzZXRUaW1lb3V0KCgpID0+IHsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5yZWdpc3RlclBhcnRuZXJzLnJlZ2lzdGVycCh0cnVlKQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdoZWxsbycsdGhpcy5mb3JtYXR0ZWRyZWZlcmVuY2VWYWx1ZSkKCiAgICAgICAgICAgICAgICB9LDQwMDApOyovCgogICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlckN1c3RvbSh2YXJpYW50KQogICAgICAgICAgICAgICAgdGhpcy52YXJpYW50ICA9IHZhcmlhbnQKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVsYW5kZXMnLHZhcmlhbnQpCgogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy9BdWN1biBQcm9kdWl0IFNlbGVjdGlvbm5lCiAgICAgICAgICAgIGluQWNjb3VudCgpIHsKCiAgICAgICAgICAgICAgICB0aGlzLnNob3c9IXRoaXMuc2hvdwogICAgICAgICAgICAgICAgdGhpcy4kYnZNb2RhbC5oaWRlKCdjb25maXJtaW5BY2NvdW50JykKCiAgICAgICAgICAgICAgICB0aGlzLmluQWNjb3VudHMoCgogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVpdFZ1ZTp0aGlzLmxpc3Rwcm9kdWN0cywKICAgICAgICAgICAgICAgICAgICAgICAgbW9udGFudFRvdGFsOnRoaXMuaW52b2ljZV90b3RhbCwKICAgICAgICAgICAgICAgICAgICAgICAgbW9udGFudEhUOnRoaXMuTW9udGFudF90b3RhbCwKICAgICAgICAgICAgICAgICAgICAgICAgbW9udGFudEVuY2Fpc3NlOnRoaXMuZm9ybS5tb250YW50X2VuY2Fpc3NlLAogICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uQ2Fpc3NlSWQ6bG9jYWxTdG9yYWdlLmdldEl0ZW0oInNlc3Npb25jYWlzc2UiKSwKICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50SWQ6dGhpcy4kc3RvcmUuc3RhdGUuY2xpZW50c0lkLAogICAgICAgICAgICAgICAgICAgICAgICB2ZW5kZXVySWQ6dGhpcy4kc3RvcmUuc3RhdGUudmVuZGV1cnNJZCwKICAgICAgICAgICAgICAgICAgICAgICAgY29udGFjdElkOnRoaXMuJHN0b3JlLnN0YXRlLmNvbnRhY3RzSWQsCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6MCwKICAgICAgICAgICAgICAgICAgICAgICAgbGFuZzogdGhpcy4kaTE4bi5sb2NhbGUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAgLy90aGlzLmluQWNjb3VudHMoKQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgbGF1bmNoQm94KCl7CgogICAgICAgICAgCgkJCQljb25zb2xlLmxvZygnc3RhdGUnLHRoaXMuJHN0b3JlLnN0YXRlLmNhdGVnb3JpZXByb2R1Y3RzLm5vbWNvbnRhY3RzLmxlbmd0aCkKCQkJCWNvbnNvbGUubG9nKCdzdGF0ZScsdGhpcy4kc3RvcmUuc3RhdGUuY2F0ZWdvcmllcHJvZHVjdHMubm9tY29udGFjdHMpCgkJCQljb25zb2xlLmxvZygnc3RhdGUnLHRoaXMubnVtZXJvY29udGFjdHMubGVuZ3RoKQoJCQkJY29uc29sZS5sb2coJ3N0YXRlJyx0aGlzLm51bWVyb2NvbnRhY3RzKQoKICAgICAgICAgICAgICAgIC8qaWYodGhpcy5jZXJ0aWRvY3NpZD09PTApewogICAgICAgICAgICAgICAgICAgIHRoaXMubWFrZVRvYXN0KHRoaXMuJHQoJ2FkZCBjZXJ0aWRvY3NJZCcpLCdlcnJvcicpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDsKICAgICAgICAgICAgICAgIH0qLwoKCQkJCQogICAgICAgICAgICAgICAgLy9pZih0aGlzLiRzdG9yZS5zdGF0ZS5jYXRlZ29yaWVwcm9kdWN0cy5ub21jb250YWN0cy5sZW5ndGg9PT0wIHx8IHRoaXMubnVtZXJvY29udGFjdHMubGVuZ3RoPT09MCl7CiAgICAgICAgICAgICAgICBpZih0aGlzLiRzdG9yZS5zdGF0ZS5jYXRlZ29yaWVwcm9kdWN0cy5ub21jb250YWN0cy5sZW5ndGg9PT0wIHx8IHRoaXMubnVtZXJvY29udGFjdHMubGVuZ3RoPT09MCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWtlVG9hc3QodGhpcy4kdCgnc2VsZWN0X2NvbnRhY3QnKSwnZXJyb3InKQogICAgICAgICAgICAgICAgICAgIHJldHVybiA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYodGhpcy5saXN0cHJvZHVjdHMubGVuZ3RoPT09MCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWtlVG9hc3QodGhpcy4kdCgnbm9fcHJvZHVjdCcpLCdlcnJvcicpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZih0aGlzLmZvcm0ubW9udGFudF9lbmNhaXNzZT09PTApewogICAgICAgICAgICAgICAgICAgIHRoaXMubWFrZVRvYXN0KHRoaXMuJHQoJ3doaWNoX2Ftb3VudCcpLCdlcnJvcicpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuZW5jb21wdGUgPSBmYWxzZQoKICAgICAgICAgICAgICAgIHRoaXMuJGJ2TW9kYWwuc2hvdygnY29uZmlybWluQm94JykKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGxhdW5jaEFjY291bnQoKXsKCQkJCiAgICAgICAgICAgICAgICBpZih0aGlzLiRzdG9yZS5zdGF0ZS5jYXRlZ29yaWVwcm9kdWN0cy5jb250YWN0c0lkPT09MCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWtlVG9hc3QodGhpcy4kdCgnc2VsZWN0X2NvbnRhY3QnKSwnZXJyb3InKQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGJ2TW9kYWwuaGlkZSgnY29uZmlybWluQWNjb3VudCcpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDsKICAgICAgICAgICAgICAgIH0KCgogICAgICAgICAgICAgICAgaWYodGhpcy5saXN0cHJvZHVjdHMubGVuZ3RoID09PSAwKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1ha2VUb2FzdCh0aGlzLiR0KCdub19wcm9kdWN0JyksJ2Vycm9yJykKICAgICAgICAgICAgICAgICAgICB0aGlzLiRidk1vZGFsLmhpZGUoJ2NvbmZpcm1pbkFjY291bnQnKQogICAgICAgICAgICAgICAgICAgIHJldHVybiA7CiAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICAgIGlmKHRoaXMuZm9ybS5tb250YW50X2VuY2Fpc3NlID4gMCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWtlVG9hc3QodGhpcy4kdCgnbW9udGFudF9lbmNhaXNzZV9udWxsJyksJ2Vycm9yJykKICAgICAgICAgICAgICAgICAgICB0aGlzLiRidk1vZGFsLmhpZGUoJ2NvbmZpcm1pbkFjY291bnQnKQogICAgICAgICAgICAgICAgICAgIHJldHVybiA7CiAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICAgIHRoaXMuZW5jb21wdGUgPSB0cnVlCiAgICAgICAgICAgICAgICB0aGlzLiRidk1vZGFsLnNob3coJ2NvbmZpcm1pbkFjY291bnQnKQoKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGluQm94KCkgewoKICAgICAgICAgICAgICAgIHRoaXMuJGJ2TW9kYWwuaGlkZSgnY29uZmlybWluQm94JykKICAgICAgICAgICAgICAgIHRoaXMuc2hvdz10cnVlCgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NvbnRhY3RJRCcsdGhpcy4kc3RvcmUuc3RhdGUuY2F0ZWdvcmllcHJvZHVjdHMuY29udGFjdHNJZCkKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjbGllbnRJZCcsdGhpcy4kc3RvcmUuc3RhdGUuY2F0ZWdvcmllcHJvZHVjdHMuY2xpZW50c0lkKQoKCiAgICAgICAgICAgICAgICB0aGlzLmluQm94cygKCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWl0VnVlOnRoaXMubGlzdHByb2R1Y3RzLAogICAgICAgICAgICAgICAgICAgICAgICBtb250YW50VG90YWw6dGhpcy5pbnZvaWNlX3RvdGFsLAogICAgICAgICAgICAgICAgICAgICAgICBtb250YW50SFQ6dGhpcy5Nb250YW50X3RvdGFsLAogICAgICAgICAgICAgICAgICAgICAgICBtb250YW50RW5jYWlzc2U6dGhpcy5mb3JtLm1vbnRhbnRfZW5jYWlzc2UsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25DYWlzc2VJZDpsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic2Vzc2lvbmNhaXNzZSIpLAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOih0aGlzLmxpc3Rwcm9kdWN0c1swXS5saWJlbGxlPT09J2RlYycpPzI6MSwKICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50SWQ6dGhpcy4kc3RvcmUuc3RhdGUuY2F0ZWdvcmllcHJvZHVjdHMuY2xpZW50c0lkLAogICAgICAgICAgICAgICAgICAgICAgICB2ZW5kZXVySWQ6dGhpcy4kc3RvcmUuc3RhdGUuY2F0ZWdvcmllcHJvZHVjdHMudmVuZGV1cnNJZCwKICAgICAgICAgICAgICAgICAgICAgICAgY29udGFjdElkOnRoaXMuJHN0b3JlLnN0YXRlLmNhdGVnb3JpZXByb2R1Y3RzLmNvbnRhY3RzSWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhY2NsdDp0aGlzLiRzdG9yZS5zdGF0ZS5jYXRlZ29yaWVwcm9kdWN0cy5jb250YWNjbHQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmc6IHRoaXMuJGkxOG4ubG9jYWxlLAogICAgICAgICAgICAgICAgICAgICAgICBub21jbGllbnQ6dGhpcy4kc3RvcmUuc3RhdGUuY2F0ZWdvcmllcHJvZHVjdHMubm9tY2xpZW50LAogICAgICAgICAgICAgICAgICAgICAgICBudW1lcm9jbGllbnQ6dGhpcy5udW1lcm9jbGllbnQsCiAgICAgICAgICAgICAgICAgICAgICAgIG5vbWNvbnRhY3RzOnRoaXMuJHN0b3JlLnN0YXRlLmNhdGVnb3JpZXByb2R1Y3RzLm5vbWNvbnRhY3RzLAogICAgICAgICAgICAgICAgICAgICAgICBudW1lcm9jb250YWN0czp0aGlzLm51bWVyb2NvbnRhY3RzLAogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudDp0aGlzLmRvY3VtZW50LAogICAgICAgICAgICAgICAgICAgICAgICBjZXJ0aWRvY3NpZDp0aGlzLmNlcnRpZG9jc2lkCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNsb3NlQm94KCl7CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Nsb3NlYm94JykKICAgICAgICAgICAgICAgIC8vdGhpcy4kYnZNb2RhbC5zaG93KCdiaWxhbicpXAogICAgICAgICAgICAgICAgdGhpcy5jbG9zZWI9ZmFsc2UKICAgICAgICAgICAgICAgIHRoaXMuY2xvc2Vib3goeyJvdXZlcnR1cmVBbW91bnQiOnRoaXMub3V2ZXJ0dXJlQW1vdW50fSkKCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBvcGVuQm94KCl7CgogICAgICAgICAgICAgICAgLy90aGlzLiRidk1vZGFsLmhpZGUoJ2NvbmZpcm1vcGVuQWNjb3VudCcpCiAgICAgICAgICAgICAgICAvLyBpZih0aGlzLmJveG9wZW49PT0iZmFsc2UiKXsKICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLm1ha2VUb2FzdCgiQ2Fpc3NlIE91dmVydGUgdmV1aWxsZXogbGEgZmVybWVyIiwiZXJyb3IiKQogICAgICAgICAgICAgICAgLy8gICAgIHJldHVybjsKICAgICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgICAgIHRoaXMub3BlbmI9ZmFsc2UKICAgICAgICAgICAgICAgIHRoaXMub3BlbmJveHMoeyJvdXZlcnR1cmVBbW91bnQiOnRoaXMub3V2ZXJ0dXJlQW1vdW50fSkKCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBBZGRjYXQocHJvZHVjdCkgewoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwcm9kdWN0Jyxwcm9kdWN0KQoKICAgICAgICAgICAgICAgIGlmKCh0aGlzLmZvcm0uUmVmZXJlbmNlKT09JycpewogICAgICAgICAgICAgICAgICAgIHRoaXMubWFrZVRvYXN0KHRoaXMuJHQoJ3JlZl9lbnRlcicpLCdlcnJvcicpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZihwcm9kdWN0LnByb2R1aXQubGliZWxsZT09J2RlYycgJiYgdGhpcy5saXN0cHJvZHVjdHMubGVuZ3RoIT0wKXsKCgogICAgICAgICAgICAgICAgICAgIHRoaXMubWFrZVRvYXN0KHRoaXMuJHQoJ3Byb2R1Y3Rfd2FpdGluZycpLCdlcnJvcicpCgoKICAgICAgICAgICAgICAgICAgICAvKmlmKHRoaXMubGlzdHByb2R1Y3RzLmxlbmd0aCE9MCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdHByb2R1Y3RzID0gW10KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBbGxQcm9kdWN0c0hvbGQocHJvZHVjdCkKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3ZhbGNhdHByb2R1Y3QnLHByb2R1Y3Quc2VsZWN0aG9sZCkKCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd2YWxjYXRwcm9kdWN0JywndmlkZScpCiAgICAgICAgICAgICAgICAgICAgfSovCgoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHByb2R1Y3Quc2VsZWN0aG9sZD10aGlzLnNlbGVjdGhvbGQKICAgICAgICAgICAgICAgIHByb2R1Y3QucmVmZXJlbmNlID0gdGhpcy5mb3JtLlJlZmVyZW5jZQogICAgICAgICAgICAgICAgdGhpcy5mb3JjYXJkID0gdHJ1ZQogICAgICAgICAgICAgICAgdGhpcy5hZGRQcm9kdWN0c0hvbGQocHJvZHVjdCkKCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8qc2VhcmNocmVmZXJlbmNlKCl7CgogICAgICAgICAgICAgICAgdGhpcy5zaG93X3JlZmVyPSF0aGlzLnNob3dfcmVmZXIKICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoUmVmZXJlbmNlKHRoaXMuZm9ybS5SZWZlcmVuY2UpCiAgICAgICAgICAgIH0sKi8KICAgICAgICAgICAgYXBwbHlUYXgocHJpeCx0YXhlcyl7CgogICAgICAgICAgICAgICAgdGF4ZXMuZm9yRWFjaCgodmFsdWUpID0+IHsKCiAgICAgICAgICAgICAgICAgICAgaWYoIXZhbHVlLmluY2x1c2UpewogICAgICAgICAgICAgICAgICAgICAgICBwcml4ID0gcHJpeCArIChwcml4KnZhbHVlLnZhbGV1cikvMTAwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gcHJpeAogICAgICAgICAgICB9LAogICAgICAgICAgICBTZWxlY3RIb2xkKGl0ZW0pewoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdob2xkJyxpdGVtLm51bWJlcikKCiAgICAgICAgICAgICAgICB0aGlzLlNlbGVjdEhvbGRzKGl0ZW0pCiAgICAgICAgICAgICAgICAvL3JlcXVldGUgcG91ciByZWN1cGVyZXIgbGEgbGlzdGUgZGVzIHByb2R1aXRzCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNoZWNrSWRIb2xkKG9iaiwgaWQpIHsKCiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLm1hcChmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtLmhvbGRJZDsgfSkuaW5kZXhPZihpZCk7CgogICAgICAgICAgICB9LAogICAgICAgICAgICBpbnZvaWNlVG90YWwoKSB7CgogICAgICAgICAgICAgICAgdmFyIHN1YnRvdGFsLHRvdGFsOwogICAgICAgICAgICAgICAgc3VidG90YWwgPSB0aGlzLmxpc3Rwcm9kdWN0cy5yZWR1Y2UoZnVuY3Rpb24oc3VtLCBpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNvc3QgPSBwYXJzZUZsb2F0KGl0ZW0ucHJpeCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihjb3N0KSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3VtICsgY29zdDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCAwKTsKCiAgICAgICAgICAgICAgICB0aGlzLk1vbnRhbnRfdG90YWwgPSBzdWJ0b3RhbC50b0ZpeGVkKDIpOwogICAgICAgICAgICAgICAgLy8gdGF4CiAgICAgICAgICAgICAgICAvL3RvdGFsID0gc3VidG90YWwgKiAodGhpcy5pbnZvaWNlX3RheCAvIDEwMCkgKyBzdWJ0b3RhbDsKICAgICAgICAgICAgICAgIHRvdGFsID0gdGhpcy5pbnZvaWNlX3RheCArIHN1YnRvdGFsOwoKICAgICAgICAgICAgICAgIC8qc3dpdGNoIChvcGVyYW5kZSkgewoKICAgICAgICAgICAgICAgICAgICBjYXNlICIrIjoKICAgICAgICAgICAgICAgICAgICAgICAgdG90YWwgPSB0aGlzLmludm9pY2VfdGF4ICsgc3VidG90YWw7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICBjYXNlICItIjoKICAgICAgICAgICAgICAgICAgICAgICAgdG90YWwgPSBNYXRoLmFicyhzdWJ0b3RhbCAtIHRoaXMuaW52b2ljZV90YXgpIDsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9Ki8KCiAgICAgICAgICAgICAgICB0b3RhbCA9IHBhcnNlRmxvYXQodG90YWwpOwogICAgICAgICAgICAgICAgaWYgKCFpc05hTih0b3RhbCkpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmludm9pY2VfdG90YWwgPSB0b3RhbC50b0ZpeGVkKDIpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybS5tb250YW50X2VuY2Fpc3NlID0gdGhpcy5pbnZvaWNlX3RvdGFsCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW52b2ljZV90b3RhbCA9ICIwLjAwIjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRheFRvdGFsKHByaXgsb3BlcmFuZGUpewoKICAgICAgICAgICAgICAgIHZhciBzdWJ0b3RhbHRheCAsYWdlVG90YWw7CgogICAgICAgICAgICAgICAgLy9saXN0IG9mIHRheGVzIG9mIHRoaXNwcm9kdWN0CiAgICAgICAgICAgICAgICBzdWJ0b3RhbHRheCA9ICB0aGlzLmxpc3R0YXgucmVkdWNlKChkYXRhLCB1c2VyKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgYWdlVG90YWwgPSAoYWdlVG90YWwgfHwgMCkgKyB1c2VyLnZhbGV1cgogICAgICAgICAgICAgICAgICAgIHJldHVybiBhZ2VUb3RhbDsKICAgICAgICAgICAgICAgIH0sIHt9KTsKCgogICAgICAgICAgICAgICAgLy9jYWxjdWxhdGUgYW1vdW50IGFuZCBhZGQgaXQgaW4gdG90YWwgYW1vdXQgdGF4CiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHN1YnRvdGFsdGF4KSkgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAob3BlcmFuZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiKyI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3VidG90YWwnLHN1YnRvdGFsdGF4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZvaWNlX3RheCA9IHRoaXMuaW52b2ljZV90YXggKyAoKHN1YnRvdGFsdGF4ICogcHJpeCkvMTAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIi0iOgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW52b2ljZV90YXggPSBNYXRoLmFicyh0aGlzLmludm9pY2VfdGF4IC0gKChzdWJ0b3RhbHRheCAqIHByaXgpLzEwMCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZvaWNlX3RheHMgPSB0aGlzLmludm9pY2VfdGF4OwoKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvKiAgc3VidG90YWwgPSB0aGlzLmxpc3R0YXgucmVkdWNlKGZ1bmN0aW9uKHN1bSwgaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGNvc3QgPSBwYXJzZUZsb2F0KGl0ZW0udmFsZXVyKTsKICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4oY29zdCkpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3N1YnRvdGFsJyxjb3N0KQogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdW0gKyBjb3N0OwoKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgMCk7Ki8KCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBjaGVja0lkKG9iaiwgaWQpIHsKCiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLm1hcChmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtLnJlZmVyZW5jZTsgfSkuaW5kZXhPZihpZCk7CgogICAgICAgICAgICB9LAogICAgICAgICAgICByZW1vdmVDYXRQcm9kdWN0cyhwcm9kdWN0KSB7CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2luZGV4Jyxwcm9kdWN0KQogICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVQcm9kdWN0c0hvbGQocHJvZHVjdCkKCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIFNlZVRheFByb2R1Y3QocHJvZHVjdCkgewoKICAgICAgICAgICAgICAgIHRoaXMudGF4ZXMgPSBwcm9kdWN0LnRheGVzCiAgICAgICAgICAgICAgICB0aGlzLiRidk1vZGFsLnNob3coJ3Rlc3QnKQoKCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIEZldGNoUHJvZHVjdChjYXRwcm9kdWN0KXsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvcHJvZHVjdCcpCgogICAgICAgICAgICAgICAgdGhpcy5GZXRjaFByb2R1Y3RzKGNhdHByb2R1Y3QpCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvKiBtYWtlVG9hc3QodmFyaWFudCA9IG51bGwsIG1zZykgewogICAgICAgICAgICAgICAgIHRoaXMuJGJ2VG9hc3QudG9hc3QobXNnLCB7CiAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBgICR7dmFyaWFudCB8fCAiZGVmYXVsdCJ9YCwKICAgICAgICAgICAgICAgICAgICAgdmFyaWFudDogdmFyaWFudCwKICAgICAgICAgICAgICAgICAgICAgc29saWQ6IHRydWUKICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgIH0sKi8KCiAgICAgICAgICAgIG1ha2VUb2FzdCh2YXJpYW50ID0gbnVsbCx0eXBlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUGxlYXNlIGZpbGwgdGhlIGZvcm0gY29ycmVjdGx5Jyx2YXJpYW50KQogICAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5zaG93KHZhcmlhbnQse3R5cGU6dHlwZX0pCiAgICAgICAgICAgIH0sCgoKICAgICAgICAgICAgQWRkSG9sZCgpewoKICAgICAgICAgICAgICAgIHRoaXMuYWRkaG9sZCgpCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYmlsYW4nLCB0aGlzLiRzdG9yZS5zdGF0ZS5jYXRlZ29yaWVwcm9kdWN0cy5jb250YWN0c0lkKQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgUmVtb3ZlSG9sZCgpewoKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmNhaXNzZXMuc3RhdHVzcmVxdWV0ZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdoZWxsbycsdGhpcy5zZWxlY3Rob2xkLm51bWJlcikKCiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZWhvbGQoe251bWJlcjp0aGlzLnNlbGVjdGhvbGQubnVtYmVyLAogICAgICAgICAgICAgICAgICAgIGNsb3NlOnRydWV9KQogICAgICAgICAgICB9LAoKICAgICAgICB9LAoKICAgICAgICBtb3VudGVkKCkgewoKICAgICAgICAgICAgY29uc29sZS5sb2cobW9tZW50KCkuZm9ybWF0KCJ5eXl5LU1NLUREIikpCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdib3hvcGVuJyx0aGlzLmJveG9wZW4pCgogICAgICAgICAgICB2YXIgdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInNlbGVjdGhvbGQiKSkKICAgICAgICAgICAgY29uc29sZS5sb2coJ2NvZGVwYXlzJyx0KQoKICAgICAgICAgICAgdGhpcy5GZXRjaENhdFByb2R1Y3RzKCkKICAgICAgICAgICAvLyB0aGlzLkZldGNoU2FsZXNQcm9kdWN0cyh7bnVtYmVyOnQubnVtYmVyfSkKCiAgICAgICAgICAgIC8vdGhpcy5jbG9zZUJveCgpCiAgICAgICAgICAgIC8vdGhpcy5zZWFyY2hQYXJ0bmVycyh7dmFsOid0Jyx0eXBlOidjbGllbnRzJ30pCiAgICAgICAgICAgIC8vdGhpcy5GZXRjaENvbnRhY3RzKCkKICAgICAgICAgICAgLy90aGlzLkZldGNoU2VsbGVycygpCiAgICAgICAgICAgIC8vdGhpcy5GZXRjaEN1c3RvbWVycygpCgogICAgICAgIH0sCgogICAgICAgIHdhdGNoOiB7CgoKICAgICAgICAgICAgR2V0Q0hFQ0tTRVNTSU9OOmZ1bmN0aW9uKHZhbHVlKXsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2hlY2tzZXNzaW9uJyx2YWx1ZSkKCiAgICAgICAgICAgICAgICB0aGlzLmJveG9wZW4gPSB0aGlzLnN0cmluZ1RvQm9vbGVhbigobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2JveG9wZW4nKSkpCiAgICAgICAgICAgICAgICB0aGlzLnNob3cgPSB0aGlzLnN0cmluZ1RvQm9vbGVhbigobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2JveHNob3cnKSkpCgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Nob3cnLHRoaXMuYm94b3BlbikKCiAgICAgICAgICAgICAgIC8vIHRoaXMuc2hvdyA9IChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYm94c2hvdyIpKT09J3RydWUnCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2hvdycsKHRoaXMuc2hvdykpCgogICAgICAgICAgICB9LAoKCiAgICAgICAgICAgIEdldFJlbW92ZUFsbFByb2R1Y3RzOmZ1bmN0aW9uKHZhbHVlKXsKCgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlbW92Jyx2YWx1ZSkKICAgICAgICAgICAgICAgIHRoaXMuc2hvdz1mYWxzZQogICAgICAgICAgICAgICAgaWYodmFsdWU9PT0wKXsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgLy8gdGhpcy5pbnZvaWNlX3RheHM9dGhpcy5pbnZvaWNlX3RheAogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZW1vdicsdGhpcy5pbnZvaWNlX3RheHMpCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYnZNb2RhbC5zaG93KCd0ZXN0cycpCgogICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdHByb2R1Y3RzPVtdCiAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0dGF4PVtdCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZvaWNlX3RheCA9IDAKICAgICAgICAgICAgICAgICAgICB0aGlzLmludm9pY2VUb3RhbCgpCgogICAgICAgICAgICAgICAgICAgIC8qdGhpcy4kc3RvcmUuc3RhdGUuY2F0ZWdvcmllcHJvZHVjdHMuY29udGFjdHNJZD0wCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuY2F0ZWdvcmllcHJvZHVjdHMudmVuZGV1cnNJZD0wCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuY2F0ZWdvcmllcHJvZHVjdHMuY2xpZW50c0lkPTAqLwogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybS5SZWZlcmVuY2U9IiIKICAgICAgICAgICAgICAgIH1lbHNlIGlmKHZhbHVlPT09MSl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWtlVG9hc3QodGhpcy4kdCgnZXJyb3InKSwwKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuY2Fpc3Nlcy5yZW1vdmVhbGxwcm9kdWN0cz0yOwoKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIEdldENhaXNzZU9wZW46ZnVuY3Rpb24odmFsdWUpewoKICAgICAgICAgICAgICAgIGlmKCF2YWx1ZSkgewoKICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3cgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGJ2TW9kYWwuaGlkZSgnY29uZmlybW9wZW5BY2NvdW50JykKICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5iPXRydWUKICAgICAgICAgICAgICAgICAgICB0aGlzLmJveG9wZW4gPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJib3hvcGVuIixmYWxzZSkKICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiYm94c2hvdyIsZmFsc2UpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5jYWlzc2VzLmNhaXNzZW9wZW49dHJ1ZTsKCiAgICAgICAgICAgICAgICAvKmVsc2V7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3N0ZGF0dXMnLHZhbHVlKQoKICAgICAgICAgICAgICAgICAgICB0aGlzLiRidk1vZGFsLmhpZGUoJ2NvbmZpcm1jbG9zZUFjY291bnQnKQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzdGRhdHVzJyx2YWx1ZSkKICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiYm94b3BlbiIsdmFsdWUpCgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKi8KCgogICAgICAgICAgICB9LAoKICAgICAgICAgICAgZ2V0Q2F0UHJvZHVjdHM6IGZ1bmN0aW9uKHZhbHVlKXsKCiAgICAgICAgICAgICAgICB0aGlzLmNhdD1bXQogICAgICAgICAgICAgICAgdGhpcy5jYXQgPSB2YWx1ZQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlZ2lzdGVycCcsdmFsdWUpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldFByb2R1Y3RzKHZhbCl7CgogICAgICAgICAgICAgIGlmKHZhbC5sZW5ndGg9PTApewogICAgICAgICAgICAgICAgICBtYWtlVG9hc3QodGhpcy4kdCgnZXJyb3InKSwwKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8qaWYodGhpcy5zZWFyY2gpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dfcmVmZXIgPSAhdGhpcy5zaG93X3JlZmVyCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzdWx0bCcsdmFsKQogICAgICAgICAgICAgICAgLy90aGlzLm1ha2VUb2FzdCgnc3VjZXNzJywnc3VjY2VzcycpCiAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3RzPXZhbDsqLwogICAgICAgICAgICB9LAogICAgICAgICAgICBnZXRTdGF0dXModmFsdWUpewoKICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMucmVnaXN0ZXJQYXJ0bmVycy5yZWdpc3RlcnAodmFsdWUpCiAgICAgICAgICAgICAgICBpZih2YWx1ZSl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0dXRlPWZhbHNlCiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVnaXN0ZXJwJyx2YWx1ZSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldGIoKXsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJveG9wZW4KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGdldEN1c3RvbWVyKHZhbCl7CgogICAgICAgICAgICAgICAgdGhpcy5zdGF0dXRlPWZhbHNlCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3RhdHV0ZScsdGhpcy52YXJpYW50KQoKICAgICAgICAgICAgICAgIC8vdXNlQXV0b2NvbXBsZXRlKCkuc3RhdGUudXNlcklucHV0PSJoZWxsbyIKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3RhdHV0ZScsdmFsKQogICAgICAgICAgICAgICAgaWYoT2JqZWN0LmtleXModmFsKS5sZW5ndGggIT09IDApIHsKCgogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMudmFyaWFudC52YXJpYW50ID09PSAiY2Fpc3NlL2NsaWVudHMiKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kYnZNb2RhbC5oaWRlKCdyZWdpc3RlcmN1c3RvbWVyJykKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGllbnRzLnB1c2godmFsKQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1ha2VUb2FzdCh0aGlzLiR0KCdjdXN0b21lcl9hZGQnKSwnc3VjY2VzcycpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnZhcmlhbnQudmFyaWFudCA9PT0gImNhaXNzZS9jb250YWN0cyIpewoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kYnZNb2RhbC5oaWRlKCdyZWdpc3RlcmNvbnRhY3QnKQoKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuY29udGFjdHMucHVzaCh2YWwpCiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VUb2FzdCh0aGlzLiR0KCdjb250YWN0X2FkZCcpLCdzdWNjZXNzJykKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMudmFyaWFudC52YXJpYW50ID09PSAiY2Fpc3NlL3ZlbmRldXJzIil7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGJ2TW9kYWwuaGlkZSgncmVnaXN0ZXJzZWxsZXInKQogICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuY2xpZW50cy5wdXNoKHZhbCkKICAgICAgICAgICAgICAgICAgICAgICAgbWFrZVRvYXN0KHRoaXMuJHQoJ3NlbGxlcnNfYWRkJyksJ3N1Y2Nlc3MnKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYnZNb2RhbC5tc2dCb3hPaygnJywpCgoKICAgICAgICAgICAgICAgIH1lbHNlewoKICAgICAgICAgICAgICAgICAgICAvL3RoaXMuc2hvdz1mYWxzZQogICAgICAgICAgICAgICAgICAgIG1ha2VUb2FzdCh0aGlzLiR0KCdjdXN0b21lcl9kZW5pZWQnKSwgImVycm9yIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgR2V0Qm94KHZhbCl7CiAgICAgICAgICAgICAgICB0aGlzLmJveD12YWw7CgogICAgICAgICAgICAgICAgaWYodmFsKXsKCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VuY2Fpc3MnLHRoaXMuaG9sZGxpc3QubGVuZ3RoKQoKICAgICAgICAgICAgICAgICAgICAvL2RhbnMgbGUgY2FzIG91IG9uIHZldXggc3VwcHJpbWVyIGwnb25nbGV0IGFwcmVzIGVuY2Fpc3NlbWVudAogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuaG9sZGxpc3QubGVuZ3RoPjEpewogICAgICAgICAgICAgICAgICAgICAgIC8qIHRoaXMuc2hvdz1mYWxzZQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlY2Fpc3NlKCkqLwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUFsbFByb2R1Y3RzSG9sZCh7bnVtYmVyOnRoaXMuc2VsZWN0aG9sZC5udW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uQ2Fpc3NlSWQ6bG9jYWxTdG9yYWdlLmdldEl0ZW0oInNlc3Npb25jYWlzc2UiKX0pCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUFsbFByb2R1Y3RzSG9sZCh7bnVtYmVyOnRoaXMuc2VsZWN0aG9sZC5udW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uQ2Fpc3NlSWQ6bG9jYWxTdG9yYWdlLmdldEl0ZW0oInNlc3Npb25jYWlzc2UiKX0pCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmNhdGVnb3JpZXByb2R1Y3RzLmJveCA9IGZhbHNlCgogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93PWZhbHNlCiAgICAgICAgICAgICAgICAgICAgLy9tYWtlVG9hc3QodGhpcy4kdCgnZXJyb3InKSwwKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gdGhpcy5ib3g9ZmFsc2U7CgogICAgICAgICAgICB9LAoKCiAgICAgICAgICAgIEdldEVuY2Fpc3NlbWVudHModmFsKXsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZW4nLHZhbCkKICAgICAgICAgICAgICAgIG1ha2VUb2FzdCh0aGlzLiR0KHZhbC5tZXNzYWdlLmNvZGUpLHRoaXMuJHQodmFsLm1lc3NhZ2UubGV2ZWwpKQoKICAgICAgICAgICAgICAgIHRoaXMuZW5jYWlzc2VtZW50cz1bXQogICAgICAgICAgICAgICAgdGhpcy5lbmNhaXNzZW1lbnRzPXZhbC5kYXRhCgoJCQkJdGhpcy5udW1lcm9jbGllbnQgPSAiIgoJCQkJdGhpcy5udW1lcm9jb250YWN0cyA9ICIiCgkJCQl0aGlzLmZvcm0uUmVmZXJlbmNlID0gIiIKCiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdzZXRyZWZlcmVuY2UnLCIiKQoKICAgICAgICAgICAgICAgIHRoaXMuZmllbGQgPSB0aGlzLiRzdG9yZS5zdGF0ZS5jYXRlZ29yaWVwcm9kdWN0cy5jb250YWNjbHQKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmNhdGVnb3JpZXByb2R1Y3RzLmNvbnRhY3RzSWQ9IiIKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmNhdGVnb3JpZXByb2R1Y3RzLnZlbmRldXJzSWQ9IiIKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmNhdGVnb3JpZXByb2R1Y3RzLmNsaWVudHNJZD0iIgoKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmNhdGVnb3JpZXByb2R1Y3RzLm5vbWNsaWVudCA9ICIiCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5jYXRlZ29yaWVwcm9kdWN0cy5ub21jb250YWN0cyA9ICIiCgogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnZXJhc2UnLHt2YWw6J2NvbnRhY3RzJ30pCgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VuYzUnLHZhbC5kYXRhKQogICAgICAgICAgICAgICAgdGhpcy5yZXNldFdpbmRvd3MoKQoKICAgICAgICAgICAgICAgIC8vdXNlQXV0b2NvbXBsZXRlKCkuc3RhdGUudXNlcklucHV0PSIiCgogICAgICAgICAgICB9LAoKCiAgICAgICAgICAgIEdFVEJJTEFOKHZhbCl7CgogICAgICAgICAgICAgICAgdGhpcy5iaWxhbj12YWwKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdiaWxhbicsdmFsKQoKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0T2JqZXRIb2xkKHZhbCl7CgogICAgICAgICAgICAgICAgLy90aGlzLnNlbGVjdGhvbGQgPSB2YWwKICAgICAgICAgICAgICAgIHRoaXMuaG9sZGxpc3QucHVzaCh2YWwpOwoKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0U3RhdHVzSG9sZCh2YWwpewoKICAgICAgICAgICAgICAgIGlmKHZhbD09PTIwMCl7CiAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4SWRzID0gdGhpcy5jaGVja0lkSG9sZCh0aGlzLmhvbGRsaXN0LHRoaXMuc2VsZWN0aG9sZC5ob2xkSWQpCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ29iamV0c2hvbGQnLGluZGV4SWRzKQoKICAgICAgICAgICAgICAgICAgICB0aGlzLmhvbGRsaXN0LnNwbGljZShpbmRleElkcywgMSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5ob2xkbGlzdC5zb3J0KCk7CgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGdldEhvbGRMaXN0KHZhbCl7CiAgICAgICAgICAgICAgICB0aGlzLmhvbGRsaXN0PVtdCiAgICAgICAgICAgICAgICB0aGlzLmhvbGRsaXN0PXZhbDsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaG9sZGxpc3RlcycsdGhpcy5ob2xkbGlzdCkKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaG9sZHRlcycsbG9jYWxTdG9yYWdlLmdldEl0ZW0oInNlbGVjdGhvbGQiKSkKICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aG9sZCA9IHRoaXMuaG9sZGxpc3RbMF0KCiAgICAgICAgICAgICAgICAvKmlmKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJzZWxlY3Rob2xkIikgPT09ICdudWxsJyB8fCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic2VsZWN0aG9sZCIpID09PSBudWxsICl7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aG9sZCA9IHRoaXMuaG9sZGxpc3RbMF0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaG9sZGxpc3QnLHRoaXMuaG9sZGxpc3RbMF0pCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYoT2JqZWN0LmtleXMobG9jYWxTdG9yYWdlLmdldEl0ZW0oInNlbGVjdGhvbGQiKSkubGVuZ3RoICE9PSAwKXsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rob2xkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInNlbGVjdGhvbGQiKQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdob2xkbGlzJyx0aGlzLnNlbGVjdGhvbGQpCgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdoaGhoJyx0aGlzLnNlbGVjdGhvbGQpKi8KICAgICAgICAgICAgICAgIHRoaXMuU2VsZWN0SG9sZHModGhpcy5zZWxlY3Rob2xkKQoKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGdldFNlbGVjdEhvbGQodmFsKXsKCiAgICAgICAgICAgICAgICBpZih2YWwuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgIG1ha2VUb2FzdCh0aGlzLiR0KHZhbC5tZXNzYWdlLmNvZGUpLHRoaXMuJHQodmFsLm1lc3NhZ2UubGV2ZWwpKQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aG9sZCA9IHZhbC5kYXRhCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Nvb29vYmpldGhvbGQnLCB2YWwpCiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInNlbGVjdGhvbGQiLCBKU09OLnN0cmluZ2lmeSh2YWwuZGF0YSkpCgogICAgICAgICAgICAgICAgICAgIC8vdGhpcy4kc3RvcmUuc3RhdGUuY2F0ZWdvcmllcHJvZHVjdHMuY29udGFjdHNJZD0wCiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy4kc3RvcmUuc3RhdGUuY2F0ZWdvcmllcHJvZHVjdHMudmVuZGV1cnNJZD0wCiAgICAgICAgICAgICAgICAgICAgLy90aGlzLiRzdG9yZS5zdGF0ZS5jYXRlZ29yaWVwcm9kdWN0cy5jbGllbnRzSWQ9MAogICAgICAgICAgICAgICAgICAgIHVzZUF1dG9jb21wbGV0ZSgpLnN0YXRlLnVzZXJJbnB1dCA9ICIiCgoKICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFByb2R1Y3RzSG9sZCh0aGlzLnNlbGVjdGhvbGQpCgogICAgICAgICAgICAgICAgfWVsc2V7CgogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzb29vb2JqZXRob2xkcycsIHZhbCkKICAgICAgICAgICAgICAgICAgICBtYWtlVG9hc3QodGhpcy4kdCh2YWwubWVzc2FnZS5jb2RlKSx0aGlzLiR0KHZhbC5tZXNzYWdlLmxldmVsKSkKCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9LAoKICAgICAgICAgICAgR2V0UHJvZHVjdHNIb2xkKHZhbCl7CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2dldHAnLHZhbCkKCiAgICAgICAgICAgICAgICAvL3RoaXMubGlzdHByb2R1Y3RzID0gdmFsCiAgICAgICAgICAgICAgICB0aGlzLmxpc3Rwcm9kdWN0cz1bXQogICAgICAgICAgICAgICAgdGhpcy5saXN0dGF4PVtdCgogICAgICAgICAgICAgICAgaWYodmFsLmxlbmd0aCE9MCkgewogICAgICAgICAgICAgICAgICAgIC8vZGF0YT12YWwuZGF0YQogICAgICAgICAgICAgICAgICAgIHZhbC5kYXRhLmZvckVhY2goKHZhbHVlKSA9PiB7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3Rwcm9kdWN0cy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1aXRJZDogdmFsdWUucHJvZHVpdC5wcm9kdWl0SWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWJlbGxlOiB2YWx1ZS5wcm9kdWl0LmxpYmVsbGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2U6IHZhbHVlLnJlZmVyZW5jZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvbGRJZDogdGhpcy5zZWxlY3Rob2xkLmhvbGRJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaXg6IHZhbHVlLnByb2R1aXQucHJpeCwvL3RoaXMuYXBwbHlUYXgodmFsdWUucHJvZHVpdC5wcml4LHZhbHVlLnRheGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllOiB2YWx1ZS5wcm9kdWl0LmNhdGVnb3JpZVByb2R1aXQubGliZWxsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uQ2F0OiB2YWx1ZS5wcm9kdWl0LmNhdGVnb3JpZVByb2R1aXQuZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXhlczogdmFsdWUudGF4ZXMKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3R0YXggID0gdmFsdWUudGF4ZXMKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXhUb3RhbCh2YWx1ZS5wcm9kdWl0LnByaXgsIisiKQoKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICB0aGlzLmludm9pY2VfdGF4ICA9IDAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuaW52b2ljZVRvdGFsKCkKCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBNb3ZlUHJvZHVjdHNIb2xkKHZhbHVlKXsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbW92ZWYnLHZhbHVlKQogICAgICAgICAgICAgICAgdGhpcy5mb3JjYXJkID0gZmFsc2UKCiAgICAgICAgICAgICAgICB2YXIgb3BlcmFuZGUgPSIiCiAgICAgICAgICAgICAgICBpZih2YWx1ZS5zdGF0dXQ9PT0wKSB7CgogICAgICAgICAgICAgICAgICAgIGlmKHZhbHVlLnN1Y2Nlc3MpewoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0cHJvZHVjdHMucmVmZXJlbmNlID0gdGhpcy5mb3JtLlJlZmVyZW5jZQogICAgICAgICAgICAgICAgICAgICAgICBvcGVyYW5kZSA9ICIrIgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3Rwcm9kdWN0cy5wdXNoKHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWl0SWQ6IHZhbHVlLnByb2R1aXQucHJvZHVpdElkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGliZWxsZTogdmFsdWUucHJvZHVpdC5saWJlbGxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlOiB0aGlzLmxpc3Rwcm9kdWN0cy5yZWZlcmVuY2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob2xkSWQ6IHRoaXMuc2VsZWN0aG9sZC5ob2xkSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcml4OiB2YWx1ZS5wcm9kdWl0LnByaXgsLy90aGlzLmFwcGx5VGF4KHZhbHVlLnByb2R1aXQucHJpeCx2YWx1ZS50YXhlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZTogdmFsdWUucHJvZHVpdC5jYXRlZ29yaWVQcm9kdWl0LmxpYmVsbGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbkNhdDogdmFsdWUucHJvZHVpdC5jYXRlZ29yaWVQcm9kdWl0LmRlc2NyaXB0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGF4ZXM6IHZhbHVlLnRheGUKCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLmZvcm0uUmVmZXJlbmNlID0gJycKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5tYXRyaWN1bGUucmVzZXRmaWVsZCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5ldyBJbnRsLk51bWJlckZvcm1hdCgnQ00nLCB7IHN0eWxlOiAnY3VycmVuY3knLCBjdXJyZW5jeTogJ1hBRicgfSkuZm9ybWF0KHZhbHVlLnByb2R1aXQucHJpeCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXZhbHVlLnRheGUuaW5jbHVzZSl7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0dGF4ID0gdmFsdWUudGF4ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ21vdmVlJywgdGhpcy5saXN0dGF4KQoKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBvcGVyYW5kZT0iKyI7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGF4VG90YWwodmFsdWUucHJvZHVpdC5wcml4LG9wZXJhbmRlKQoKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3ByeHh4b2R1Y3RzJyx2YWx1ZS5tZXNzYWdlLmNvZGUpCiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VUb2FzdCh0aGlzLiR0KHZhbHVlLm1lc3NhZ2UuY29kZSksdGhpcy4kdCh2YWx1ZS5tZXNzYWdlLmxldmVsKSkKICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLm1ha2VUb2FzdCh0aGlzLiR0KHZhbHVlLm1lc3NhZ2UuY29kZSksJ2Vycm9yJykKCgogICAgICAgICAgICAgICAgICAgICAgICAvL29idGVuaXIgb2JqZWN0IHBhciBzb24gaWQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfWVsc2V7CgogICAgICAgICAgICAgICAgICAgIG9wZXJhbmRlPSItIjsKCiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnY2hlY2tpZCcsdGhpcy5jaGVja0lkKHRoaXMubGlzdHByb2R1Y3RzLHZhbHVlLnJlZmVyZW5jZSkpCiAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4SWQgPSB0aGlzLmNoZWNrSWQodGhpcy5saXN0cHJvZHVjdHMsdmFsdWUucmVmZXJlbmNlKQogICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdHRheCA9ICh0aGlzLmxpc3Rwcm9kdWN0c1tpbmRleElkXSkudGF4ZXMKCgogICAgICAgICAgICAgICAgICAgIHRoaXMudGF4VG90YWwodGhpcy5saXN0cHJvZHVjdHNbaW5kZXhJZF0ucHJpeCxvcGVyYW5kZSkKICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3Rwcm9kdWN0cy5zcGxpY2UoaW5kZXhJZCwgMSk7CgoKCiAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICAgIHRoaXMuaW52b2ljZVRvdGFsKCkKCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBHZXRCb3hPcGVuKHZhbHVlKXsKCgogICAgICAgICAgICAgICAgaWYoIXZhbHVlKSB7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvdyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZWI9dHJ1ZQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGJ2TW9kYWwuaGlkZSgnY29uZmlybW9wZW5BY2NvdW50JykKCiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlYj10cnVlCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYnZNb2RhbC5oaWRlKCdjb25maXJtY2xvc2VBY2NvdW50JykKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93ID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIHRoaXMuYm94b3Blbj0gZmFsc2UKICAgICAgICAgICAgICAgICAgICB0aGlzLmJveG9wZW49IHRydWUKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3RkYXR1cycsdmFsdWUpCgogICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aG9sZD17fQogICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdHByb2R1Y3RzPVtdCiAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0dGF4PVtdCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZvaWNlVG90YWwoKQogICAgICAgICAgICAgICAgICAgIHRoaXMuaW52b2ljZV90YXggPSAwCiAgICAgICAgICAgICAgICAgICAgdGhpcy5ob2xkbGlzdD1bXQoKCiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImJveG9wZW4iLHRydWUpCiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImJveHNob3ciLHRydWUpCgoKICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5jYWlzc2VzLmJveG9wZW5zPWZhbHNlCiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy4kYnZNb2RhbC5zaG93KCdiaWxhbicpCgogICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgIH0sCiAgICAgICAgfQogICAgfTsK"},{"version":3,"sources":["box.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;AAGA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;;AAGA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;;;;AAIA;;;AAGA;;AAEA;;AAEA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;;AAGA;AACA;;AAEA;;;AAGA;AACA;AACA","file":"box.vue","sourceRoot":"src/views/app/caisses","sourcesContent":["<template>\n\n    <div class=\"main-content\">\n\n        <salesreceipt :encaissements=\"encaissements\"\n                      :encompte=\"encompte\"\n                      :box=\"box\"\n                      :invoice_tax =\"invoice_taxs\"\n                      :field=\"field\"\n                      :codepays=\"codepays\"\n                      :devise=\"devise\"\n                      :listproducts=\"listproducts\"\n                      :country=\"country\"\n                      @print=\"print\"\n        @cancels=\"cancels\"></salesreceipt>\n\n\n        <bilan :data=\"bilan\"></bilan>\n\n\n        <b-button  style=\"right: 0;position: absolute\" v-if=\"boxopen===true\" pill variant=\"success m-1\"\n                   @click =\"openmodalbox\"  ><i class=\"i-Folder-Open\"></i>\n        </b-button>\n\n        <b-button  style=\"right: 0;position: absolute\" v-else pill variant=\"danger m-1\" @click =\"closemodalbox\" >\n            <i class=\"i-Close\"></i></b-button>\n\n        <b-col md=\"12\" style=\"position:relative;text-align: right\" >\n            <!--{{$t('close_box')}}-->\n\n            <b-overlay :show=\"openb\" rounded=\"sm\" >\n\n                <b-modal id=\"confirmopenAccount\" :title=\"$t('open_box')\" hide-footer>\n\n                <template #modal-header=\"{}\">\n                    <!-- Emulate built in modal header close button action -->\n                    <h5>{{$t('open_box')}}</h5>\n                </template>\n\n                <template #default=\"{  }\">\n\n                    <b-form-input\n\n                            v-model=\"ouvertureAmount\"\n                            type=\"number\"\n                            :placeholder=\"$t('Montant_Encaisse')\"\n                    ></b-form-input>\n                    <p></p>\n                    <div style=\"text-align: right\">\n                        <b-button  :disabled=\"!openb\" @click=\"openBox()\" variant=\"outline-success\" style=\"margin-right: 15px\">{{$t('open')}}</b-button>\n                    </div>\n\n                </template>\n\n                </b-modal>\n\n            </b-overlay>\n\n            <!--<b-overlay :show=\"closeb\" rounded=\"sm\" >-->\n\n             <b-modal id=\"confirmcloseAccount\"  title=\"Confirmer la fermeture de la Caisse\" hide-footer>\n                <p></p>\n\n                <template #default=\"{}\">\n\n                    <b-form-input\n                            v-model=\"ouvertureAmount\"\n                            type=\"number\"\n                            :placeholder=\"$t('Montant_Close')\"\n\n                    ></b-form-input>\n\n\n                    <p></p>\n\n                    <div style=\"text-align: right\">\n                        <b-button :disabled=\"!closeb\" type=\"submit\" variant=\"outline-success rights\"\n                                  @click=\"closeBox()\" >{{$t('close')}}</b-button>\n                    </div>\n\n                </template>\n\n            </b-modal>\n\n            <!--</b-overlay>-->\n\n        </b-col>\n\n        <breadcumb :page=\"$t('caisse')\" :folder=\"date\"   /> <!--:montant=\"\"-->\n\n        <b-overlay :show=\"show\" rounded=\"sm\" >\n\n            <b-card  :aria-hidden=\"show ? 'true' : null\"  class=\"overlay-box\">\n                <!--title=\"Form Inputs\"-->\n\n\n                <b-row>\n                    <b-col md=\"6\">\n\n\n                        <b-row>\n                            <Catproductes :cats=\"cat\"  @FetcProduct=\"FetchProduct\"></Catproductes>\n                        </b-row>\n                        <p></p>\n\n\n                        <b-row>\n\n                            <b-form-group\n                                    class=\"col-md-10 mb-30\"\n                                    :label=\"$t('Reference')\"\n                                    label-for=\"input-1\"\n\n                            >\n\n                                <reference\n                                          ref=\"matricule\"\n                                          :formattedreferenceValue=\"form.Reference\"\n                                          @setlistpr=\"setlistpr\"\n                                          @setrefoverlay=\"setoverlay\"\n                                          @setreference=\"setreference\"></reference>\n\n\n                            </b-form-group>\n\n\n                            <div class=\"spinner spinner-info\" v-if=\"show_refer\"\n                                 style=\"position:absolute;margin-top:29px!important;\n                             margin-left:33px!important;\n                             width:15px;height:15px;\"></div>\n\n                            <!--<div class=\"col-md-1\" >\n\n                                <button class=\"btn btn-outline-success  btn-icon m-1\" @click=\"searchreference()\"\n                                        style=\"margin-top:25px!important;padding:4px!important;\" type=\"button\">\n                                    <span class=\"ul-btn__icon\"><i class=\"i-Search-People\"></i></span></button>\n\n                            </div>-->\n\n                        </b-row>\n\n                        <b-overlay :show=\"forcard\" rounded=\"sm\" >\n                            <b-row class=\"scroll-card\">\n\n                                <b-card no-body v-for=\"item in products\" :key=\"item.produit.produitId\"  @click=\"Addcat(item)\"\n                                    class=\"bg-dark text-white o-hidden mb-30 taille \" style=\"margin-left:28px!important;\">\n\n                                <img v-if=\"item.produit.img==null\" src=\"../../../assets/images/photo-long-1.jpg\" alt />\n\n\t\t\t\t\t\t\t\t<img v-else :src=\"resources_urls + item.produit.img\" alt />\n                                <!--<img v-if=\"item.produit.img==null\" v-auth-image=\"../../../assets/images/photo-long-1.jpg\" alt>\n                                <img v-else v-auth-image=\"../../../assets/images/photo-long-1.jpg\" alt />-->\n\n                                <div class=\"card-img-overlay\">\n                                    <div class=\"text-center pt-4\">\n                                        <h5 class=\"card-title mb-2 text-white \" style=\"font-size: 13px\">{{$t(item.produit.libelle )}}</h5>\n                                        <div class=\"separator border-top mb-2\"></div>\n                                    </div>\n                                </div>\n\n                            </b-card>\n\n                            </b-row>\n                        </b-overlay>\n\n                    </b-col>\n                    <b-col md=\"6\">\n\n                        <b-row>\n\n\n                            <b-form-group\n                                    class=\"col-md-7 mb-30\"\n                                    :label=\"$t('Client')\"\n                                    label-for=\"input-1\"\n                            >\n                                <AutoComplete ref=\"childAutos\" @save-change=\"savechange\" msg='clients'\n                                              type='caisse' :optionsKey=\"optionsKey\"\n                                               :optionsKey1=\"optionsKey1\"></AutoComplete><!---->\n\n\n                            </b-form-group>\n\n                            <b-form-group\n                                    style=\"margin-right: 0 !important;\"\n                                    class=\"col-md-5 mb-30\"\n                                    :label=\"$t('numero')\"\n                                    label-for=\"input-1\"\n                            >\n\n                                <b-form-input\n                                        autocomplete=\"off\"\n                                        type=\"text\"\n                                        v-model=\"numeroclient\"\n                                        @input=\"clientsupdate\"\n                                        placeholder=\"\"\n                                        size=\"sm\"\n                                ></b-form-input>\n\n                            </b-form-group>\n\n\n                        </b-row>\n                        <b-row>\n\n                            <b-form-group\n                                    class=\"col-md-7 mb-30\"\n                                    :label=\"$t('Contact')\"\n                                    label-for=\"input-1\"\n                            >\n                                <!--ref='contacts'-->\n                                <AutoComplete\n                                        ref=\"childAuto\" @save-change=\"savechange\"  type='caisse' msg='contacts'\n                                        :optionsKey=\"optionsKey\" :optionsKey1=\"optionsKey1\" ></AutoComplete>\n\n                            </b-form-group>\n                            <b-form-group\n                                    style=\"margin-right: 0 !important;\"\n                                    class=\"col-md-5 mb-30\"\n                                    :label=\"$t('numero')\"\n                                    label-for=\"input-1\"\n                            >\n\n                                <b-form-input\n                                        autocomplete=\"off\"\n                                        type=\"text\"\n                                        @input=\"contactsupdate\"\n                                        v-model=\"numerocontacts\"\n                                        placeholder=\"\"\n                                        size=\"sm\"\n                                ></b-form-input>\n\n                            </b-form-group>\n\n\n\n                        </b-row>\n                        <b-row>\n                            <b-col >\n                                <table class=\"table table-bordered\">\n                                    <thead>\n                                    <tr>\n                                        <th scope=\"col\" v-for=\"header in fields\" :key=\"header\">\n                                            {{$t(header)}}\n                                        </th>\n                                    </tr>\n                                    </thead>\n                                    <tbody>\n                                    <tr v-if=\"listproducts.length === 0\">\n                                        <td colspan=\"5\" md=\"12\">{{$t('no_product')}}</td>\n                                    </tr>\n                                    <tr v-else v-for=\"item in listproducts\"  :key=\"item.produit_id\">\n\n                                        <td>{{item.libelle}}</td>\n                                        <td>\n\n                                            <input\n                                                    class=\"form-control\"\n                                                    type=\"text\"\n                                                    v-model=\"item.reference\"\n                                                    placeholder=\"Reference\"\n                                            />\n                                        </td>\n\n                                        <td>\n\n                                            <select class=\"form-control\"\n                                                    name=\"document\"\n                                                    id=\"document\"\n                                                    v-model=\"document\"\n                                            >\n\n                                                <!--<option :value=\"marques2.marqueVehiculeId\" selected>{{marques2.libelle}}</option>-->\n                                                <option value=\"cg\">\n                                                    Carte grise\n                                                </option>\n                                                <!--<option value=\"cerfvente\">\n                                                    Certification de vente\n                                                </option>-->\n                                                <option value=\"cerfimma\">\n                                                    Certification Immatriculation\n                                                </option>\n                                                <option value=\"civio\">\n                                                    CIVIO\n                                                </option>\n                                                <option value=\"autres\">\n                                                    autres\n                                                </option>\n\n                                            </select>\n                                        </td>\n\n                                        <td>{{ item.prix | currencys(codepays,devise) }}</td>\n                                        <td><a\n                                                @click=\"SeeTaxProduct(item)\"\n                                                class=\"o-hidden d-inline-block\"\n                                                title=\"See Tax\"\n                                        >\n                                            <i class=\"i-Eye-Visible text-25 text-success\"></i>\n                                        </a></td>\n                                        <td><a\n                                                @click=\"removeCatProducts(item)\"\n                                                class=\"o-hidden d-inline-block\"\n                                                title=\"Delete\"\n                                        >\n                                            <i class=\"i-Close-Window text-25 text-danger\"></i>\n                                        </a></td>\n                                    </tr>\n                                    </tbody>\n                                </table>\n\n                            </b-col>\n\n\n                            <b-col md=\"12\">\n                                <div class=\"invoice-summary float-right\" style=\"width: 300px !important\">\n                                    <p>\n                                        {{$t('Montant_total')}}:\n                                        <span>{{Montant_total|currencys(codepays,devise)}}</span>\n                                    </p>\n\n                                    <p>\n                                        {{$t('Taxes')}}:\n                                        <span> {{invoice_tax|currencys(codepays,devise)}} </span>\n                                    </p>\n\n                                    <h5 class=\"font-weight-bold\">\n                                        {{$t('Net_a_Payer')}}:\n                                        <span> {{invoice_total|currencys(codepays,devise)}} </span>\n\n                                    </h5>\n\n                                </div>\n                            </b-col>\n                        </b-row>\n\n                        <p></p>\n                        <b-row>\n\n                            <b-col md=\"3\"></b-col>\n                            <b-col md=\"5\" style=\"visibility: hidden\"><h5><b>{{$t('Montant_Encaisse')}}:</b></h5></b-col>\n                            <b-col md=\"4\" style=\"visibility: hidden\">\n                                <b-form-input\n\n                                        v-model=\"form.montant_encaisse\"\n                                        disabled\n                                        type=\"number\"\n                                        required\n                                        placeholder=\"0\"\n                                ></b-form-input></b-col>\n\n                        </b-row>\n\n\n\n                    </b-col>\n                </b-row>\n\n                <p></p>\n                <p></p>\n                <p></p>\n                <p></p>\n                <b-row >\n                    <b-col md=\"6\"></b-col>\n                    <!--<b-col md=\"6\">\n                        <b-row>\n                            <b-form-group\n                                    class=\"col-md-10 mb-30\"\n                                    :label=\"$t('Contact')\"\n                                    label-for=\"input-1\"\n                            >\n                                <AutoComplete ref='contacts' type='caisse' msg='contacts' :optionsKey=\"optionsKey\" :optionsKey1=\"optionsKey1\" ></AutoComplete>\n\n                            </b-form-group>\n\n                            <div class=\"bv-no-focus-ring \" style=\"margin-top: 17px;\">\n\n                                <button class=\"btn btn-outline-success  btn-icon m-1\" v-b-modal.registercontact\n                                        style2=\"margin-top:5px!important;padding:4px!important;\" type=\"button\">\n                                    <span class=\"ul-btn__icon\"><i class=\"i-Add\"></i></span></button>\n\n                                <registerPartners\n                                        id=\"registercontact\"\n                                        :title=\"$t('register_contacts')\"\n                                        :showpartners=\"statute\"\n                                        type=\"caisse/contacts\"\n                                        ref=\"registerPartners\"\n                                        @registerpartners=\"registerCustomer\"\n                                ></registerPartners\n                                >\n\n\n                            </div>\n\n                        </b-row>\n                    </b-col>-->\n\n                    <b-col md=\"6\" style=\"position:relative;text-align: right;margin-top: 19px\" >\n\n                        <b-button pill variant=\"grey m-1\" style=\"border:1px solid grey ;border-radius: 3px;visibility: hidden\"\n                                  @click=\"launchAccount()\">{{$t('Mis_en_Compte')}}</b-button>\n                        <b-button pill variant=\"danger m-1 \" @click=\"closecaisse()\" >{{$t('Annuler')}}</b-button>\n\n\n\n                        <b-modal id=\"confirminAccount\" scrollable no-close-on-backdrop title=\"Confirmer la mise en Compte\" hide-footer>\n                            <p></p>\n                            <div style=\"text-align: right\">\n                                <b-button  variant=\"outline-danger\"  style=\"visibility: hidden;margin-right: 10px\">{{$t('Annuler')}}</b-button>\n                                <b-button type=\"submit\" variant=\"outline-success rights\" @click=\"inAccount()\" >{{$t('Enregistrer')}}</b-button>\n\n                            </div>\n                        </b-modal>\n\n\n                        <b-modal id=\"confirminBox\" scrollable no-close-on-backdrop title=\"Confirmer l'Encaissement\" hide-footer>\n                            <p></p>\n                            <div style=\"text-align: right\">\n                                <b-button  variant=\"outline-danger\"  style=\"visibility: hidden;margin-right: 10px\">{{$t('Annuler')}}</b-button>\n                                <b-button type=\"submit\" variant=\"outline-success rights\" @click=\"inBox()\" >{{$t('Encaisser')}}</b-button>\n\n                            </div>\n                        </b-modal>\n\n\n                        <!--<b-button pill variant=\"success m-1\" v-b-modal.confirminBox >{{$t('Encaisser')}}</b-button>-->\n                        <b-button pill variant=\"success m-1\" @click=\"launchBox()\" >{{$t('Encaisser')}}</b-button>\n\n                    </b-col>\n\n                </b-row>\n\n                <b-row>\n                    <b-col md=\"6\" style=\"position:relative;text-align: left\" >\n                        <div class=\"row row-horizon\">\n\n                           <span class=\"holdList\">\n                              <!-- list Holds goes here -->\n                               <span class=\"Hold \" :class=\"[item.holdId == selecthold.holdId ? 'selectedHold' : '']\" id=\"item.holdId\" v-for=\"item in holdlist\"\n                                     :key=\"item.hold_id\" @click=\"SelectHold(item)\">\n\n                                   {{item.number}}<!--<span id=\"Time\">{{item.time}}</span>-->\n\n                               </span>\n                           </span>\n                            <span class=\"Hold pl\" @click=\"AddHold()\">+</span>\n                            <span class=\"Hold pl\" @click=\"RemoveHold()\">-</span>\n\n\n                            <!--<b-tabs pills justified>\n                                <b-tab :title=\"item.number\" v-for=\"item in holdlist\" :key=\"item.hold_id\" @click=\"SelectHold(item)\" active>\n\n                                </b-tab>\n\n                            </b-tabs>-->\n                        </div>\n                    </b-col>\n                </b-row>\n\n\n            </b-card>\n        </b-overlay>\n\n        <b-modal id=\"test\" title=\"Liste des Taxes\" hide-footer>\n\n            <template #modal-header=\"{  }\">\n                <!-- Emulate built in modal header close button action -->\n                <h5>{{$t('tax_list')}}</h5>\n            </template>\n\n            <template #default=\"{ hide }\">\n                <table class=\"table table-bordered\">\n                    <thead>\n                    <tr>\n                        <th scope=\"col\" >\n                            {{$t('nom_label')}}\n                        </th>\n                        <th scope=\"col\" >\n                            {{$t('description')}}\n                        </th>\n                        <th scope=\"col\" >\n                            {{$t('value')}}\n                        </th>\n                        <th scope=\"col\" >\n                            {{$t('type')}}\n                        </th>\n\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr v-if=\"taxes.length === 0\">\n                        <td md=\"12\"></td>\n                    </tr>\n                    <tr v-else v-for=\"item in taxes\"  :key=\"item.taxeId\">\n\n                        <td>{{item.nom}}</td>\n                        <td>{{item.description}}</td>\n                        <td>{{item.valeur}}</td>\n\n                        <td v-if=\"item.incluse == true\">{{$t('incluse')}}</td>\n                        <td v-else>{{$t('excluse')}}</td>\n                    </tr>\n                    </tbody>\n                </table>\n                <p></p>\n                <div style=\"text-align: right\">\n                    <b-button  @click=\"hide()\" variant=\"outline-danger\" style=\"margin-right: 15px\">{{$t('close')}}</b-button>\n                </div>\n\n            </template>\n\n        </b-modal>\n\n    </div>\n\n</template>\n\n\n<script>\n\n    import AutoComplete from \"./Autocomplete\"\n    import useAutocomplete from '../../../store/modules/useAutocomplete'\n    import Catproductes from \"./catproductes\"\n    import salesreceipt from \"./salesreceipt\"\n    import bilan from \"../components/bilan\"\n    //import registerPartners from \"../components/registerpartners\"\n    import reference from \"../components/reference\"\n    import moment from 'moment'\n    import constants from '../../../plugins/constants'\n    import { mapGetters,mapActions } from \"vuex\";\n\n\n\n    //import Vue from 'vue'\n    import { makeToast } from '../../../plugins/functions'\n\n\n    export default {\n\n        metaInfo: {\n            title: \"Caisse\"\n        },\n\n        data() {\n            return {\n\n                numerocontacts:\"\",\n                forcard:false,\n                openb:true,\n                closeb:true,\n                chassi:\"chassis\",\n                selectholdvar:false,\n                resources_urls:constants.resource_urls,\n                date: new Date().toLocaleString(),\n                cat:[],\n                userinput:\"\",\n                boxopen:false,\n                contactsId:5,\n                box:true,\n                modaltax:false,\n                encaissements:{},\n                bilan:{},\n\n                form: {\n                    num_ticket:'123',\n                    montant_encaisse:0,\n                    Reference:\"\",\n                    name: \"\",\n                    email: \"\",\n                    emails: \"\",\n                    fName: \"\",\n                    lName: \"\",\n                    phone: \"\"\n                },\n                ouvertureAmount:0,\n                resultsearch:[],\n                selection:[],\n                Montant_total:0,\n                invoice_tax: 0,\n                invoice_taxs: 0,\n                invoice_total: 0,\n                showModal:true,\n                clients:[],\n                products:[],\n                show:false,\n                customerForm:\n                    {\n                        cni: \"\",\n                        nom: \"\",\n                        prenom: \"\",\n                        phone: \"\",\n                        status: false,\n                        birthday:\"\",\n                        passport:\"\",\n                        permi_de_conduire:\"\",\n                        date: new Date().toLocaleString(),\n                    }\n                ,\n                search:false,\n                contact:{\n                    Name:\"\"\n                },\n                vendeur:{\n                    Name:\"\"\n                },\n                document:\"cg\",\n                variant:\"\",\n                country:this.$store.state.authData.country,\n                listproducts:[\n                ],\n                listtax:[\n                ],\n                tax:[],\n                statute:false,\n                show_refer:false,\n                selecthold:{},\n                taxes:[],\n                selected:[],\n                optionsKey:\"nom\",\n                optionsKey1:\"prenom\",\n                fields: [\"Désignation\", \"Reference\", \"Document\",\"Prix\",\"Taxes\",\"Actions\"],\n                //field: [\"Désignation\", \"Prix\",\"Prix\"],\n                field:\"\",\n                holdlist:[],\n                encompte:false,\n                codepays:'',\n                devise:'',\n                numeroclient:\"\",\n                certidocsid:0\n            };\n        },\n        beforeMount(){\n\n          this.codepays = this.$i18n.locale\n            this.devise = localStorage.getItem('devise')\n\n            this.boxopen = this.stringToBoolean((localStorage.getItem('boxopen')));\n            this.show = (localStorage.getItem('boxshow')!=null)?(this.stringToBoolean((localStorage.getItem('boxshow')))):\"\" ;\n\n\n            this.checksessione()\n            //this.holdliste()\n            console.log('codepayes',this.$store.state.authData.role)\n\n            if(this.$store.state.authData.role.indexOf('cg') !== -1){\n                this.$router.push({ name: 'allvisit_list', params: { id: '0' }})\n                return;\n            }\n            if(this.$store.state.authData.role.indexOf('controleur') !== -1){\n                this.$router.push({name: 'visit_start'})\n                return;\n            }\n\n        },\n        filters:{\n            momentes: function (date) {\n                return moment(date).format('yyyy-MM-dd HH:mm');\n            },\n\n            currencys:function (value,codepays,devise) {\n\n                return new Intl.NumberFormat(codepays, { style: 'currency', currency: devise }).format(value);\n            },\n            currencysout:function (value,codepays,devise) {\n                console.log('intl',value)\n                var intl =  new Intl.NumberFormat(codepays, { style: 'currency', currency: devise }).format(value);\n                console.log('intl',intl)\n                return intl.replace(devise,'')\n            }\n\n        },\n        components:{salesreceipt, AutoComplete,Catproductes,bilan,reference},\n        computed: {\n\n            ...mapGetters([\"getStatusHold\",\"getProducts\",\"getCustomers\",\"getCustomer\",\"getStatus\",\"getCatProducts\",\"GetBox\",\"GETBILAN\",\"GetEncaissements\",\"getObjetHold\",\n                \"getHoldList\",\"getSelectHold\",\"GetProductsHold\",\"MoveProductsHold\",\"GetBoxOpen\",\"GetCaisseOpen\",\"GetCHECKSESSION\",\"GetRemoveAllProducts\"]),\n\n        },\n\n        methods: {\n            ...mapActions([\"FetchCatProducts\",\"FetchSalesProducts\",\"registerCustom\",\"FetchProducts\",\n                \"FetchSellers\",\"FetchContacts\",\"FetchCustomers\",\"inAccounts\"\n                ,\"inBoxs\",\"addhold\",\"closebox\",\"openboxs\",\"removehold\",\"checksessione\",\"holdliste\",\"SelectHolds\",\"getProductsHold\",\"addProductsHold\",\"removeProductsHold\",\"removeAllProductsHold\"]),\n\n            contactsupdate(){\n                this.$store.state.categorieproducts.contactsId = \"\"\n            },\n            clientsupdate(){\n                this.$store.state.cate57gorieproducts.clientsId = \"\"\n            },\n\n            resetWindows: function (){\n\n                this.$refs.childAuto.resetWindow();\n                this.$refs.childAutos.resetWindow();\n                this.form.Reference = \" \"\n\n            },\n\n            savechange(data){\n\n                console.log('savechange',data);\n                \n                switch(data.msg){\n\n                    case 'clients':\n                        this.numeroclient = data.item.telephone\n                        this.$store.state.categorieproducts.nomclient = data.item.nom + \" \" +data.item.prenom\n                        this.$store.state.categorieproducts.clientsId = data.item.clientId\n\n                        break;\n\n                    case 'contacts':\n\n                        this.numerocontacts = data.item.telephone\n                        this.$store.state.categorieproducts.nomcontacts = data.item.nom + \" \" +data.item.prenom\n                        this.$store.state.categorieproducts.contactsId = data.item.contactId\n\t\t\t\t\t\t\n\t\t\t\t\t\tconsole.log('state',this.$store.state.categorieproducts.contactsId)\n\n                        break;\n                    case 'reference':\n\n                        break;\n\n                }\n\n\n            },\n            setreference(value){\n                console.log('form','form')\n                this.form.Reference=value\n\n            },\n            openmodalbox(){\n                this.$bvModal.show('confirmopenAccount')\n            },\n            closemodalbox(){\n                this.$bvModal.show('confirmcloseAccount')\n            },\n            setoverlay(value){\n                if(!this.forcard){\n                    this.forcard = value\n                }\n\n            },\n            setlistpr(value){\n\n                this.forcard = false\n                if(this.search) {\n                    this.show_refer = !this.show_refer\n                }\n                if(value[0].produit!=null){\n                    this.products=value;\n                }\n                console.log('setlistpr',value[0].produit)\n            },\n            stringToBoolean: function(string){\n\n                if(string!=null){\n                    switch(string.trim()){\n                        case \"true\": case \"yes\": case \"1\": return true;\n                        case \"false\": case \"no\": case \"0\": case null: return false;\n                        default: return Boolean(string);\n                    }\n                }\n\n            },\n                print (){\n                // Pass the element id here\n                this.$htmlToPaper('printMe');\n            },\n            cancels (){\n                // Pass the element id here\n                this.box=false;\n                this.$bvModal.hide('tests')\n                console.log('cancels',this.box)\n            },\n            closecaisse(){\n\n                console.log('close')\n                this.removehold({number:this.selecthold.number,close:true})\n                //this.removeAllProductsHold({number:this.selecthold.number,sessionCaisseId:localStorage.getItem(\"sessioncaisse\")})\n\n            },\n            registerCustomer(variant = null) {\n\n                /* setTimeout(() => {\n\n                    this.$refs.registerPartners.registerp(true)\n                    console.log('hello',this.formattedreferenceValue)\n\n                },4000);*/\n\n                this.registerCustom(variant)\n                this.variant  = variant\n\n                console.log('relandes',variant)\n\n            },\n\n            //Aucun Produit Selectionne\n            inAccount() {\n\n                this.show=!this.show\n                this.$bvModal.hide('confirminAccount')\n\n                this.inAccounts(\n\n                    {\n                        produitVue:this.listproducts,\n                        montantTotal:this.invoice_total,\n                        montantHT:this.Montant_total,\n                        montantEncaisse:this.form.montant_encaisse,\n                        sessionCaisseId:localStorage.getItem(\"sessioncaisse\"),\n                        clientId:this.$store.state.clientsId,\n                        vendeurId:this.$store.state.vendeursId,\n                        contactId:this.$store.state.contactsId,\n                        type:0,\n                        lang: this.$i18n.locale\n                    }\n                )\n\n                //this.inAccounts()\n            },\n\n            launchBox(){\n\n          \n\t\t\t\tconsole.log('state',this.$store.state.categorieproducts.nomcontacts.length)\n\t\t\t\tconsole.log('state',this.$store.state.categorieproducts.nomcontacts)\n\t\t\t\tconsole.log('state',this.numerocontacts.length)\n\t\t\t\tconsole.log('state',this.numerocontacts)\n\n                /*if(this.certidocsid===0){\n                    this.makeToast(this.$t('add certidocsId'),'error')\n                    return ;\n                }*/\n\n\t\t\t\t\n                //if(this.$store.state.categorieproducts.nomcontacts.length===0 || this.numerocontacts.length===0){\n                if(this.$store.state.categorieproducts.nomcontacts.length===0 || this.numerocontacts.length===0){\n                    this.makeToast(this.$t('select_contact'),'error')\n                    return ;\n                }\n\n                if(this.listproducts.length===0){\n                    this.makeToast(this.$t('no_product'),'error')\n                    return ;\n                }\n\n                if(this.form.montant_encaisse===0){\n                    this.makeToast(this.$t('which_amount'),'error')\n                    return ;\n                }\n                this.encompte = false\n\n                this.$bvModal.show('confirminBox')\n            },\n\n            launchAccount(){\n\t\t\t\n                if(this.$store.state.categorieproducts.contactsId===0){\n                    this.makeToast(this.$t('select_contact'),'error')\n                    this.$bvModal.hide('confirminAccount')\n                    return ;\n                }\n\n\n                if(this.listproducts.length === 0){\n                    this.makeToast(this.$t('no_product'),'error')\n                    this.$bvModal.hide('confirminAccount')\n                    return ;\n                }\n\n\n                if(this.form.montant_encaisse > 0){\n                    this.makeToast(this.$t('montant_encaisse_null'),'error')\n                    this.$bvModal.hide('confirminAccount')\n                    return ;\n                }\n\n\n                this.encompte = true\n                this.$bvModal.show('confirminAccount')\n\n            },\n\n            inBox() {\n\n                this.$bvModal.hide('confirminBox')\n                this.show=true\n\n                console.log('contactID',this.$store.state.categorieproducts.contactsId)\n                console.log('clientId',this.$store.state.categorieproducts.clientsId)\n\n\n                this.inBoxs(\n\n                    {\n                        produitVue:this.listproducts,\n                        montantTotal:this.invoice_total,\n                        montantHT:this.Montant_total,\n                        montantEncaisse:this.form.montant_encaisse,\n                        sessionCaisseId:localStorage.getItem(\"sessioncaisse\"),\n                        type:(this.listproducts[0].libelle==='dec')?2:1,\n                        clientId:this.$store.state.categorieproducts.clientsId,\n                        vendeurId:this.$store.state.categorieproducts.vendeursId,\n                        contactId:this.$store.state.categorieproducts.contactsId,\n                        contacclt:this.$store.state.categorieproducts.contacclt,\n                        lang: this.$i18n.locale,\n                        nomclient:this.$store.state.categorieproducts.nomclient,\n                        numeroclient:this.numeroclient,\n                        nomcontacts:this.$store.state.categorieproducts.nomcontacts,\n                        numerocontacts:this.numerocontacts,\n                        document:this.document,\n                        certidocsid:this.certidocsid\n                    }\n\n                )\n\n            },\n            closeBox(){\n\n                console.log('closebox')\n                //this.$bvModal.show('bilan')\\\n                this.closeb=false\n                this.closebox({\"ouvertureAmount\":this.ouvertureAmount})\n\n            },\n\n            openBox(){\n\n                //this.$bvModal.hide('confirmopenAccount')\n                // if(this.boxopen===\"false\"){\n                //     this.makeToast(\"Caisse Ouverte veuillez la fermer\",\"error\")\n                //     return;\n                // }\n                this.openb=false\n                this.openboxs({\"ouvertureAmount\":this.ouvertureAmount})\n\n            },\n\n            Addcat(product) {\n\n                console.log('product',product)\n\n                if((this.form.Reference)==''){\n                    this.makeToast(this.$t('ref_enter'),'error')\n                    return ;\n                }\n\n                if(product.produit.libelle=='dec' && this.listproducts.length!=0){\n\n\n                    this.makeToast(this.$t('product_waiting'),'error')\n\n\n                    /*if(this.listproducts.length!=0){\n                        this.listproducts = []\n                        this.removeAllProductsHold(product)\n                        console.log('valcatproduct',product.selecthold)\n\n                    }else{\n                        console.log('valcatproduct','vide')\n                    }*/\n\n\n                }\n                product.selecthold=this.selecthold\n                product.reference = this.form.Reference\n                this.forcard = true\n                this.addProductsHold(product)\n\n            },\n            /*searchreference(){\n\n                this.show_refer=!this.show_refer\n                this.search = true;\n                this.searchReference(this.form.Reference)\n            },*/\n            applyTax(prix,taxes){\n\n                taxes.forEach((value) => {\n\n                    if(!value.incluse){\n                        prix = prix + (prix*value.valeur)/100\n                    }\n                });\n                return prix\n            },\n            SelectHold(item){\n\n                console.log('hold',item.number)\n\n                this.SelectHolds(item)\n                //requete pour recuperer la liste des produits\n            },\n            checkIdHold(obj, id) {\n\n                return obj.map(function(item) { return item.holdId; }).indexOf(id);\n\n            },\n            invoiceTotal() {\n\n                var subtotal,total;\n                subtotal = this.listproducts.reduce(function(sum, item) {\n                    var cost = parseFloat(item.prix);\n                    if (!isNaN(cost)) {\n                        return sum + cost;\n                    }\n                }, 0);\n\n                this.Montant_total = subtotal.toFixed(2);\n                // tax\n                //total = subtotal * (this.invoice_tax / 100) + subtotal;\n                total = this.invoice_tax + subtotal;\n\n                /*switch (operande) {\n\n                    case \"+\":\n                        total = this.invoice_tax + subtotal;\n                        break;\n\n                    case \"-\":\n                        total = Math.abs(subtotal - this.invoice_tax) ;\n                        break;\n                }*/\n\n                total = parseFloat(total);\n                if (!isNaN(total)) {\n                    this.invoice_total = total.toFixed(2);\n                    this.form.montant_encaisse = this.invoice_total\n                } else {\n                    this.invoice_total = \"0.00\";\n                }\n\n            },\n            taxTotal(prix,operande){\n\n                var subtotaltax ,ageTotal;\n\n                //list of taxes of thisproduct\n                subtotaltax =  this.listtax.reduce((data, user) => {\n                    ageTotal = (ageTotal || 0) + user.valeur\n                    return ageTotal;\n                }, {});\n\n\n                //calculate amount and add it in total amout tax\n                if (!isNaN(subtotaltax)) {\n                    switch (operande) {\n                        case \"+\":\n                            console.log('subtotal',subtotaltax)\n                            this.invoice_tax = this.invoice_tax + ((subtotaltax * prix)/100)\n                            break;\n                        case \"-\":\n\n                            this.invoice_tax = Math.abs(this.invoice_tax - ((subtotaltax * prix)/100))\n                            break;\n                    }\n                    this.invoice_taxs = this.invoice_tax;\n\n                }\n\n                /*  subtotal = this.listtax.reduce(function(sum, item) {\n                      var cost = parseFloat(item.valeur);\n                      if (!isNaN(cost)) {\n\n                          console.log('subtotal',cost)\n                          return sum + cost;\n\n                      }\n                  }, 0);*/\n\n            },\n\n            checkId(obj, id) {\n\n                return obj.map(function(item) { return item.reference; }).indexOf(id);\n\n            },\n            removeCatProducts(product) {\n\n                console.log('index',product)\n                this.removeProductsHold(product)\n\n            },\n            SeeTaxProduct(product) {\n\n                this.taxes = product.taxes\n                this.$bvModal.show('test')\n\n\n            },\n            FetchProduct(catproduct){\n                console.log('oproduct')\n\n                this.FetchProducts(catproduct)\n            },\n\n            /* makeToast(variant = null, msg) {\n                 this.$bvToast.toast(msg, {\n                     title: ` ${variant || \"default\"}`,\n                     variant: variant,\n                     solid: true\n                 });\n             },*/\n\n            makeToast(variant = null,type) {\n                console.log('Please fill the form correctly',variant)\n                this.$toasted.show(variant,{type:type})\n            },\n\n\n            AddHold(){\n\n                this.addhold()\n                console.log('bilan', this.$store.state.categorieproducts.contactsId)\n            },\n\n            RemoveHold(){\n\n                this.$store.state.caisses.statusrequete = false\n                //console.log('hello',this.selecthold.number)\n\n                this.removehold({number:this.selecthold.number,\n                    close:true})\n            },\n\n        },\n\n        mounted() {\n\n            console.log(moment().format(\"yyyy-MM-DD\"))\n            console.log('boxopen',this.boxopen)\n\n            var t = JSON.parse(localStorage.getItem(\"selecthold\"))\n            console.log('codepays',t)\n\n            this.FetchCatProducts()\n           // this.FetchSalesProducts({number:t.number})\n\n            //this.closeBox()\n            //this.searchPartners({val:'t',type:'clients'})\n            //this.FetchContacts()\n            //this.FetchSellers()\n            //this.FetchCustomers()\n\n        },\n\n        watch: {\n\n\n            GetCHECKSESSION:function(value){\n\n                console.log('checksession',value)\n\n                this.boxopen = this.stringToBoolean((localStorage.getItem('boxopen')))\n                this.show = this.stringToBoolean((localStorage.getItem('boxshow')))\n\n                console.log('show',this.boxopen)\n\n               // this.show = (localStorage.getItem(\"boxshow\"))=='true'\n                console.log('show',(this.show))\n\n            },\n\n\n            GetRemoveAllProducts:function(value){\n\n\n                console.log('remov',value)\n                this.show=false\n                if(value===0){\n                \n                   // this.invoice_taxs=this.invoice_tax\n                    console.log('remov',this.invoice_taxs)\n                    this.$bvModal.show('tests')\n\n                    this.listproducts=[]\n                    this.listtax=[]\n                    this.invoice_tax = 0\n                    this.invoiceTotal()\n\n                    /*this.$store.state.categorieproducts.contactsId=0\n                    this.$store.state.categorieproducts.vendeursId=0\n                    this.$store.state.categorieproducts.clientsId=0*/\n                    this.form.Reference=\"\"\n                }else if(value===1){\n                    this.makeToast(this.$t('error'),0)\n                }\n                this.$store.state.caisses.removeallproducts=2;\n\n            },\n\n            GetCaisseOpen:function(value){\n\n                if(!value) {\n\n                    this.show = false\n                    this.$bvModal.hide('confirmopenAccount')\n                    this.openb=true\n                    this.boxopen = false\n                    localStorage.setItem(\"boxopen\",false)\n                    localStorage.setItem(\"boxshow\",false)\n                }\n                this.$store.state.caisses.caisseopen=true;\n\n                /*else{\n                    console.log('stdatus',value)\n\n                    this.$bvModal.hide('confirmcloseAccount')\n                    console.log('stdatus',value)\n                    localStorage.setItem(\"boxopen\",value)\n\n                }\n                */\n\n\n            },\n\n            getCatProducts: function(value){\n\n                this.cat=[]\n                this.cat = value\n                console.log('registerp',value)\n            },\n            getProducts(val){\n\n              if(val.length==0){\n                  makeToast(this.$t('error'),0)\n              }\n                /*if(this.search) {\n                    this.show_refer = !this.show_refer\n                }\n                console.log('resultl',val)\n                //this.makeToast('sucess','success')\n                this.products=val;*/\n            },\n            getStatus(value){\n\n                this.$refs.registerPartners.registerp(value)\n                if(value){\n                    this.statute=false\n                }else{\n                    console.log('registerp',value)\n                }\n\n            },\n            getb(){\n                return this.boxopen\n            },\n\n            getCustomer(val){\n\n                this.statute=false\n                console.log('statute',this.variant)\n\n                //useAutocomplete().state.userInput=\"hello\"\n\n                console.log('statute',val)\n                if(Object.keys(val).length !== 0) {\n\n\n                    if(this.variant.variant === \"caisse/clients\"){\n                        this.$bvModal.hide('registercustomer')\n                        this.clients.push(val)\n                        this.makeToast(this.$t('customer_add'),'success')\n                    }\n\n                    if(this.variant.variant === \"caisse/contacts\"){\n\n                        this.$bvModal.hide('registercontact')\n\n\n                        // this.contacts.push(val)\n                        makeToast(this.$t('contact_add'),'success')\n                    }\n\n                    if(this.variant.variant === \"caisse/vendeurs\"){\n                        this.$bvModal.hide('registerseller')\n                       // this.clients.push(val)\n                        makeToast(this.$t('sellers_add'),'success')\n                    }\n\n                    this.$bvModal.msgBoxOk('',)\n\n\n                }else{\n\n                    //this.show=false\n                    makeToast(this.$t('customer_denied'), \"error\")\n                }\n            },\n            GetBox(val){\n                this.box=val;\n\n                if(val){\n\n                    console.log('encaiss',this.holdlist.length)\n\n                    //dans le cas ou on veux supprimer l'onglet apres encaissement\n                    if(this.holdlist.length>1){\n                       /* this.show=false\n                        this.closecaisse()*/\n                        this.removeAllProductsHold({number:this.selecthold.number,\n                            sessionCaisseId:localStorage.getItem(\"sessioncaisse\")})\n                    }else{\n\n                        this.removeAllProductsHold({number:this.selecthold.number,\n                            sessionCaisseId:localStorage.getItem(\"sessioncaisse\")})\n                    }\n                    this.$store.state.categorieproducts.box = false\n\n                }else{\n                    this.show=false\n                    //makeToast(this.$t('error'),0)\n                }\n                // this.box=false;\n\n            },\n\n\n            GetEncaissements(val){\n\n                console.log('en',val)\n                makeToast(this.$t(val.message.code),this.$t(val.message.level))\n\n                this.encaissements=[]\n                this.encaissements=val.data\n\n\t\t\t\tthis.numeroclient = \"\"\n\t\t\t\tthis.numerocontacts = \"\"\n\t\t\t\tthis.form.Reference = \"\"\n\n                this.$emit('setreference',\"\")\n\n                this.field = this.$store.state.categorieproducts.contacclt\n                this.$store.state.categorieproducts.contactsId=\"\"\n                this.$store.state.categorieproducts.vendeursId=\"\"\n                this.$store.state.categorieproducts.clientsId=\"\"\n\n                this.$store.state.categorieproducts.nomclient = \"\"\n                this.$store.state.categorieproducts.nomcontacts = \"\"\n\n                this.$emit('erase',{val:'contacts'})\n\n                console.log('enc5',val.data)\n                this.resetWindows()\n\n                //useAutocomplete().state.userInput=\"\"\n\n            },\n\n\n            GETBILAN(val){\n\n                this.bilan=val\n                console.log('bilan',val)\n\n            },\n            getObjetHold(val){\n\n                //this.selecthold = val\n                this.holdlist.push(val);\n\n            },\n            getStatusHold(val){\n\n                if(val===200){\n                    let indexIds = this.checkIdHold(this.holdlist,this.selecthold.holdId)\n                    console.log('objetshold',indexIds)\n\n                    this.holdlist.splice(indexIds, 1);\n                    this.holdlist.sort();\n\n                }\n\n            },\n\n            getHoldList(val){\n                this.holdlist=[]\n                this.holdlist=val;\n\n                console.log('holdlistes',this.holdlist)\n\n                console.log('holdtes',localStorage.getItem(\"selecthold\"))\n                this.selecthold = this.holdlist[0]\n\n                /*if(localStorage.getItem(\"selecthold\") === 'null' || localStorage.getItem(\"selecthold\") === null ){\n\n                    this.selecthold = this.holdlist[0]\n                    console.log('holdlist',this.holdlist[0])\n                }\n\n                if(Object.keys(localStorage.getItem(\"selecthold\")).length !== 0){\n\n                    this.selecthold = localStorage.getItem(\"selecthold\")\n                    console.log('holdlis',this.selecthold)\n\n                }\n\n                console.log('hhhh',this.selecthold)*/\n                this.SelectHolds(this.selecthold)\n\n            },\n\n            getSelectHold(val){\n\n                if(val.success) {\n                    makeToast(this.$t(val.message.code),this.$t(val.message.level))\n                    this.selecthold = val.data\n                    console.log('soooobjethold', val)\n                    localStorage.setItem(\"selecthold\", JSON.stringify(val.data))\n\n                    //this.$store.state.categorieproducts.contactsId=0\n                    // this.$store.state.categorieproducts.vendeursId=0\n                    //this.$store.state.categorieproducts.clientsId=0\n                    useAutocomplete().state.userInput = \"\"\n\n\n                    this.getProductsHold(this.selecthold)\n\n                }else{\n\n                    console.log('soooobjetholds', val)\n                    makeToast(this.$t(val.message.code),this.$t(val.message.level))\n\n                }\n\n            },\n\n            GetProductsHold(val){\n\n                console.log('getp',val)\n\n                //this.listproducts = val\n                this.listproducts=[]\n                this.listtax=[]\n\n                if(val.length!=0) {\n                    //data=val.data\n                    val.data.forEach((value) => {\n\n                        this.listproducts.push({\n                            produitId: value.produit.produitId,\n                            libelle: value.produit.libelle,\n                            reference: value.reference,\n                            holdId: this.selecthold.holdId,\n                            prix: value.produit.prix,//this.applyTax(value.produit.prix,value.taxe),\n                            categorie: value.produit.categorieProduit.libelle,\n                            descriptionCat: value.produit.categorieProduit.description,\n                            taxes: value.taxes\n                        });\n\n                        this.listtax  = value.taxes\n                        this.taxTotal(value.produit.prix,\"+\")\n\n                    });\n\n                }else{\n                    this.invoice_tax  = 0\n                }\n                this.invoiceTotal()\n\n            },\n\n            MoveProductsHold(value){\n\n                console.log('movef',value)\n                this.forcard = false\n\n                var operande =\"\"\n                if(value.statut===0) {\n\n                    if(value.success){\n\n                        this.listproducts.reference = this.form.Reference\n                        operande = \"+\"\n                        this.listproducts.push({\n\n                            produitId: value.produit.produitId,\n                            libelle: value.produit.libelle,\n                            reference: this.listproducts.reference,\n                            holdId: this.selecthold.holdId,\n                            prix: value.produit.prix,//this.applyTax(value.produit.prix,value.taxe),\n                            categorie: value.produit.categorieProduit.libelle,\n                            descriptionCat: value.produit.categorieProduit.description,\n                            taxes: value.taxe\n\n                        });\n\n                        //this.form.Reference = ''\n                        this.$refs.matricule.resetfield()\n                        console.log(new Intl.NumberFormat('CM', { style: 'currency', currency: 'XAF' }).format(value.produit.prix));\n\n                        if(!value.taxe.incluse){\n\n                            this.listtax = value.taxe\n                            console.log('movee', this.listtax)\n\n                        }\n                        operande=\"+\";\n                        this.taxTotal(value.produit.prix,operande)\n\n                    }else{\n                        console.log('prxxxoducts',value.message.code)\n                        makeToast(this.$t(value.message.code),this.$t(value.message.level))\n                        //this.makeToast(this.$t(value.message.code),'error')\n\n\n                        //obtenir object par son id\n                    }\n\n                }else{\n\n                    operande=\"-\";\n\n                    //console.log('checkid',this.checkId(this.listproducts,value.reference))\n                    let indexId = this.checkId(this.listproducts,value.reference)\n                    this.listtax = (this.listproducts[indexId]).taxes\n\n\n                    this.taxTotal(this.listproducts[indexId].prix,operande)\n                    this.listproducts.splice(indexId, 1);\n\n\n\n                }\n\n\n                this.invoiceTotal()\n\n            },\n\n            GetBoxOpen(value){\n\n\n                if(!value) {\n\n                    this.show = false\n                    this.closeb=true\n                    this.$bvModal.hide('confirmopenAccount')\n\n                }else{\n                    this.closeb=true\n                    this.$bvModal.hide('confirmcloseAccount')\n\n                    this.show = true\n                    this.boxopen= false\n                    this.boxopen= true\n                    console.log('stdatus',value)\n\n                    this.selecthold={}\n                    this.listproducts=[]\n                    this.listtax=[]\n                    this.invoiceTotal()\n                    this.invoice_tax = 0\n                    this.holdlist=[]\n\n\n                    localStorage.setItem(\"boxopen\",true)\n                    localStorage.setItem(\"boxshow\",true)\n\n\n                    this.$store.state.caisses.boxopens=false\n                    // this.$bvModal.show('bilan')\n\n                }\n\n\n            },\n        }\n    };\n</script>\n\n<style scoped>\n    .Hold {\n        cursor: pointer;\n        text-align:center;\n        margin:5px 1px;\n        padding: 2px 10px;\n        background-color:#4C5261;\n        border-radius:3px;\n        color:#E4E6E7;\n        text-transform:uppercase;\n        font-size: 20px;\n        display:inline-block;\n        font-weight:600;\n        padding-bottom: 7px;\n        border-bottom: 3px solid #212C32;\n    }\n    .Hold span {\n        font-size: 12px;\n        color:#b9b2b2;\n        margin-left: 8px;\n    }\n    .selectedHold{\n        /*background-color:#35B8E0;*/\n        color:#E2E2E2;\n        border-bottom: 3px solid #f65e48;\n    }\n    .pl {\n        background-color:#253138;\n        color:#fff;\n        border-bottom: 3px solid #101417;\n    }\n    .taille{\n        width:120px;\n        height: 120px;\n        margin:10px;\n        background: #ffffff9e;\n    }\n    .rights{\n        position: relative;right: 0;margin-right: 10px;\n    }\n\n    img {\n        height:100vh;\n    }\n    .overlay-box{\n        background: #eee;\n    }\n    .scroll-card{\n        height: 250px;\n        display: flex !important;\n        flex-direction: row;\n        flex-grow: 1;\n        overflow: auto;\n    }\n</style>\n"]}]}